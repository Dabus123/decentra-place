"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[7709],{"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>WagmiConnector});var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js"),eventemitter3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/eventemitter3/index.mjs");class WagmiConnector extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__.A{constructor(_ref){let{chains=_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__.k9b,options}=_ref;super(),this.chains=chains,this.options=options}getBlockExplorerUrls(chain){const explorers=chain.explorers?.map((x=>x.url))??[];return explorers.length>0?explorers:void 0}isChainUnsupported(chainId){return!this.chains.some((x=>x.chainId===chainId))}updateChains(chains){this.chains=chains}}},"./node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AddChainError,C:()=>ChainNotConfiguredError,R:()=>ResourceUnavailableError,S:()=>SwitchChainError,U:()=>UserRejectedRequestError,a:()=>ConnectorNotFoundError});var _defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js");class RpcError extends Error{constructor(message,options){const{cause,code,data}=options;if(!Number.isInteger(code))throw new Error('"code" must be an integer.');if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string.');super(`${message}. Cause: ${JSON.stringify(cause)}`),this.cause=cause,this.code=code,this.data=data}}class ProviderRpcError extends RpcError{constructor(message,options){const{cause,code,data}=options;if(!(Number.isInteger(code)&&code>=1e3&&code<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(message,{cause,code,data})}}class AddChainError extends Error{constructor(){super(...arguments),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","AddChainError"),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"message","Error adding chain")}}class ChainNotConfiguredError extends Error{constructor(_ref){let{chainId,connectorId}=_ref;super(`Chain "${chainId}" not configured for connector "${connectorId}".`),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ChainNotConfigured")}}class ConnectorNotFoundError extends Error{constructor(){super(...arguments),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ConnectorNotFoundError"),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"message","Connector not found")}}class ResourceUnavailableError extends RpcError{constructor(cause){super("Resource unavailable",{cause,code:-32002}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ResourceUnavailable")}}class SwitchChainError extends ProviderRpcError{constructor(cause){super("Error switching chain",{cause,code:4902}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","SwitchChainError")}}class UserRejectedRequestError extends ProviderRpcError{constructor(cause){super("User rejected request",{cause,code:4001}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","UserRejectedRequestError")}}},"./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function normalizeChainId(chainId){return"string"==typeof chainId?Number.parseInt(chainId,"0x"===chainId.trim().substring(0,2)?16:10):"bigint"==typeof chainId?Number(chainId):chainId}__webpack_require__.d(__webpack_exports__,{n:()=>normalizeChainId})},"./node_modules/@thirdweb-dev/wallets/evm/connectors/frame/dist/thirdweb-dev-wallets-evm-connectors-frame.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FrameConnector:()=>FrameConnector});var _dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js"),ethers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ethersproject/address/lib.esm/index.js"),ethers__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/web3-provider.js"),ethers__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@ethersproject/bytes/lib.esm/index.js"),_dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js"),_dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js"),_dist_url_a45219bd_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/url-a45219bd.browser.esm.js"),_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js");__webpack_require__("./node_modules/eventemitter3/index.mjs");class FrameConnector extends _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.W{constructor(_ref){let{chains,options:suppliedOptions,connectorStorage}=_ref;super({chains,options:{shimDisconnect:!0,...suppliedOptions}}),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"id","frame"),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"name","Frame"),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"ready",!0),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"shimDisconnectKey",`${this.id}.shimDisconnect`),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"onAccountsChanged",(accounts=>{0===accounts.length?this.emit("disconnect"):this.emit("change",{account:ethers__WEBPACK_IMPORTED_MODULE_3__.getAddress(accounts[0])})})),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"onChainChanged",(chainId=>{const id=(0,_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.n)(chainId),unsupported=this.isChainUnsupported(id);this.emit("change",{chain:{id,unsupported}})})),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"onDisconnect",(()=>{this.emit("disconnect"),this.options.shimDisconnect&&this.connectorStorage.removeItem(this.shimDisconnectKey)})),this.connectorStorage=connectorStorage}async connect(config){try{const provider=await this.getProvider();if(!provider)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a;this.setupListeners(),this.emit("message",{type:"connecting"});const accounts=await provider.request({method:"eth_requestAccounts"}),account=ethers__WEBPACK_IMPORTED_MODULE_3__.getAddress(accounts[0]);let id=await this.getChainId(),unsupported=this.isChainUnsupported(id);if(config?.chainId&&id!==config?.chainId){id=(await this.switchChain(config?.chainId)).chainId,unsupported=this.isChainUnsupported(id)}return this.options.shimDisconnect&&this.connectorStorage.setItem(this.shimDisconnectKey,"true"),{account,provider,chain:{id,unsupported}}}catch(error){if(this.isUserRejectedRequestError(error))throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.U(error);if(-32002===error.code)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.R(error);throw error}}async disconnect(){const provider=await this.getProvider();provider?.removeListener&&(provider.removeListener("accountsChanged",this.onAccountsChanged),provider.removeListener("chainChanged",this.onChainChanged),provider.removeListener("disconnect",this.onDisconnect),this.isInjected()||provider.close(),this.options.shimDisconnect&&this.connectorStorage.removeItem(this.shimDisconnectKey))}async getAccount(){const provider=await this.getProvider();if(!provider)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a;const accounts=await provider.request({method:"eth_accounts"});return ethers__WEBPACK_IMPORTED_MODULE_3__.getAddress(accounts[0])}async getChainId(){const provider=await this.getProvider();if(!provider)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a;const chainId=await provider.request({method:"eth_chainId"});return(0,_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.n)(chainId)}async getProvider(){return this._provider=this.isInjected()?this.injectedProvider():await this.createProvider(),this._provider}async getSigner(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[provider,account]=await Promise.all([this.getProvider(),this.getAccount()]);return new ethers__WEBPACK_IMPORTED_MODULE_6__.j(provider,chainId).getSigner(account)}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.connectorStorage.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a;return!!await this.getAccount()}catch{return!1}}async switchChain(chainId){const provider=await this.getProvider();if(!provider)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a;const chainIdHex=ethers__WEBPACK_IMPORTED_MODULE_7__.hexValue(chainId);try{return await Promise.all([provider.request({method:"wallet_switchEthereumChain",params:[{chainId:chainIdHex}]}),new Promise((res=>this.on("change",(_ref2=>{let{chain}=_ref2;chain?.id===chainId&&res()}))))]),this.chains.find((x=>x.chainId===chainId))??{chainId,name:`Chain ${chainIdHex}`,slug:`${chainIdHex}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpc:[""],chain:"",shortName:"",testnet:!0}}catch(switchChainError){const chain=this.chains.find((x=>x.chainId===chainId));if(!chain)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.C({chainId,connectorId:this.id});if(4902===switchChainError.code)try{await provider.request({method:"wallet_addEthereumChain",params:[{chainId:chainIdHex,chainName:chain.name,nativeCurrency:chain.nativeCurrency,rpcUrls:(0,_dist_url_a45219bd_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.g)(chain),blockExplorerUrls:this.getBlockExplorerUrls(chain)}]});if(await this.getChainId()!==chainId)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.U(new Error("User rejected switch after adding network."));return chain}catch(addChainError){if(this.isUserRejectedRequestError(addChainError))throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.U(addChainError);throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.A(addChainError.message)}if(this.isUserRejectedRequestError(switchChainError))throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.U(switchChainError);throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.S(switchChainError)}}async watchAsset(_ref3){let{address,decimals=18,image,symbol}=_ref3;const provider=await this.getProvider();if(!provider)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a;return provider.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address,decimals,image,symbol}}})}async setupListeners(){const provider=await this.getProvider();provider.on&&(provider.on("accountsChanged",this.onAccountsChanged),provider.on("chainChanged",this.onChainChanged),provider.on("disconnect",this.onDisconnect))}isUserRejectedRequestError(error){return 4001===error.code}injectedProvider(){return window?.ethereum}isInjected(){return!!this.injectedProvider()?.isFrame}async createProvider(){return(0,(await __webpack_require__.e(1582).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/eth-provider/browser.js",23))).default)("frame")}}}}]);