"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[8971],{"./node_modules/@thirdweb-dev/sdk/dist/QueryParams-32a56510.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>DEFAULT_QUERY_ALL_COUNT,F:()=>FALLBACK_METADATA,I:()=>InterfaceId_IERC721,a:()=>InterfaceId_IERC1155,b:()=>uploadOrExtractURI,c:()=>fetchTokenMetadataForContract,f:()=>fetchTokenMetadata,g:()=>getBaseUriFromBatch,u:()=>uploadOrExtractURIs});var _setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/setErc20Allowance-7f76f677.browser.esm.js"),ethers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@ethersproject/bytes/lib.esm/index.js"),ethers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),ethers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ethersproject/contracts/lib.esm/index.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,console=__webpack_require__("./node_modules/console-browserify/index.js");const InterfaceId_IERC721=(()=>ethers__WEBPACK_IMPORTED_MODULE_0__.arrayify("0x80ac58cd"))(),InterfaceId_IERC1155=(()=>ethers__WEBPACK_IMPORTED_MODULE_0__.arrayify("0xd9b67a26"))(),FALLBACK_METADATA={name:"Failed to load NFT metadata"};async function fetchTokenMetadata(tokenId,tokenUri,storage){if(tokenUri.startsWith("data:application/json;base64")&&void 0!==Buffer){const base64=tokenUri.split(",")[1],jsonMetadata=JSON.parse(Buffer.from(base64,"base64").toString("utf-8"));return _setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.a.parse({...jsonMetadata,id:ethers__WEBPACK_IMPORTED_MODULE_2__.gH.from(tokenId).toString(),uri:tokenUri})}const parsedUri=tokenUri.replace("{id}",ethers__WEBPACK_IMPORTED_MODULE_0__.hexZeroPad(ethers__WEBPACK_IMPORTED_MODULE_2__.gH.from(tokenId).toHexString(),32).slice(2));let jsonMetadata;try{jsonMetadata=await storage.downloadJSON(parsedUri)}catch(err){const unparsedTokenIdUri=tokenUri.replace("{id}",ethers__WEBPACK_IMPORTED_MODULE_2__.gH.from(tokenId).toString());try{jsonMetadata=await storage.downloadJSON(unparsedTokenIdUri)}catch(e){console.warn(`failed to get token metadata: ${JSON.stringify({tokenId:tokenId.toString(),tokenUri})} -- falling back to default metadata`),jsonMetadata=FALLBACK_METADATA}}return _setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.a.parse({...jsonMetadata,id:ethers__WEBPACK_IMPORTED_MODULE_2__.gH.from(tokenId).toString(),uri:tokenUri})}async function fetchTokenMetadataForContract(contractAddress,provider,tokenId,storage){let uri;const ERC165MetadataAbi=(await __webpack_require__.e(4811).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC165.json",19))).default,erc165=new ethers__WEBPACK_IMPORTED_MODULE_3__.NZ(contractAddress,ERC165MetadataAbi,provider),[isERC721,isERC1155]=await Promise.all([erc165.supportsInterface(InterfaceId_IERC721),erc165.supportsInterface(InterfaceId_IERC1155)]);if(isERC721){const ERC721MetadataAbi=(await Promise.resolve().then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json",19))).default,erc721=new ethers__WEBPACK_IMPORTED_MODULE_3__.NZ(contractAddress,ERC721MetadataAbi,provider);uri=await erc721.tokenURI(tokenId)}else{if(!isERC1155)throw Error("Contract must implement ERC 1155 or ERC 721.");{const ERC1155MetadataAbi=(await Promise.resolve().then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json",19))).default,erc1155=new ethers__WEBPACK_IMPORTED_MODULE_3__.NZ(contractAddress,ERC1155MetadataAbi,provider);uri=await erc1155.uri(tokenId)}}return uri?fetchTokenMetadata(tokenId,uri,storage):_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.a.parse({...FALLBACK_METADATA,id:ethers__WEBPACK_IMPORTED_MODULE_2__.gH.from(tokenId).toString(),uri:""})}async function uploadOrExtractURI(metadata,storage){return"string"==typeof metadata?metadata:await storage.upload(_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.C.parse(metadata))}async function uploadOrExtractURIs(metadatas,storage,startNumber,options){if(function isUriList(metadatas){return void 0===metadatas.find((m=>"string"!=typeof m))}(metadatas))return metadatas;if(function isMetadataList(metadatas){return void 0===metadatas.find((m=>"object"!=typeof m))}(metadatas)){return await storage.uploadBatch(metadatas.map((m=>_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.C.parse(m))),{rewriteFileNames:{fileStartNumber:startNumber||0},onProgress:options?.onProgress})}throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)")}function getBaseUriFromBatch(uris){const baseUri=uris[0].substring(0,uris[0].lastIndexOf("/"));for(let i=0;i<uris.length;i++){const uri=uris[i].substring(0,uris[i].lastIndexOf("/"));if(baseUri!==uri)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${baseUri}' but got '${uri}'`)}return baseUri.replace(/\/$/,"")+"/"}const DEFAULT_QUERY_ALL_COUNT=100},"./node_modules/@thirdweb-dev/sdk/dist/assertEnabled-d1700f0b.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>EndDateSchema,R:()=>RawDateSchema,S:()=>StartDateSchema,a:()=>assertEnabled});var ethers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),zod__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/zod/lib/index.mjs"),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js");const RawDateSchema=(()=>zod__WEBPACK_IMPORTED_MODULE_0__.z.union([zod__WEBPACK_IMPORTED_MODULE_0__.z.date().transform((i=>ethers__WEBPACK_IMPORTED_MODULE_1__.gH.from(Math.floor(i.getTime()/1e3)))),zod__WEBPACK_IMPORTED_MODULE_0__.z.number().transform((i=>ethers__WEBPACK_IMPORTED_MODULE_1__.gH.from(i)))]))(),StartDateSchema=(()=>RawDateSchema.default(new Date(0)))(),EndDateSchema=(()=>RawDateSchema.default(new Date(Date.now()+31536e7)))();function assertEnabled(namespace,feature){if(!namespace)throw new _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.x(feature);return namespace}},"./node_modules/@thirdweb-dev/sdk/dist/contract-interceptor-d7b164a7.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ContractInterceptor});class ContractInterceptor{constructor(contractWrapper){this.contractWrapper=contractWrapper}overrideNextTransaction(hook){this.contractWrapper.withTransactionOverride(hook)}}},"./node_modules/@thirdweb-dev/sdk/dist/marketplacev3-ef469d89.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MarketplaceV3:()=>MarketplaceV3});var _assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/assertEnabled-d1700f0b.browser.esm.js"),_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-appuri-5c40af52.browser.esm.js"),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js"),_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-32d08b05.browser.esm.js"),_contract_interceptor_d7b164a7_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-interceptor-d7b164a7.browser.esm.js"),_contract_platform_fee_e756e68f_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-platform-fee-e756e68f.browser.esm.js"),_contract_roles_71988d2e_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-roles-71988d2e.browser.esm.js"),_marketplacev3_offers_ce1f096b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/marketplacev3-offers-ce1f096b.browser.esm.js"),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/transactions-72f9603c.browser.esm.js");__webpack_require__("./node_modules/bn.js/lib/bn.js"),__webpack_require__("./node_modules/bs58/index.js"),__webpack_require__("./node_modules/eventemitter3/index.mjs");class MarketplaceV3{static contractRoles=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.dH;get directListings(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.detectDirectListings(),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.dA)}get englishAuctions(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.detectEnglishAuctions(),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.dB)}get offers(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.detectOffers(),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.dC)}get chainId(){return this._chainId}constructor(network,address,storage){let options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},abi=arguments.length>4?arguments[4]:void 0,chainId=arguments.length>5?arguments[5]:void 0,contractWrapper=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.cs(network,address,abi,options,storage);this._chainId=chainId,this.abi=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.bj.parse(abi||[]),this.contractWrapper=contractWrapper,this.storage=storage,this.metadata=new _contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.C(this.contractWrapper,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.b$,this.storage),this.app=new _contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.b(this.contractWrapper,this.metadata,this.storage),this.roles=new _contract_roles_71988d2e_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.C(this.contractWrapper,MarketplaceV3.contractRoles),this.encoder=new _fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.C(this.contractWrapper),this.estimator=new _contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.G(this.contractWrapper),this.events=new _contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a(this.contractWrapper),this.platformFees=new _contract_platform_fee_e756e68f_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.C(this.contractWrapper),this.interceptor=new _contract_interceptor_d7b164a7_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__.C(this.contractWrapper)}onNetworkUpdated(network){this.contractWrapper.updateSignerOrProvider(network)}getAddress(){return this.contractWrapper.address}async prepare(method,args,overrides){return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method,args,overrides})}async call(functionName,args,overrides){return this.contractWrapper.call(functionName,args,overrides)}detectDirectListings(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.d)(this.contractWrapper,"DirectListings"))return new _marketplacev3_offers_ce1f096b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.M(this.contractWrapper,this.storage)}detectEnglishAuctions(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.d)(this.contractWrapper,"EnglishAuctions"))return new _marketplacev3_offers_ce1f096b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a(this.contractWrapper,this.storage)}detectOffers(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.d)(this.contractWrapper,"Offers"))return new _marketplacev3_offers_ce1f096b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.b(this.contractWrapper,this.storage)}}},"./node_modules/@thirdweb-dev/sdk/dist/setErc20Allowance-7f76f677.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>BasicNFTInput,C:()=>CommonNFTInput,N:()=>NFTInputOrUriSchema,a:()=>CommonNFTOutput,s:()=>setErc20Allowance});var _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js"),zod__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/zod/lib/index.mjs"),_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-32d08b05.browser.esm.js");const PropertiesInput=(()=>zod__WEBPACK_IMPORTED_MODULE_0__.z.object({}).catchall(zod__WEBPACK_IMPORTED_MODULE_0__.z.union([_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cx,zod__WEBPACK_IMPORTED_MODULE_0__.z.unknown()])))(),OptionalPropertiesInput=(()=>zod__WEBPACK_IMPORTED_MODULE_0__.z.union([zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.array(PropertiesInput)).transform((i=>i.flat())),zod__WEBPACK_IMPORTED_MODULE_0__.z.array(PropertiesInput),PropertiesInput]).optional().nullable())(),BasicNFTInput=(()=>zod__WEBPACK_IMPORTED_MODULE_0__.z.object({name:zod__WEBPACK_IMPORTED_MODULE_0__.z.union([zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),zod__WEBPACK_IMPORTED_MODULE_0__.z.number()]).optional().nullable(),description:zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional().nullable(),image:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cy.nullable().optional(),animation_url:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cy.optional().nullable()}))(),CommonNFTInput=(()=>BasicNFTInput.extend({external_url:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cy.nullable().optional(),background_color:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cz.optional().nullable(),properties:OptionalPropertiesInput,attributes:OptionalPropertiesInput}).catchall(zod__WEBPACK_IMPORTED_MODULE_0__.z.union([_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cx,zod__WEBPACK_IMPORTED_MODULE_0__.z.unknown()])))(),NFTInputOrUriSchema=(()=>zod__WEBPACK_IMPORTED_MODULE_0__.z.union([CommonNFTInput,zod__WEBPACK_IMPORTED_MODULE_0__.z.string()]))(),CommonNFTOutput=(()=>CommonNFTInput.extend({id:zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),uri:zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),image:zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),external_url:zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),animation_url:zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional()}))();async function setErc20Allowance(contractToApprove,value,currencyAddress,overrides){if(!(0,_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.i)(currencyAddress)){const ERC20Abi=(await Promise.resolve().then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20.json",19))).default,signer=contractToApprove.getSigner(),provider=contractToApprove.getProvider(),erc20=new _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cs(signer||provider,currencyAddress,ERC20Abi,contractToApprove.options,contractToApprove.storage),owner=await contractToApprove.getSignerAddress(),spender=contractToApprove.address;return(await erc20.read("allowance",[owner,spender])).lt(value)&&await erc20.sendTransaction("approve",[spender,value]),overrides}overrides.value=value}}}]);