"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[7716],{"./node_modules/@thirdweb-dev/sdk/dist/contract-sales-918c7cb8.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ContractPrimarySale});var _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/transactions-72f9603c.browser.esm.js"),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js");class ContractPrimarySale{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.d7.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}async getRecipient(){return await this.contractWrapper.read("primarySaleRecipient",[])}setRecipient=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async recipient=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setPrimarySaleRecipient",args:[recipient]})))}},"./node_modules/@thirdweb-dev/sdk/dist/smart-contract-ac432d60.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SmartContract:()=>SmartContract});var assertEnabled_d1700f0b_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/assertEnabled-d1700f0b.browser.esm.js"),contract_appuri_5c40af52_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-appuri-5c40af52.browser.esm.js"),index_33cd3415_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js"),transactions_72f9603c_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/transactions-72f9603c.browser.esm.js"),bignumber=__webpack_require__("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),lib_esm=__webpack_require__("./node_modules/@ethersproject/units/lib.esm/index.js"),address_lib_esm=__webpack_require__("./node_modules/@ethersproject/address/lib.esm/index.js"),utf8=__webpack_require__("./node_modules/@ethersproject/strings/lib.esm/utf8.js"),id=__webpack_require__("./node_modules/@ethersproject/hash/lib.esm/id.js"),lib_esm_interface=__webpack_require__("./node_modules/@ethersproject/abi/lib.esm/interface.js"),tiny_invariant=__webpack_require__("./node_modules/tiny-invariant/dist/esm/tiny-invariant.js"),signature_d3ea643d_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/signature-d3ea643d.browser.esm.js"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),fetchSourceFilesFromMetadata_906c835e_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/fetchSourceFilesFromMetadata-906c835e.browser.esm.js"),deployContractDeterministic_7823c15c_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/deployContractDeterministic-7823c15c.browser.esm.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");let AdminFlag=function(AdminFlag){return AdminFlag[AdminFlag.None=0]="None",AdminFlag[AdminFlag.AddAdmin=1]="AddAdmin",AdminFlag[AdminFlag.RemoveAdmin=2]="RemoveAdmin",AdminFlag}({});const DEFAULT_PERMISSIONS={startDate:bignumber.gH.from(0),expirationDate:bignumber.gH.from(0),approvedCallTargets:[],nativeTokenLimitPerTransaction:"0"},SignerPermissionsSchema=(()=>lib.z.object({startDate:assertEnabled_d1700f0b_browser_esm.S,expirationDate:assertEnabled_d1700f0b_browser_esm.E,nativeTokenLimitPerTransaction:index_33cd3415_browser_esm.cw.default(0),approvedCallTargets:lib.z.union([lib.z.array(index_33cd3415_browser_esm.b9),lib.z.literal("*")])}))(),PermissionSnapshotSchema=(()=>lib.z.array(lib.z.object({signer:index_33cd3415_browser_esm.b9,makeAdmin:lib.z.boolean(),permissions:SignerPermissionsSchema})))(),SignerPermissionRequestV1=[{name:"signer",type:"address"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],SignerPermissionRequest=[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}];class AccountPermissions{featureName=index_33cd3415_browser_esm.dm.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}getAddress(){return this.contractWrapper.address}hasDuplicateSigners(snapshot){const checkedSigner={},signers=snapshot.map((item=>item.signer));for(const signer of signers){if(checkedSigner[signer])return!0;checkedSigner[signer]=!0}return!1}parseSignerPermissionsStruct(permissions){return{startDate:new Date(1e3*parseInt(permissions.startTimestamp.toString())),expirationDate:new Date(1e3*parseInt(permissions.endTimestamp.toString())),nativeTokenLimitPerTransaction:bignumber.gH.from(permissions.nativeTokenLimitPerTransaction),approvedCallTargets:permissions.approvedTargets}}async sendSignerPermissionRequest(signerAddress,permissions,adminFlag){const{payload,signature}=await this.generatePayload(signerAddress,permissions,adminFlag);return transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setPermissionsForSigner",args:[payload,signature]})}async generatePayload(signerAddress,permissions,isAdmin){const payload={signer:signerAddress,isAdmin:isAdmin.valueOf(),approvedTargets:"*"===permissions.approvedCallTargets?[index_33cd3415_browser_esm.cu]:permissions.approvedCallTargets,nativeTokenLimitPerTransaction:lib_esm.parseEther(permissions.nativeTokenLimitPerTransaction),permissionStartTimestamp:permissions.startDate,permissionEndTimestamp:permissions.expirationDate,reqValidityStartTimestamp:0,reqValidityEndTimestamp:bignumber.gH.from(Math.floor(new Date(Date.now()+31536e7).getTime()/1e3)),uid:(0,signature_d3ea643d_browser_esm.L)(void 0)},chainId=await this.contractWrapper.getChainID(),connectedSigner=this.contractWrapper.getSigner();(0,tiny_invariant.A)(connectedSigner,"No signer available");return{payload,signature:await this.contractWrapper.signTypedData(connectedSigner,{name:"Account",version:"1",chainId,verifyingContract:this.getAddress()},{SignerPermissionRequest},payload)}}async generateLegacyPayload(signerAddress,permissions){if("*"===permissions.approvedCallTargets)throw new Error("Wildcard call targets are not supported on legacy account permissions contract, please deploy an updated contract factory.");const payload={signer:signerAddress,approvedTargets:permissions.approvedCallTargets,nativeTokenLimitPerTransaction:lib_esm.parseEther(permissions.nativeTokenLimitPerTransaction),permissionStartTimestamp:permissions.startDate,permissionEndTimestamp:permissions.expirationDate,reqValidityStartTimestamp:0,reqValidityEndTimestamp:bignumber.gH.from(Math.floor(new Date(Date.now()+31536e7).getTime()/1e3)),uid:(0,signature_d3ea643d_browser_esm.L)(void 0)},chainId=await this.contractWrapper.getChainID(),connectedSigner=this.contractWrapper.getSigner();(0,tiny_invariant.A)(connectedSigner,"No signer available");return{payload,signature:await this.contractWrapper.signTypedData(connectedSigner,{name:"Account",version:"1",chainId,verifyingContract:this.getAddress()},{SignerPermissionRequest:SignerPermissionRequestV1},payload)}}async isAdmin(signerAddress){const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress);return await this.contractWrapper.read("isAdmin",[resolvedSignerAddress])}async isSigner(signerAddress){const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress);return await this.contractWrapper.read("isActiveSigner",[resolvedSignerAddress])}async getAllAdmins(){return await this.contractWrapper.read("getAllAdmins",[])}async getAllSigners(){const activeSignersWithPerms=await this.contractWrapper.read("getAllActiveSigners",[]);return await Promise.all(activeSignersWithPerms.map((async signerWithPermissions=>({signer:signerWithPermissions.signer,permissions:this.parseSignerPermissionsStruct(signerWithPermissions)}))))}async getAllAdminsAndSigners(){return[...(await this.getAllAdmins()).map((admin=>({isAdmin:!0,signer:admin,permissions:{startDate:new Date(0),expirationDate:new Date(0),nativeTokenLimitPerTransaction:bignumber.gH.from(0),approvedCallTargets:[]}}))),...await this.getAllSigners()]}grantAdminPermissions=(0,transactions_72f9603c_browser_esm.f)((async signerAddress=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress);return await this.sendSignerPermissionRequest(resolvedSignerAddress,DEFAULT_PERMISSIONS,AdminFlag.AddAdmin)}));revokeAdminPermissions=(0,transactions_72f9603c_browser_esm.f)((async signerAddress=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress);return await this.sendSignerPermissionRequest(resolvedSignerAddress,DEFAULT_PERMISSIONS,AdminFlag.RemoveAdmin)}));grantPermissions=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,permissions)=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress),resolvedPermissions=await SignerPermissionsSchema.parseAsync(permissions);return await this.sendSignerPermissionRequest(resolvedSignerAddress,resolvedPermissions,AdminFlag.None)}));updatePermissions=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,permissions)=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress),resolvedPermissions=await SignerPermissionsSchema.parseAsync(permissions);if(await this.isAdmin(resolvedSignerAddress))throw new Error("Signer is already an admin. Cannot update permissions of an existing admin.");if(!await this.isSigner(resolvedSignerAddress))throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");return await this.sendSignerPermissionRequest(resolvedSignerAddress,resolvedPermissions,AdminFlag.None)}));revokeAccess=(0,transactions_72f9603c_browser_esm.f)((async signerAddress=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress);return await this.sendSignerPermissionRequest(resolvedSignerAddress,{startDate:bignumber.gH.from(0),expirationDate:bignumber.gH.from(0),approvedCallTargets:[],nativeTokenLimitPerTransaction:"0"},AdminFlag.None)}));approveTargetForSigner=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,target)=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress),resolvedTarget=await(0,index_33cd3415_browser_esm.aL)(target);if(await this.isAdmin(resolvedSignerAddress))throw new Error("Signer is already an admin. Cannot approve targets for an admin.");if(!await this.isSigner(resolvedSignerAddress))throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");const permissions=await this.contractWrapper.read("getPermissionsForSigner",[resolvedSignerAddress]);if(permissions.approvedTargets.includes(target))throw new Error("Target is already approved");const newTargets=[...permissions.approvedTargets,resolvedTarget];return await this.sendSignerPermissionRequest(resolvedSignerAddress,{startDate:bignumber.gH.from(permissions.startTimestamp),expirationDate:bignumber.gH.from(permissions.endTimestamp),approvedCallTargets:newTargets,nativeTokenLimitPerTransaction:permissions.nativeTokenLimitPerTransaction.toString()},AdminFlag.None)}));disapproveTargetForSigner=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,target)=>{const resolvedSignerAddress=await(0,index_33cd3415_browser_esm.aL)(signerAddress),resolvedTarget=await(0,index_33cd3415_browser_esm.aL)(target);if(await this.isAdmin(resolvedSignerAddress))throw new Error("Signer is already an admin. Cannot approve targets for an admin.");if(!await this.isSigner(resolvedSignerAddress))throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");const permissions=await this.contractWrapper.read("getPermissionsForSigner",[resolvedSignerAddress]);if(!permissions.approvedTargets.includes(resolvedTarget))throw new Error("Target is currently not approved");const newTargets=permissions.approvedTargets.filter((approvedTarget=>address_lib_esm.getAddress(approvedTarget)!==address_lib_esm.getAddress(resolvedTarget)));return await this.sendSignerPermissionRequest(resolvedSignerAddress,{startDate:bignumber.gH.from(permissions.startTimestamp),expirationDate:bignumber.gH.from(permissions.endTimestamp),approvedCallTargets:newTargets,nativeTokenLimitPerTransaction:permissions.nativeTokenLimitPerTransaction.toString()},AdminFlag.None)}));resetAllPermissions=(0,transactions_72f9603c_browser_esm.f)((async permissionSnapshot=>{const resolvedSnapshot=await PermissionSnapshotSchema.parseAsync(permissionSnapshot);if(this.hasDuplicateSigners(resolvedSnapshot))throw new Error("Duplicate signers found in input.");const removeAdminData=[],addOrUpdateSignerData=[],removeSignerData=[],allAdmins=await this.getAllAdmins(),allToMakeAdmin=resolvedSnapshot.filter((item=>item.makeAdmin)).map((item=>item.signer));allAdmins.forEach((async admin=>{if(!allToMakeAdmin.includes(admin)){const data=(await this.sendSignerPermissionRequest(admin,DEFAULT_PERMISSIONS,AdminFlag.RemoveAdmin)).encode();removeAdminData.push(data)}}));const allSigners=await this.getAllSigners(),allToMakeSigners=resolvedSnapshot.filter((item=>!item.makeAdmin)).map((item=>item.signer));await Promise.all(allSigners.map((async item=>{if(!allToMakeSigners.includes(item.signer)){const data=(await this.sendSignerPermissionRequest(item.signer,DEFAULT_PERMISSIONS,AdminFlag.None)).encode();removeSignerData.push(data)}})));for(const member of resolvedSnapshot)if(member.makeAdmin)(await this.sendSignerPermissionRequest(member.signer,DEFAULT_PERMISSIONS,AdminFlag.AddAdmin)).encode();else{const data=(await this.sendSignerPermissionRequest(member.signer,member.permissions,AdminFlag.None)).encode();addOrUpdateSignerData.push(data)}const data=[];return removeAdminData.forEach((item=>{data.push(item)})),removeSignerData.forEach((item=>{data.push(item)})),addOrUpdateSignerData.forEach((item=>{data.push(item)})),transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[data]})}))}class Account{featureName=index_33cd3415_browser_esm.dn.name;constructor(contractWrapper){this.contractWrapper=contractWrapper,this.accountPermissions=this.detectAccountPermissions()}detectAccountPermissions(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"AccountPermissions")||(0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"AccountPermissionsV1"))return new AccountPermissions(this.contractWrapper)}getAddress(){return this.contractWrapper.address}async isAdmin(signerAddress){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).isAdmin(signerAddress)}async isSigner(signerAddress){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).isSigner(signerAddress)}async getAllAdmins(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).getAllAdmins()}async getAllSigners(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).getAllSigners()}async getAllAdminsAndSigners(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).getAllAdminsAndSigners()}grantAdminPermissions=(0,transactions_72f9603c_browser_esm.f)((async signerAddress=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).grantAdminPermissions.prepare(signerAddress)));revokeAdminPermissions=(0,transactions_72f9603c_browser_esm.f)((async signerAddress=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).revokeAdminPermissions.prepare(signerAddress)));grantPermissions=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,permissions)=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).grantPermissions.prepare(signerAddress,permissions)));updatePermissions=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,permissions)=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).updatePermissions.prepare(signerAddress,permissions)));revokeAccess=(0,transactions_72f9603c_browser_esm.f)((async signerAddress=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).revokeAccess.prepare(signerAddress)));approveTargetForSigner=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,target)=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).approveTargetForSigner.prepare(signerAddress,target)));disapproveTargetForSigner=(0,transactions_72f9603c_browser_esm.f)((async(signerAddress,target)=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).disapproveTargetForSigner.prepare(signerAddress,target)));resetAllPermissions=(0,transactions_72f9603c_browser_esm.f)((async permissionSnapshot=>(0,assertEnabled_d1700f0b_browser_esm.a)(this.accountPermissions,index_33cd3415_browser_esm.dm).resetAllPermissions.prepare(permissionSnapshot)))}class AccountFactory{featureName=index_33cd3415_browser_esm.dp.name;constructor(contractWrapper){this.contractWrapper=contractWrapper,this.events=new contract_appuri_5c40af52_browser_esm.a(this.contractWrapper)}getAddress(){return this.contractWrapper.address}async predictAccountAddress(admin,extraData){let data=utf8.YW("");return extraData&&(data=extraData),this.contractWrapper.read("getAddress",[admin,data])}async getAssociatedAccounts(signer){return this.contractWrapper.read("getAccountsOfSigner",[signer])}async getAllAccounts(){return await this.contractWrapper.read("getAllAccounts",[])}async isAccountDeployed(admin,extraData){const addr=await this.predictAccountAddress(admin,extraData);return(0,index_33cd3415_browser_esm.au)(addr,this.contractWrapper.getProvider())}createAccount=(0,transactions_72f9603c_browser_esm.f)((async(accountAdmin,extraData)=>{if(await this.isAccountDeployed(accountAdmin,extraData))throw new Error(`Account already deployed for admin: ${accountAdmin}`);let data=utf8.YW("");return extraData&&(data=extraData),transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"createAccount",args:[accountAdmin,data],parse:receipt=>({address:this.contractWrapper.parseLogs("AccountCreated",receipt?.logs)[0].args.account,receipt})})}))}class ContractPublishedMetadata{constructor(contractWrapper,storage){this.contractWrapper=contractWrapper,this.storage=storage}async get(){return this._cachedMetadata||(this._cachedMetadata=await(0,index_33cd3415_browser_esm.K)(this.contractWrapper.address,this.contractWrapper.getProvider(),this.storage,this.contractWrapper.options)),this._cachedMetadata}async extractSources(){const publishedMetadata=await this.get();return(0,fetchSourceFilesFromMetadata_906c835e_browser_esm.f)(publishedMetadata,this.storage)}async extractFunctions(){let publishedMetadata;try{publishedMetadata=await this.get()}catch(e){}return(0,index_33cd3415_browser_esm.a2)(index_33cd3415_browser_esm.bj.parse(this.contractWrapper.abi),publishedMetadata?.metadata)}async extractEvents(){let publishedMetadata;try{publishedMetadata=await this.get()}catch(e){}return function extractEventsFromAbi(abi,metadata){const events=index_33cd3415_browser_esm.bj.parse(abi||[]).filter((el=>"event"===el.type)),parsed=[];for(const e of events){const doc=(0,index_33cd3415_browser_esm.a0)(e.name,metadata,"events");parsed.push({inputs:e.inputs||[],outputs:e.outputs||[],name:e.name||"unknown",comment:doc})}return parsed}(index_33cd3415_browser_esm.bj.parse(this.contractWrapper.abi),publishedMetadata?.metadata)}}class ExtensionManager{featureName=index_33cd3415_browser_esm.dq.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}getAddress(){return this.contractWrapper.readContract.address}async getAll(){return await this.contractWrapper.readContract.getAllExtensions()}async get(extensionName){return await this.contractWrapper.readContract.getExtension(extensionName)}async getExtensionAddress(extensionName){return(await this.get(extensionName)).metadata.implementation}async getAllFunctions(extensionName){return(await this.get(extensionName)).functions}async getExtensionForFunction(functionInput){let selector=functionInput.functionSelector;selector||((0,tiny_invariant.A)(functionInput.functionSignature,"Atleast one of function selector and signature must be provided"),selector=id.id(functionInput.functionSignature).substring(0,10));return await this.contractWrapper.readContract.getMetadataForFunction(selector)}async getExtensionAddressForFunction(functionInput){return(await this.getExtensionForFunction(functionInput)).implementation}add=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"addExtension",args:[inputArgs.extension],parse:async receipt=>{if(this.contractWrapper.parseLogs("ExtensionAdded",receipt.logs).length<1)throw new Error("No ExtensionAdded event found");const extensionAbi=inputArgs.extensionAbi?index_33cd3415_browser_esm.bj.parse(inputArgs.extensionAbi):(await(0,index_33cd3415_browser_esm.K)(inputArgs.extension.metadata.implementation,this.contractWrapper.getProvider(),this.contractWrapper.storage)).abi,abiToAdd=this.filterAbiForAdd(extensionAbi,inputArgs.extension),updatedAbi=(0,index_33cd3415_browser_esm.aj)([index_33cd3415_browser_esm.bj.parse(this.contractWrapper.abi),abiToAdd]);return this.contractWrapper.updateAbi(updatedAbi),receipt}})));addDeployed=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>{let extensionAbi=inputArgs.extensionAbi;if(!extensionAbi){extensionAbi=(await(0,index_33cd3415_browser_esm.K)(inputArgs.extensionAddress,this.contractWrapper.getProvider(),this.contractWrapper.storage,this.contractWrapper.options)).abi}(0,tiny_invariant.A)(extensionAbi,"Require extension ABI");let extensionMetadataUri="";if(inputArgs.extensionMetadata)if("string"==typeof inputArgs.extensionMetadata)extensionMetadataUri=inputArgs.extensionMetadata;else{const parsedMetadata=await index_33cd3415_browser_esm.bD.parseAsync(inputArgs.extensionMetadata);extensionMetadataUri=await this.contractWrapper.storage.upload(parsedMetadata)}const extensionFunctions=(0,deployContractDeterministic_7823c15c_browser_esm.b)(index_33cd3415_browser_esm.bj.parse(extensionAbi)),extension={metadata:{name:inputArgs.extensionName,metadataURI:extensionMetadataUri,implementation:inputArgs.extensionAddress},functions:extensionFunctions};return this.add.prepare({extension,extensionAbi})}));addPublished=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>{const version=inputArgs.version||"latest",{deployedExtensionAddress,extensionMetadata}=await this.deployExtension(inputArgs.extensionName,inputArgs.publisherAddress||index_33cd3415_browser_esm.aH,version);return this.addDeployed.prepare({extensionName:inputArgs.extensionName,extensionAddress:deployedExtensionAddress,extensionMetadata:inputArgs.extensionMetadataOverride||extensionMetadata})}));replace=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"replaceExtension",args:[inputArgs.extension],parse:async receipt=>{if(this.contractWrapper.parseLogs("ExtensionReplaced",receipt.logs).length<1)throw new Error("No ExtensionReplaced event found");const extensionAbi=inputArgs.extensionAbi?index_33cd3415_browser_esm.bj.parse(inputArgs.extensionAbi):(await(0,index_33cd3415_browser_esm.K)(inputArgs.extension.metadata.implementation,this.contractWrapper.getProvider(),this.contractWrapper.storage)).abi,contractAbi=this.filterAbiForRemove(index_33cd3415_browser_esm.bj.parse(this.contractWrapper.abi),extensionAbi),abiToAdd=this.filterAbiForAdd(extensionAbi,inputArgs.extension),updatedAbi=(0,index_33cd3415_browser_esm.aj)([contractAbi,abiToAdd]);return this.contractWrapper.updateAbi(updatedAbi),receipt}})));replaceDeployed=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>{let extensionAbi=inputArgs.extensionAbi;if(!extensionAbi){extensionAbi=(await(0,index_33cd3415_browser_esm.K)(inputArgs.extensionAddress,this.contractWrapper.getProvider(),this.contractWrapper.storage,this.contractWrapper.options)).abi}(0,tiny_invariant.A)(extensionAbi,"Require extension ABI");let extensionMetadataUri="";if(inputArgs.extensionMetadata)if("string"==typeof inputArgs.extensionMetadata)extensionMetadataUri=inputArgs.extensionMetadata;else{const parsedMetadata=await index_33cd3415_browser_esm.bD.parseAsync(inputArgs.extensionMetadata);extensionMetadataUri=await this.contractWrapper.storage.upload(parsedMetadata)}const extensionFunctions=(0,deployContractDeterministic_7823c15c_browser_esm.b)(index_33cd3415_browser_esm.bj.parse(extensionAbi)),extension={metadata:{name:inputArgs.extensionName,metadataURI:extensionMetadataUri,implementation:inputArgs.extensionAddress},functions:extensionFunctions};return this.replace.prepare({extension,extensionAbi})}));replacePublished=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>{const version=inputArgs.version||"latest",{deployedExtensionAddress,extensionMetadata}=await this.deployExtension(inputArgs.extensionName,inputArgs.publisherAddress||index_33cd3415_browser_esm.aH,version);return this.replaceDeployed.prepare({extensionName:inputArgs.extensionName,extensionAddress:deployedExtensionAddress,extensionMetadata:inputArgs.extensionMetadataOverride||extensionMetadata})}));remove=(0,transactions_72f9603c_browser_esm.f)((async inputArgs=>{const extensionAddress=await this.getExtensionAddress(inputArgs.extensionName);return transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"removeExtension",args:[inputArgs.extensionName],parse:async receipt=>{if(this.contractWrapper.parseLogs("ExtensionRemoved",receipt.logs).length<1)throw new Error("No ExtensionRemoved event found");const extensionAbi=(await(0,index_33cd3415_browser_esm.K)(extensionAddress,this.contractWrapper.getProvider(),this.contractWrapper.storage)).abi,updatedAbi=this.filterAbiForRemove(index_33cd3415_browser_esm.bj.parse(this.contractWrapper.abi),extensionAbi);return this.contractWrapper.updateAbi(updatedAbi),receipt}})}));filterAbiForAdd(extensionAbi,extension){const extensionAbiInterface=new lib_esm_interface.KA(extensionAbi),extensionFunctionSelectors=extension.functions.map((fn=>fn.functionSelector));return extensionAbi.filter((item=>{const fnFragment=Object.values(new lib_esm_interface.KA([item]).functions);if(0===fnFragment.length)return!1;const fnSigHash=extensionAbiInterface.getSighash(fnFragment[0]);return extensionFunctionSelectors.includes(fnSigHash)}))}filterAbiForRemove(fullAbi,abiToRemove){const fullAbiInterface=new lib_esm_interface.KA(fullAbi),interfaceToRemove=new lib_esm_interface.KA(abiToRemove),functionsToRemove=Object.values(interfaceToRemove.functions).map((fn=>interfaceToRemove.getSighash(fn)));return fullAbi.filter((item=>{const fnFragment=Object.values(new lib_esm_interface.KA([item]).functions);if(0===fnFragment.length)return!1;const fnSigHash=fullAbiInterface.getSighash(fnFragment[0]);return!functionsToRemove.includes(fnSigHash)}))}async deployExtension(extensionName,publisherAddress){let version=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest";const published=await(0,index_33cd3415_browser_esm.aI)(publisherAddress,extensionName,version,this.contractWrapper.storage,this.contractWrapper.options.clientId,this.contractWrapper.options.secretKey),deploymentInfo=await(0,deployContractDeterministic_7823c15c_browser_esm.g)(published.metadataUri,this.contractWrapper.storage,this.contractWrapper.getProvider(),"",this.contractWrapper.options.clientId,this.contractWrapper.options.secretKey),implementationAddress=deploymentInfo.find((i=>"implementation"===i.type))?.transaction.predictedAddress,transactionsToSend=deploymentInfo.filter((i=>i.transaction.data&&i.transaction.data.length>0)),transactionsforDirectDeploy=transactionsToSend.filter((i=>"infra"!==i.type)).map((i=>i.transaction)),transactionsForThrowawayDeployer=transactionsToSend.filter((i=>"infra"===i.type)).map((i=>i.transaction)),signer=this.contractWrapper.getSigner();(0,tiny_invariant.A)(signer,"Signer is required"),await(0,deployContractDeterministic_7823c15c_browser_esm.a)(signer,transactionsForThrowawayDeployer,{});for(const tx of transactionsforDirectDeploy)try{await(0,deployContractDeterministic_7823c15c_browser_esm.d)(signer,tx)}catch(e){console.debug(`Error deploying contract at ${tx.predictedAddress}`,e?.message)}return{deployedExtensionAddress:implementationAddress,extensionMetadata:published.metadataUri}}}class Airdrop20{featureName=index_33cd3415_browser_esm.dr.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}getAddress(){return this.contractWrapper.address}drop=(0,transactions_72f9603c_browser_esm.f)((async(tokenAddress,tokenOwner,contents)=>transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"airdropERC20",args:[tokenAddress,tokenOwner,contents],parse:receipt=>{const failedDrops=this.contractWrapper.parseLogs("AirdropFailed",receipt.logs).map((e=>({recipient:e.args.recipient,amount:e.args.amount.toString()})));return{successfulDropCount:contents.length-failedDrops.length,failedDropCount:failedDrops.length,failedDrops}}})))}class Airdrop721{featureName=index_33cd3415_browser_esm.ds.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}getAddress(){return this.contractWrapper.address}drop=(0,transactions_72f9603c_browser_esm.f)((async(tokenAddress,tokenOwner,contents)=>transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"airdropERC721",args:[tokenAddress,tokenOwner,contents],parse:receipt=>{const failedDrops=this.contractWrapper.parseLogs("AirdropFailed",receipt.logs).map((e=>({recipient:e.args.recipient,tokenId:e.args.tokenId.toNumber()})));return{successfulDropCount:contents.length-failedDrops.length,failedDropCount:failedDrops.length,failedDrops}}})))}class Airdrop1155{featureName=index_33cd3415_browser_esm.dt.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}getAddress(){return this.contractWrapper.address}drop=(0,transactions_72f9603c_browser_esm.f)((async(tokenAddress,tokenOwner,contents)=>transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"airdropERC1155",args:[tokenAddress,tokenOwner,contents],parse:receipt=>{const failedDrops=this.contractWrapper.parseLogs("AirdropFailed",receipt.logs).map((e=>({recipient:e.args.recipient,tokenId:e.args.tokenId.toNumber(),amount:e.args.amount.toString()})));return{successfulDropCount:contents.length-failedDrops.length,failedDropCount:failedDrops.length,failedDrops}}})))}var fetchCurrencyValue_32d08b05_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-32d08b05.browser.esm.js"),contract_interceptor_d7b164a7_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-interceptor-d7b164a7.browser.esm.js"),contract_owner_49e75547_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-owner-49e75547.browser.esm.js"),contract_platform_fee_e756e68f_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-platform-fee-e756e68f.browser.esm.js"),contract_roles_71988d2e_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-roles-71988d2e.browser.esm.js"),contract_sales_918c7cb8_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-sales-918c7cb8.browser.esm.js"),erc_1155_7ce9bee1_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/erc-1155-7ce9bee1.browser.esm.js"),erc_20_9a18a51c_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/erc-20-9a18a51c.browser.esm.js"),erc_721_27306550_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/erc-721-27306550.browser.esm.js"),marketplacev3_offers_ce1f096b_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/marketplacev3-offers-ce1f096b.browser.esm.js");__webpack_require__("./node_modules/bn.js/lib/bn.js"),__webpack_require__("./node_modules/bs58/index.js"),__webpack_require__("./node_modules/eventemitter3/index.mjs"),__webpack_require__("./node_modules/fast-deep-equal/index.js");class SmartContract{get abi(){return index_33cd3415_browser_esm.bj.parse(this.contractWrapper.abi||[])}get royalties(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectRoyalties(),index_33cd3415_browser_esm.d5)}get roles(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectRoles(),index_33cd3415_browser_esm.d4)}get sales(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectPrimarySales(),index_33cd3415_browser_esm.d7)}get platformFees(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectPlatformFees(),index_33cd3415_browser_esm.du)}get owner(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectOwnable(),index_33cd3415_browser_esm.d6)}get erc20(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectErc20(),index_33cd3415_browser_esm.cI)}get erc721(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectErc721(),index_33cd3415_browser_esm.c$)}get erc1155(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectErc1155(),index_33cd3415_browser_esm.dj)}get app(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectApp(),index_33cd3415_browser_esm.cK)}get directListings(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectDirectListings(),index_33cd3415_browser_esm.dA)}get englishAuctions(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectEnglishAuctions(),index_33cd3415_browser_esm.dB)}get offers(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectOffers(),index_33cd3415_browser_esm.dC)}get airdrop20(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectAirdrop20(),index_33cd3415_browser_esm.dr)}get airdrop721(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectAirdrop721(),index_33cd3415_browser_esm.ds)}get airdrop1155(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectAirdrop1155(),index_33cd3415_browser_esm.dt)}get accountFactory(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectAccountFactory(),index_33cd3415_browser_esm.dp)}get account(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectAccount(),index_33cd3415_browser_esm.dn)}get extensions(){return(0,assertEnabled_d1700f0b_browser_esm.a)(this.detectBaseRouter(),index_33cd3415_browser_esm.dq)}get chainId(){return this._chainId}constructor(network,address,abi,storage){let options=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},chainId=arguments.length>5?arguments[5]:void 0,contractWrapper=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new index_33cd3415_browser_esm.cs(network,address,abi,options,storage);this._chainId=chainId,this.storage=storage,this.contractWrapper=contractWrapper,this.events=new contract_appuri_5c40af52_browser_esm.a(this.contractWrapper),this.encoder=new fetchCurrencyValue_32d08b05_browser_esm.C(this.contractWrapper),this.interceptor=new contract_interceptor_d7b164a7_browser_esm.C(this.contractWrapper),this.estimator=new contract_appuri_5c40af52_browser_esm.G(this.contractWrapper),this.publishedMetadata=new ContractPublishedMetadata(this.contractWrapper,this.storage),this.metadata=new contract_appuri_5c40af52_browser_esm.C(this.contractWrapper,index_33cd3415_browser_esm.bg,this.storage)}onNetworkUpdated(network){this.contractWrapper.updateSignerOrProvider(network)}getAddress(){return this.contractWrapper.address}prepare(method,args,overrides){return transactions_72f9603c_browser_esm.T.fromContractWrapper({contractWrapper:this.contractWrapper,method,args,overrides})}async call(functionName,args,overrides){return this.contractWrapper.call(functionName,args,overrides)}detectRoyalties(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"Royalty")){const metadata=new contract_appuri_5c40af52_browser_esm.C(this.contractWrapper,index_33cd3415_browser_esm.bg,this.storage);return new contract_owner_49e75547_browser_esm.C(this.contractWrapper,metadata)}}detectRoles(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"Permissions"))return new contract_roles_71988d2e_browser_esm.C(this.contractWrapper,index_33cd3415_browser_esm.G)}detectPrimarySales(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"PrimarySale"))return new contract_sales_918c7cb8_browser_esm.C(this.contractWrapper)}detectPlatformFees(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"PlatformFee"))return new contract_platform_fee_e756e68f_browser_esm.C(this.contractWrapper)}detectErc20(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"ERC20"))return new erc_20_9a18a51c_browser_esm.E(this.contractWrapper,this.storage,this.chainId)}detectErc721(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"ERC721"))return new erc_721_27306550_browser_esm.E(this.contractWrapper,this.storage,this.chainId)}detectErc1155(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"ERC1155"))return new erc_1155_7ce9bee1_browser_esm.E(this.contractWrapper,this.storage,this.chainId)}detectOwnable(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"Ownable"))return new contract_owner_49e75547_browser_esm.a(this.contractWrapper)}detectApp(){const metadata=new contract_appuri_5c40af52_browser_esm.C(this.contractWrapper,index_33cd3415_browser_esm.bg,this.storage);return(0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"AppURI")||(0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"ContractMetadata")?new contract_appuri_5c40af52_browser_esm.b(this.contractWrapper,metadata,this.storage):void 0}detectDirectListings(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"DirectListings"))return new marketplacev3_offers_ce1f096b_browser_esm.M(this.contractWrapper,this.storage)}detectEnglishAuctions(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"EnglishAuctions"))return new marketplacev3_offers_ce1f096b_browser_esm.a(this.contractWrapper,this.storage)}detectOffers(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"Offers"))return new marketplacev3_offers_ce1f096b_browser_esm.b(this.contractWrapper,this.storage)}detectBaseRouter(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,index_33cd3415_browser_esm.dq.name))return new ExtensionManager(this.contractWrapper)}detectAirdrop20(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"AirdropERC20"))return new Airdrop20(this.contractWrapper)}detectAirdrop721(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"AirdropERC721"))return new Airdrop721(this.contractWrapper)}detectAirdrop1155(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,"AirdropERC1155"))return new Airdrop1155(this.contractWrapper)}detectAccountFactory(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,index_33cd3415_browser_esm.dp.name))return new AccountFactory(this.contractWrapper)}detectAccount(){if((0,contract_appuri_5c40af52_browser_esm.d)(this.contractWrapper,index_33cd3415_browser_esm.dn.name))return new Account(this.contractWrapper)}}}}]);