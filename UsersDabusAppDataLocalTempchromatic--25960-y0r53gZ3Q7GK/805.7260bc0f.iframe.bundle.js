"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[805],{"./node_modules/@thirdweb-dev/sdk/dist/erc-721-27306550.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Erc721,a:()=>Erc721WithQuantitySignatureMintable});var ethers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@ethersproject/units/lib.esm/index.js"),ethers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),ethers__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@ethersproject/strings/lib.esm/utf8.js"),ethers__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@ethersproject/constants/lib.esm/addresses.js"),ethers__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@ethersproject/solidity/lib.esm/index.js"),ethers__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@ethersproject/abi/lib.esm/abi-coder.js"),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js"),_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/assertEnabled-d1700f0b.browser.esm.js"),_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-appuri-5c40af52.browser.esm.js"),_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/QueryParams-32a56510.browser.esm.js"),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/transactions-72f9603c.browser.esm.js"),_drop_claim_conditions_e6f2abbf_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/drop-claim-conditions-e6f2abbf.browser.esm.js"),_contract_owner_49e75547_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-owner-49e75547.browser.esm.js"),_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-32d08b05.browser.esm.js"),_thirdweb_dev_storage__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@thirdweb-dev/storage/dist/thirdweb-dev-storage.esm.js"),_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/setErc20Allowance-7f76f677.browser.esm.js"),tiny_invariant__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/tiny-invariant/dist/esm/tiny-invariant.js"),_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/normalizePriceValue-9851c0eb.browser.esm.js"),zod__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/zod/lib/index.mjs"),_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/signature-d3ea643d.browser.esm.js");class Erc721Burnable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cL.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}token=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async tokenId=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burn",args:[tokenId]})))}class Erc721ClaimableWithConditions{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cM.name;constructor(erc721,contractWrapper,storage){this.erc721=erc721,this.contractWrapper=contractWrapper,this.storage=storage;const metadata=new _contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.C(this.contractWrapper,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.bg,this.storage);this.conditions=new _drop_claim_conditions_e6f2abbf_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.D(this.contractWrapper,metadata,this.storage)}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(destinationAddress,quantity,options)=>{const tx=await this.conditions.getClaimTransaction(destinationAddress,quantity,options);return tx.setParse((receipt=>{const startingIndex=this.contractWrapper.parseLogs("TokensClaimed",receipt?.logs)[0].args.startTokenId,endingIndex=startingIndex.add(quantity),results=[];for(let id=startingIndex;id.lt(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.get(id)});return results})),tx}))}class Erc721ClaimableZora{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cN.name;constructor(erc721,contractWrapper){this.erc721=erc721,this.contractWrapper=contractWrapper}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(destinationAddress,quantity,options)=>{if(destinationAddress!==await(this.contractWrapper.getSigner()?.getAddress()))throw new Error("Zora Drop: Destination address must match connected wallet address");if(options?.pricePerToken)throw new Error("Zora Drop: Custom pricePerToken is not supported. Price is automatically calculated");const price=(await this.getSaleDetails()).publicSalePrice,zoraFee=function toWei(amount){return ethers__WEBPACK_IMPORTED_MODULE_4__.parseEther(_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cw.parse(amount))}("0.000777"),totalPrice=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(price).add(zoraFee).mul(quantity),tx=_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"purchase",args:[quantity],overrides:{value:totalPrice}});return tx.setParse((receipt=>{const startingIndex=this.contractWrapper.parseLogs("Sale",receipt?.logs)[0].args.firstPurchasedTokenId,endingIndex=startingIndex.add(quantity),results=[];for(let id=startingIndex;id.lt(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.get(id)});return results})),tx}));async getSaleDetails(){return this.contractWrapper.read("saleDetails",[])}}class Erc721Claimable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cO.name;constructor(erc721,contractWrapper){this.erc721=erc721,this.contractWrapper=contractWrapper}async getClaimTransaction(destinationAddress,quantity,options){let overrides={};return options&&options.pricePerToken&&(overrides=await(0,_contract_owner_49e75547_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.c)(this.contractWrapper,options.pricePerToken,quantity,options.currencyAddress,options.checkERC20Allowance)),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:[destinationAddress,quantity],overrides})}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(destinationAddress,quantity,options)=>{const tx=await this.getClaimTransaction(destinationAddress,quantity,options);return tx.setParse((receipt=>{const startingIndex=this.contractWrapper.parseLogs("TokensClaimed",receipt?.logs)[0].args.startTokenId,endingIndex=startingIndex.add(quantity),results=[];for(let id=startingIndex;id.lt(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.get(id)});return results})),tx}))}class Erc721LazyMintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cP.name;constructor(erc721,contractWrapper,storage){this.erc721=erc721,this.contractWrapper=contractWrapper,this.storage=storage,this.revealer=this.detectErc721Revealable()}lazyMint=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(metadatas,options)=>{const startFileNumber=await this.erc721.nextTokenIdToMint(),batch=await(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.u)(metadatas,this.storage,startFileNumber.toNumber(),options),baseUri=(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.g)(batch);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"lazyMint",args:[batch.length,baseUri.endsWith("/")?baseUri:`${baseUri}/`,ethers__WEBPACK_IMPORTED_MODULE_8__.YW("")],parse:receipt=>{const event=this.contractWrapper.parseLogs("TokensLazyMinted",receipt?.logs),startingIndex=event[0].args.startTokenId,endingIndex=event[0].args.endTokenId,results=[];for(let id=startingIndex;id.lte(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.getTokenMetadata(id)});return results}})}));updateMetadata=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(tokenId,metadata,options)=>{const batchCount=await this.contractWrapper.read("getBaseURICount",[]);if(batchCount.eq(0))throw new Error("No base URI set. Please set a base URI before updating metadata");const targetTokenId=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(tokenId);let startTokenId=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(0),endTokenId=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(0),batchIndex=0;for(let i=0;i<batchCount.toNumber()&&(batchIndex=i,endTokenId=await this.contractWrapper.read("getBatchIdAtIndex",[batchIndex]),!endTokenId.gt(targetTokenId));i++)startTokenId=endTokenId;const range=Array.from({length:endTokenId.sub(startTokenId).toNumber()},((v,k)=>k+startTokenId.toNumber())),metadatas=await Promise.all(range.map((id=>this.erc721.getTokenMetadata(id)))),newMetadatas=[];for(let i=0;i<metadatas.length;i++){const{id,uri,...rest}=metadatas[i];ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(targetTokenId).eq(ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(id))?newMetadatas.push(metadata):newMetadatas.push(rest)}const batch=await(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.u)(newMetadatas,this.storage,startTokenId.toNumber(),options),baseUri=batch[0].substring(0,batch[0].lastIndexOf("/"));return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"updateBatchBaseURI",args:[batchIndex,`${baseUri.endsWith("/")?baseUri:`${baseUri}/`}`]})}));detectErc721Revealable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721Revealable"))return new _contract_owner_49e75547_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.D(this.contractWrapper,this.storage,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cQ.name,(()=>this.erc721.nextTokenIdToMint()))}}class Erc721LoyaltyCard{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cR.name;constructor(contractWrapper){this.contractWrapper=contractWrapper}cancel=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async tokenId=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"cancel",args:[tokenId]})));revoke=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async tokenId=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"revoke",args:[tokenId]})))}class Erc721UpdatableMetadata{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cS.name;constructor(contractWrapper,storage){this.contractWrapper=contractWrapper,this.storage=storage}update=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(tokenId,metadata)=>{const uri=await(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.b)(metadata,this.storage);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setTokenURI",args:[tokenId,uri]})}))}class Erc721BatchMintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cT.name;constructor(erc721,contractWrapper,storage){this.erc721=erc721,this.contractWrapper=contractWrapper,this.storage=storage}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(to,metadatas)=>{const[uris,resolvedAddress]=await Promise.all([(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.u)(metadatas,this.storage),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(to)]),contractEncoder=new _fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__.C(this.contractWrapper),encoded=uris.map((uri=>contractEncoder.encode("mintTo",[resolvedAddress,uri])));return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[encoded],parse:receipt=>{const events=this.contractWrapper.parseLogs("TokensMinted",receipt.logs);if(0===events.length||events.length<metadatas.length)throw new Error("TokenMinted event not found, minting failed");return events.map((e=>{const id=e.args.tokenIdMinted;return{id,receipt,data:()=>this.erc721.get(id)}}))}})}))}class Erc721Mintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cU.name;constructor(erc721,contractWrapper,storage){this.erc721=erc721,this.contractWrapper=contractWrapper,this.storage=storage,this.batch=this.detectErc721BatchMintable()}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(to,metadata)=>{const[uri,toAddress]=await Promise.all([(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.b)(metadata,this.storage),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(to)]);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintTo",args:[toAddress,uri],parse:receipt=>{const event=this.contractWrapper.parseLogs("Transfer",receipt?.logs);if(0===event.length)throw new Error("TransferEvent event not found");const id=event[0].args.tokenId;return{id,receipt,data:()=>this.erc721.get(id)}}})}));async getMintTransaction(to,metadata){return this.to.prepare(await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(to),metadata)}detectErc721BatchMintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721BatchMintable"))return new Erc721BatchMintable(this.erc721,this.contractWrapper,this.storage)}}class Erc721SharedMetadata{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cV.name;constructor(contractWrapper,storage){this.contractWrapper=contractWrapper,this.storage=storage}async get(){const metadata=await this.contractWrapper.read("sharedMetadata",[]);if(!metadata.every((value=>""===value)))return{name:metadata.name,description:metadata.description,image:metadata.imageURI,animation_url:metadata.animationURI}}set=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async metadata=>{const parsedMetadata=_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.B.parse(metadata);parsedMetadata.description=this.sanitizeJSONString(parsedMetadata.description);const batch=[];(0,_thirdweb_dev_storage__WEBPACK_IMPORTED_MODULE_11__.uO)(parsedMetadata.image)?batch.push(this.storage.upload(parsedMetadata.image)):"string"==typeof parsedMetadata.image?batch.push(Promise.resolve(parsedMetadata.image)):batch.push(Promise.resolve(void 0)),(0,_thirdweb_dev_storage__WEBPACK_IMPORTED_MODULE_11__.uO)(parsedMetadata.animation_url)?batch.push(this.storage.upload(parsedMetadata.animation_url)):"string"==typeof parsedMetadata.animation_url?batch.push(Promise.resolve(parsedMetadata.animation_url)):batch.push(Promise.resolve(void 0));const[imageUri,animationUri]=await Promise.all(batch);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setSharedMetadata",args:[{name:`${parsedMetadata.name||""}`,description:parsedMetadata.description||"",imageURI:imageUri||"",animationURI:animationUri||""}]})}));sanitizeJSONString(val){if(!val)return val;const sanitized=JSON.stringify(val);return sanitized.slice(1,sanitized.length-1)}}class Erc721Enumerable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cW.name;constructor(erc721,contractWrapper){this.erc721=erc721,this.contractWrapper=contractWrapper}async all(walletAddress,queryParams){let tokenIds=await this.tokenIds(walletAddress);if(queryParams){const start=queryParams?.start||0,count=queryParams?.count||_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.D;tokenIds=tokenIds.slice(start,start+count)}return await Promise.all(tokenIds.map((tokenId=>this.erc721.get(tokenId.toString()))))}async tokenIds(walletAddress){const address=await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(walletAddress||await this.contractWrapper.getSignerAddress()),balance=await this.contractWrapper.read("balanceOf",[address]),indices=Array.from(Array(balance.toNumber()).keys());return await Promise.all(indices.map((i=>this.contractWrapper.read("tokenOfOwnerByIndex",[address,i]))))}}class Erc721AQueryable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cX.name;constructor(erc721,contractWrapper){this.erc721=erc721,this.contractWrapper=contractWrapper}async all(walletAddress,queryParams){let tokenIds=await this.tokenIds(walletAddress);if(queryParams){const start=queryParams?.start||0,count=queryParams?.count||_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.D;tokenIds=tokenIds.slice(start,start+count)}return await Promise.all(tokenIds.map((tokenId=>this.erc721.get(tokenId.toString()))))}async tokenIds(walletAddress){const address=await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(walletAddress||await this.contractWrapper.getSignerAddress());return await this.contractWrapper.read("tokensOfOwner",[address])}}class Erc721Supply{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cY.name;constructor(erc721,contractWrapper){this.erc721=erc721,this.contractWrapper=contractWrapper,this.owned=this.detectErc721Owned()}async all(queryParams){let startTokenId=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(0);(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("startTokenId",this.contractWrapper)&&(startTokenId=await this.contractWrapper.read("startTokenId",[]));const start=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(queryParams?.start||0).add(startTokenId).toNumber(),count=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(queryParams?.count||_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.D).toNumber(),maxSupply=await this.erc721.nextTokenIdToMint(),maxId=Math.min(maxSupply.add(startTokenId).toNumber(),start+count);return await Promise.all([...Array(maxId-start).keys()].map((i=>this.erc721.get((start+i).toString()))))}async allOwners(queryParams){let totalCount,startTokenId=ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(0);(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("startTokenId",this.contractWrapper)&&(startTokenId=await this.contractWrapper.read("startTokenId",[]));try{totalCount=await this.erc721.totalClaimedSupply()}catch(e){totalCount=await this.totalCount()}totalCount=totalCount.add(startTokenId);let arr=[...new Array(totalCount.toNumber()).keys()];if(queryParams){const start=queryParams?.start||0,count=queryParams?.count||_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.D;arr=arr.slice(start,start+count)}const owners=await Promise.all(arr.map((i=>this.erc721.ownerOf(i).catch((()=>ethers__WEBPACK_IMPORTED_MODULE_12__.L)))));return arr.map((i=>({tokenId:i,owner:owners[i]}))).filter((o=>o.owner!==ethers__WEBPACK_IMPORTED_MODULE_12__.L))}async totalCount(){return await this.erc721.nextTokenIdToMint()}async totalCirculatingSupply(){return await this.contractWrapper.read("totalSupply",[])}detectErc721Owned(){return(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721Enumerable")?new Erc721Enumerable(this.erc721,this.contractWrapper):(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721AQueryable")?new Erc721AQueryable(this.erc721,this.contractWrapper):void 0}}const TieredDropPayloadSchema=(()=>_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_13__.B.extend({tierPriority:zod__WEBPACK_IMPORTED_MODULE_14__.z.array(zod__WEBPACK_IMPORTED_MODULE_14__.z.string()),royaltyRecipient:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.b9.default(ethers__WEBPACK_IMPORTED_MODULE_12__.L),royaltyBps:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cC.default(0),quantity:_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.b5.default(1)}))(),GenericRequest=[{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"},{name:"data",type:"bytes"}];class Erc721TieredDrop{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cZ.name;constructor(erc721,contractWrapper,storage){this.erc721=erc721,this.contractWrapper=contractWrapper,this.storage=storage}async getMetadataInTier(tier){const batches=(await this.contractWrapper.read("getMetadataForAllTiers",[])).find((t=>t.tier===tier));if(!batches)throw new Error("Tier not found in contract.");return await Promise.all(batches.ranges.map(((range,i)=>{const nftsInRange=[],baseUri=batches.baseURIs[i];for(let j=range.startIdInclusive.toNumber();j<range.endIdNonInclusive.toNumber();j++){const uri=baseUri.endsWith("/")?`${baseUri}${j}`:`${baseUri}/${j}`,metadata=this.storage.downloadJSON(uri);nftsInRange.push(metadata)}return nftsInRange})).flat())}async getTokensInTier(tier){const endIndex=await this.contractWrapper.read("getTokensInTierLen",[]);if(endIndex.eq(0))return[];const ranges=await this.contractWrapper.read("getTokensInTier",[tier,0,endIndex]);return await Promise.all(ranges.map((range=>{const nftsInRange=[];for(let i=range.startIdInclusive.toNumber();i<range.endIdNonInclusive.toNumber();i++)nftsInRange.push(this.erc721.get(i));return nftsInRange})).flat())}createBatchWithTier=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(metadatas,tier,options)=>{const startFileNumber=await this.erc721.nextTokenIdToMint(),batch=await(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.u)(metadatas,this.storage,startFileNumber.toNumber(),options),baseUri=(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.g)(batch);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"lazyMint",args:[batch.length,baseUri.endsWith("/")?baseUri:`${baseUri}/`,tier,ethers__WEBPACK_IMPORTED_MODULE_8__.YW("")],parse:receipt=>{const event=this.contractWrapper.parseLogs("TokensLazyMinted",receipt?.logs),startingIndex=event[0].args[1],endingIndex=event[0].args[2],results=[];for(let id=startingIndex;id.lte(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.getTokenMetadata(id)});return results}})}));createDelayedRevealBatchWithTier=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(placeholder,metadatas,password,tier,options)=>{if(!password)throw new Error("Password is required");const placeholderUris=await this.storage.uploadBatch([_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.C.parse(placeholder)],{rewriteFileNames:{fileStartNumber:0}}),placeholderUri=(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.g)(placeholderUris),startFileNumber=await this.erc721.nextTokenIdToMint(),uris=await this.storage.uploadBatch(metadatas.map((m=>_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.C.parse(m))),{onProgress:options?.onProgress,rewriteFileNames:{fileStartNumber:startFileNumber.toNumber()}}),baseUri=(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.g)(uris),baseUriId=await this.contractWrapper.read("getBaseURICount",[]),chainId=await this.contractWrapper.getChainID(),hashedPassword=ethers__WEBPACK_IMPORTED_MODULE_15__.keccak256(["string","uint256","uint256","address"],[password,chainId,baseUriId,this.contractWrapper.address]),encryptedBaseUri=await this.contractWrapper.read("encryptDecrypt",[ethers__WEBPACK_IMPORTED_MODULE_8__.YW(baseUri),hashedPassword]),provenanceHash=ethers__WEBPACK_IMPORTED_MODULE_15__.keccak256(["bytes","bytes","uint256"],[ethers__WEBPACK_IMPORTED_MODULE_8__.YW(baseUri),hashedPassword,chainId]),data=ethers__WEBPACK_IMPORTED_MODULE_16__.D.encode(["bytes","bytes32"],[encryptedBaseUri,provenanceHash]);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"lazyMint",args:[uris.length,placeholderUri.endsWith("/")?placeholderUri:`${placeholderUri}/`,tier,data],parse:receipt=>{const event=this.contractWrapper.parseLogs("TokensLazyMinted",receipt?.logs),startingIndex=event[0].args[1],endingIndex=event[0].args[2],results=[];for(let id=startingIndex;id.lte(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.getTokenMetadata(id)});return results}})}));reveal=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(batchId,password)=>{if(!password)throw new Error("Password is required");const chainId=await this.contractWrapper.getChainID(),key=ethers__WEBPACK_IMPORTED_MODULE_15__.keccak256(["string","uint256","uint256","address"],[password,chainId,batchId,this.contractWrapper.address]);try{const decryptedUri=await this.contractWrapper.callStatic().reveal(batchId,key);if(!decryptedUri.includes("://")||!decryptedUri.endsWith("/"))throw new Error("invalid password")}catch(e){throw new Error("invalid password")}return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"reveal",args:[batchId,key]})}));async generate(payloadToSign){const[payload]=await this.generateBatch([payloadToSign]);return payload}async generateBatch(payloadsToSign){const parsedPayloads=await Promise.all(payloadsToSign.map((payload=>TieredDropPayloadSchema.parseAsync(payload)))),chainId=await this.contractWrapper.getChainID(),signer=this.contractWrapper.getSigner();return(0,tiny_invariant__WEBPACK_IMPORTED_MODULE_17__.A)(signer,"No signer available"),await Promise.all(parsedPayloads.map((async payload=>({payload,signature:(await this.contractWrapper.signTypedData(signer,{name:"SignatureAction",version:"1",chainId,verifyingContract:this.contractWrapper.address},{GenericRequest},await this.mapPayloadToContractStruct(payload))).toString()}))))}async verify(signedPayload){const message=await this.mapPayloadToContractStruct(signedPayload.payload);return(await this.contractWrapper.read("verify",[message,signedPayload.signature]))[0]}async claimWithSignature(signedPayload){const message=await this.mapPayloadToContractStruct(signedPayload.payload),normalizedTotalPrice=await(0,_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_18__.n)(this.contractWrapper.getProvider(),signedPayload.payload.price,signedPayload.payload.currencyAddress),overrides=await this.contractWrapper.getCallOverrides();await(0,_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.s)(this.contractWrapper,normalizedTotalPrice,signedPayload.payload.currencyAddress,overrides);const receipt=await this.contractWrapper.sendTransaction("claimWithSignature",[message,signedPayload.signature],overrides),event=this.contractWrapper.parseLogs("TokensClaimed",receipt?.logs),startingIndex=event[0].args.startTokenId,endingIndex=startingIndex.add(event[0].args.quantityClaimed),results=[];for(let id=startingIndex;id.lt(endingIndex);id=id.add(1))results.push({id,receipt,data:()=>this.erc721.get(id)});return results}async mapPayloadToContractStruct(payload){const normalizedTotalPrice=await(0,_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_18__.n)(this.contractWrapper.getProvider(),payload.price,payload.currencyAddress),data=ethers__WEBPACK_IMPORTED_MODULE_16__.D.encode(["string[]","address","address","uint256","address","uint256","uint256","address"],[payload.tierPriority,payload.to,payload.royaltyRecipient,payload.royaltyBps,payload.primarySaleRecipient,payload.quantity,normalizedTotalPrice,payload.currencyAddress]);return{uid:payload.uid,validityStartTimestamp:payload.mintStartTime,validityEndTimestamp:payload.mintEndTime,data}}}class Erc721WithQuantitySignatureMintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.c_.name;constructor(contractWrapper,storage){this.contractWrapper=contractWrapper,this.storage=storage}mint=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async signedPayload=>{const mintRequest=signedPayload.payload,signature=signedPayload.signature,overrides=await this.contractWrapper.getCallOverrides(),parse=receipt=>{const t=this.contractWrapper.parseLogs("TokensMintedWithSignature",receipt.logs);if(0===t.length)throw new Error("No MintWithSignature event found");return{id:t[0].args.tokenIdMinted,receipt}};if(await this.isLegacyNFTContract()){const message=await this.mapLegacyPayloadToContractStruct(mintRequest),price=message.price;return await(0,_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.s)(this.contractWrapper,price,mintRequest.currencyAddress,overrides),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[message,signature],overrides,parse})}{const message=await this.mapPayloadToContractStruct(mintRequest),price=message.pricePerToken.mul(message.quantity);return await(0,_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.s)(this.contractWrapper,price,mintRequest.currencyAddress,overrides),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[message,signature],overrides,parse})}}));mintBatch=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async signedPayloads=>{const isLegacyNFTContract=await this.isLegacyNFTContract(),contractPayloads=(await Promise.all(signedPayloads.map((s=>isLegacyNFTContract?this.mapLegacyPayloadToContractStruct(s.payload):this.mapPayloadToContractStruct(s.payload))))).map(((message,index)=>{const s=signedPayloads[index],signature=s.signature,price=s.payload.price;if(ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(price).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message,signature}})),contractEncoder=new _fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__.C(this.contractWrapper),encoded=contractPayloads.map((p=>contractEncoder.encode("mintWithSignature",[p.message,p.signature])));if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("multicall",this.contractWrapper))return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[encoded],parse:receipt=>{const events=this.contractWrapper.parseLogs("TokensMintedWithSignature",receipt.logs);if(0===events.length)throw new Error("No MintWithSignature event found");return events.map((log=>({id:log.args.tokenIdMinted,receipt})))}});throw new Error("Multicall not available on this contract!")}));async verify(signedPayload){const isLegacyNFTContract=await this.isLegacyNFTContract(),mintRequest=signedPayload.payload,signature=signedPayload.signature;let message,verification;return isLegacyNFTContract?(message=await this.mapLegacyPayloadToContractStruct(mintRequest),verification=await this.contractWrapper.read("verify",[message,signature])):(message=await this.mapPayloadToContractStruct(mintRequest),verification=await this.contractWrapper.read("verify",[message,signature])),verification[0]}async generate(mintRequest){return(await this.generateBatch([mintRequest]))[0]}async generateBatch(payloadsToSign){const isLegacyNFTContract=await this.isLegacyNFTContract(),parsedRequests=await Promise.all(payloadsToSign.map((m=>_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_13__.t.parseAsync(m)))),metadatas=parsedRequests.map((r=>r.metadata)),uris=await(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.u)(metadatas,this.storage),chainId=await this.contractWrapper.getChainID(),signer=this.contractWrapper.getSigner();return(0,tiny_invariant__WEBPACK_IMPORTED_MODULE_17__.A)(signer,"No signer available"),await Promise.all(parsedRequests.map((async(m,i)=>{const uri=uris[i],finalPayload=await _signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_13__.u.parseAsync({...m,uri});let signature;return signature=isLegacyNFTContract?await this.contractWrapper.signTypedData(signer,{name:"TokenERC721",version:"1",chainId,verifyingContract:this.contractWrapper.address},{MintRequest:_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_13__.v},await this.mapLegacyPayloadToContractStruct(finalPayload)):await this.contractWrapper.signTypedData(signer,{name:"SignatureMintERC721",version:"1",chainId,verifyingContract:await this.contractWrapper.address},{MintRequest:_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_13__.x},await this.mapPayloadToContractStruct(finalPayload)),{payload:finalPayload,signature:signature.toString()}})))}async mapPayloadToContractStruct(mintRequest){const normalizedPricePerToken=await(0,_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_18__.n)(this.contractWrapper.getProvider(),mintRequest.price,mintRequest.currencyAddress);return{to:mintRequest.to,royaltyRecipient:mintRequest.royaltyRecipient,royaltyBps:mintRequest.royaltyBps,primarySaleRecipient:mintRequest.primarySaleRecipient,uri:mintRequest.uri,quantity:mintRequest.quantity,pricePerToken:normalizedPricePerToken,currency:mintRequest.currencyAddress,validityStartTimestamp:mintRequest.mintStartTime,validityEndTimestamp:mintRequest.mintEndTime,uid:mintRequest.uid}}async mapLegacyPayloadToContractStruct(mintRequest){const normalizedPricePerToken=await(0,_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_18__.n)(this.contractWrapper.getProvider(),mintRequest.price,mintRequest.currencyAddress);return{to:mintRequest.to,price:normalizedPricePerToken,uri:mintRequest.uri,currency:mintRequest.currencyAddress,validityEndTimestamp:mintRequest.mintEndTime,validityStartTimestamp:mintRequest.mintStartTime,uid:mintRequest.uid,royaltyRecipient:mintRequest.royaltyRecipient,royaltyBps:mintRequest.royaltyBps,primarySaleRecipient:mintRequest.primarySaleRecipient}}async isLegacyNFTContract(){return(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721SignatureMintV1")}}class Erc721{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.c$.name;get chainId(){return this._chainId}constructor(contractWrapper,storage,chainId){this.contractWrapper=contractWrapper,this.storage=storage,this.query=this.detectErc721Enumerable(),this.mintable=this.detectErc721Mintable(),this.burnable=this.detectErc721Burnable(),this.lazyMintable=this.detectErc721LazyMintable(),this.tieredDropable=this.detectErc721TieredDrop(),this.signatureMintable=this.detectErc721SignatureMintable(),this.claimWithConditions=this.detectErc721ClaimableWithConditions(),this.claimCustom=this.detectErc721Claimable(),this.claimZora=this.detectErc721ClaimableZora(),this.erc721SharedMetadata=this.detectErc721SharedMetadata(),this.loyaltyCard=this.detectErc721LoyaltyCard(),this.updatableMetadata=this.detectErc721UpdatableMetadata(),this._chainId=chainId}onNetworkUpdated(network){this.contractWrapper.updateSignerOrProvider(network)}getAddress(){return this.contractWrapper.address}async get(tokenId){const[owner,metadata]=await Promise.all([this.ownerOf(tokenId).catch((()=>ethers__WEBPACK_IMPORTED_MODULE_12__.L)),this.getTokenMetadata(tokenId).catch((()=>({id:tokenId.toString(),uri:"",..._QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.F})))]);return{owner,metadata,type:"ERC721",supply:"1"}}async ownerOf(tokenId){return await this.contractWrapper.read("ownerOf",[tokenId])}async balanceOf(address){return await this.contractWrapper.read("balanceOf",[await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(address)])}async balance(){return await this.balanceOf(await this.contractWrapper.getSignerAddress())}async isApproved(address,operator){const[_address,_operator]=await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(address),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(operator)]);return await this.contractWrapper.read("isApprovedForAll",[_address,_operator])}transfer=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(to,tokenId)=>{const[from,_to]=await Promise.all([this.contractWrapper.getSignerAddress(),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(to)]);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transferFrom(address,address,uint256)",args:[from,_to,tokenId]})}));transferFrom=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(from,to,tokenId)=>{const[fromAddress,toAddress]=await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(from),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(to)]);return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transferFrom(address,address,uint256)",args:[fromAddress,toAddress,tokenId]})}));setApprovalForAll=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(operator,approved)=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setApprovalForAll",args:[await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(operator),approved]})));setApprovalForToken=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(operator,tokenId)=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"approve",args:[await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(operator),tokenId]})));async getAll(queryParams){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.query,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cY).all(queryParams)}async getAllOwners(queryParams){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.query,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cY).allOwners(queryParams)}async totalCount(){return this.nextTokenIdToMint()}async totalCirculatingSupply(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.query,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cY).totalCirculatingSupply()}async getOwned(walletAddress,queryParams){if(walletAddress&&(walletAddress=await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(walletAddress)),this.query?.owned)return this.query.owned.all(walletAddress,queryParams);{const[address,allOwners]=await Promise.all([walletAddress||this.contractWrapper.getSignerAddress(),this.getAllOwners(queryParams)]),ownedTokens=(allOwners||[]).filter((i=>address?.toLowerCase()===i.owner?.toLowerCase()));return await Promise.all(ownedTokens.map((async i=>this.get(i.tokenId))))}}async getOwnedTokenIds(walletAddress){if(walletAddress&&(walletAddress=await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)(walletAddress)),this.query?.owned)return this.query.owned.tokenIds(walletAddress);{const[address,allOwners]=await Promise.all([walletAddress||this.contractWrapper.getSignerAddress(),this.getAllOwners()]);return(allOwners||[]).filter((i=>address?.toLowerCase()===i.owner?.toLowerCase())).map((i=>ethers__WEBPACK_IMPORTED_MODULE_5__.gH.from(i.tokenId)))}}mint=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async metadata=>this.mintTo.prepare(await this.contractWrapper.getSignerAddress(),metadata)));mintTo=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(receiver,metadata)=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.mintable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cU).to.prepare(receiver,metadata)));async getMintTransaction(receiver,metadata){return this.mintTo.prepare(receiver,metadata)}mintBatch=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async metadatas=>this.mintBatchTo.prepare(await this.contractWrapper.getSignerAddress(),metadatas)));mintBatchTo=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(receiver,metadatas)=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.mintable?.batch,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cT).to.prepare(receiver,metadatas)));burn=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async tokenId=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.burnable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cL).token.prepare(tokenId)));cancel=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async tokenId=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.loyaltyCard,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cR).cancel.prepare(tokenId)));revoke=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async tokenId=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.loyaltyCard,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cR).revoke.prepare(tokenId)));lazyMint=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(metadatas,options)=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.lazyMintable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cP).lazyMint.prepare(metadatas,options)));updateMetadata=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(tokenId,metadata)=>this.lazyMintable?this.lazyMintable.updateMetadata.prepare(tokenId,metadata):(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.updatableMetadata,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cS).update.prepare(tokenId,metadata)));async update(tokenId,metadata){return this.updateMetadata(tokenId,metadata)}claim=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(quantity,options)=>this.claimTo.prepare(await this.contractWrapper.getSignerAddress(),quantity,options)));claimTo=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.f)((async(destinationAddress,quantity,options)=>{const claimWithConditions=this.claimWithConditions,claim=this.claimCustom,claimZora=this.claimZora;if(claimWithConditions)return claimWithConditions.to.prepare(destinationAddress,quantity,options);if(claim)return claim.to.prepare(destinationAddress,quantity,options);if(claimZora)return claimZora.to.prepare(destinationAddress,quantity,options);throw new _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.x(_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cO)}));async getClaimTransaction(destinationAddress,quantity,options){const claimWithConditions=this.claimWithConditions,claim=this.claimCustom;if(claimWithConditions)return claimWithConditions.conditions.getClaimTransaction(destinationAddress,quantity,options);if(claim)return claim.getClaimTransaction(destinationAddress,quantity,options);throw new _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.x(_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cO)}async totalClaimedSupply(){const contract=this.contractWrapper;if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("totalMinted",contract))return this.contractWrapper.read("totalMinted",[]);if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("nextTokenIdToClaim",contract))return this.contractWrapper.read("nextTokenIdToClaim",[]);throw new Error("No function found on contract to get total claimed supply")}async totalUnclaimedSupply(){const[nextTokenIdToMint,totalClaimedSupply]=await Promise.all([this.nextTokenIdToMint(),this.totalClaimedSupply()]);return nextTokenIdToMint.sub(totalClaimedSupply)}get claimConditions(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.claimWithConditions,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cM).conditions}get tieredDrop(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.tieredDropable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cZ)}get signature(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.signatureMintable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.c_)}get revealer(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.lazyMintable?.revealer,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cQ)}get sharedMetadata(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_19__.a)(this.erc721SharedMetadata,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.cV)}async getTokenMetadata(tokenId){const tokenUri=await this.contractWrapper.read("tokenURI",[tokenId]);if(!tokenUri)throw new _index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__.n;return(0,_QueryParams_32a56510_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.f)(tokenId,tokenUri,this.storage)}async nextTokenIdToMint(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("nextTokenIdToMint",this.contractWrapper)){let nextTokenIdToMint=await this.contractWrapper.read("nextTokenIdToMint",[]);return(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("startTokenId",this.contractWrapper)&&(nextTokenIdToMint=nextTokenIdToMint.sub(await this.contractWrapper.read("startTokenId",[]))),nextTokenIdToMint}if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("totalSupply",this.contractWrapper))return await this.contractWrapper.read("totalSupply",[]);throw new Error("Contract requires either `nextTokenIdToMint` or `totalSupply` function available to determine the next token ID to mint")}detectErc721Enumerable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721Supply")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.h)("nextTokenIdToMint",this.contractWrapper))return new Erc721Supply(this,this.contractWrapper)}detectErc721Mintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721Mintable"))return new Erc721Mintable(this,this.contractWrapper,this.storage)}detectErc721Burnable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721Burnable"))return new Erc721Burnable(this.contractWrapper)}detectErc721LazyMintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721LazyMintable"))return new Erc721LazyMintable(this,this.contractWrapper,this.storage)}detectErc721TieredDrop(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721TieredDrop"))return new Erc721TieredDrop(this,this.contractWrapper,this.storage)}detectErc721SignatureMintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721SignatureMintV1")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721SignatureMintV2"))return new Erc721WithQuantitySignatureMintable(this.contractWrapper,this.storage)}detectErc721ClaimableWithConditions(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721ClaimConditionsV1")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721ClaimConditionsV2")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721ClaimPhasesV1")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721ClaimPhasesV2"))return new Erc721ClaimableWithConditions(this,this.contractWrapper,this.storage)}detectErc721Claimable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721ClaimCustom"))return new Erc721Claimable(this,this.contractWrapper)}detectErc721ClaimableZora(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721ClaimZora"))return new Erc721ClaimableZora(this,this.contractWrapper)}detectErc721SharedMetadata(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721SharedMetadata"))return new Erc721SharedMetadata(this.contractWrapper,this.storage)}detectErc721LoyaltyCard(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721LoyaltyCard"))return new Erc721LoyaltyCard(this.contractWrapper)}detectErc721UpdatableMetadata(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.d)(this.contractWrapper,"ERC721UpdatableMetadata"))return new Erc721UpdatableMetadata(this.contractWrapper,this.storage)}}}}]);