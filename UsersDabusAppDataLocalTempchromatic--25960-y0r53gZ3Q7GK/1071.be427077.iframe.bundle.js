"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[1071],{"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>WagmiConnector});var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js"),eventemitter3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/eventemitter3/index.mjs");class WagmiConnector extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__.A{constructor(_ref){let{chains=_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__.k9b,options}=_ref;super(),this.chains=chains,this.options=options}getBlockExplorerUrls(chain){const explorers=chain.explorers?.map((x=>x.url))??[];return explorers.length>0?explorers:void 0}isChainUnsupported(chainId){return!this.chains.some((x=>x.chainId===chainId))}updateChains(chains){this.chains=chains}}},"./node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AddChainError,C:()=>ChainNotConfiguredError,R:()=>ResourceUnavailableError,S:()=>SwitchChainError,U:()=>UserRejectedRequestError,a:()=>ConnectorNotFoundError});var _defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js");class RpcError extends Error{constructor(message,options){const{cause,code,data}=options;if(!Number.isInteger(code))throw new Error('"code" must be an integer.');if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string.');super(`${message}. Cause: ${JSON.stringify(cause)}`),this.cause=cause,this.code=code,this.data=data}}class ProviderRpcError extends RpcError{constructor(message,options){const{cause,code,data}=options;if(!(Number.isInteger(code)&&code>=1e3&&code<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(message,{cause,code,data})}}class AddChainError extends Error{constructor(){super(...arguments),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","AddChainError"),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"message","Error adding chain")}}class ChainNotConfiguredError extends Error{constructor(_ref){let{chainId,connectorId}=_ref;super(`Chain "${chainId}" not configured for connector "${connectorId}".`),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ChainNotConfigured")}}class ConnectorNotFoundError extends Error{constructor(){super(...arguments),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ConnectorNotFoundError"),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"message","Connector not found")}}class ResourceUnavailableError extends RpcError{constructor(cause){super("Resource unavailable",{cause,code:-32002}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ResourceUnavailable")}}class SwitchChainError extends ProviderRpcError{constructor(cause){super("Error switching chain",{cause,code:4902}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","SwitchChainError")}}class UserRejectedRequestError extends ProviderRpcError{constructor(cause){super("User rejected request",{cause,code:4001}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","UserRejectedRequestError")}}},"./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function normalizeChainId(chainId){return"string"==typeof chainId?Number.parseInt(chainId,"0x"===chainId.trim().substring(0,2)?16:10):"bigint"==typeof chainId?Number(chainId):chainId}__webpack_require__.d(__webpack_exports__,{n:()=>normalizeChainId})},"./node_modules/@thirdweb-dev/wallets/evm/connectors/coinbase-wallet/dist/thirdweb-dev-wallets-evm-connectors-coinbase-wallet.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CoinbaseWalletConnector:()=>CoinbaseWalletConnector});var _dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js"),_dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js"),_dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js"),ethers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@ethersproject/address/lib.esm/index.js"),ethers__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/web3-provider.js"),ethers__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@ethersproject/bytes/lib.esm/index.js"),_dist_walletIds_dff6dced_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/walletIds-dff6dced.browser.esm.js"),_dist_url_a45219bd_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/url-a45219bd.browser.esm.js"),_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js"),console=(__webpack_require__("./node_modules/eventemitter3/index.mjs"),__webpack_require__("./node_modules/console-browserify/index.js"));class CoinbaseWalletConnector extends _dist_WagmiConnector_2f14002d_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.W{constructor(_ref){let{chains,options}=_ref;super({chains,options:{reloadOnDisconnect:!1,...options}}),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"id",_dist_walletIds_dff6dced_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.w.coinbase),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"name","Coinbase Wallet"),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"ready",!0),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"onAccountsChanged",(accounts=>{0===accounts.length?this.emit("disconnect"):this.emit("change",{account:ethers__WEBPACK_IMPORTED_MODULE_4__.getAddress(accounts[0])})})),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"onChainChanged",(chainId=>{const id=(0,_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.n)(chainId),unsupported=this.isChainUnsupported(id);this.emit("change",{chain:{id,unsupported}})})),(0,_dist_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__._)(this,"onDisconnect",(()=>{this.emit("disconnect")}))}async connect(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const provider=await this.getProvider();this.setupListeners(),this.emit("message",{type:"connecting"});const accounts=await provider.enable(),account=ethers__WEBPACK_IMPORTED_MODULE_4__.getAddress(accounts[0]);let id=await this.getChainId(),unsupported=this.isChainUnsupported(id);if(chainId&&id!==chainId)try{id=(await this.switchChain(chainId)).chainId,unsupported=this.isChainUnsupported(id)}catch(e){console.error(`Connected but failed to switch to desired chain ${chainId}`,e)}return{account,chain:{id,unsupported},provider:new ethers__WEBPACK_IMPORTED_MODULE_6__.j(provider)}}catch(error){if(/(user closed modal|accounts received is empty)/i.test(error.message))throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(error);throw error}}async disconnect(){if(!this._provider)return;const provider=await this.getProvider();provider.removeListener("accountsChanged",this.onAccountsChanged),provider.removeListener("chainChanged",this.onChainChanged),provider.removeListener("disconnect",this.onDisconnect),provider.disconnect(),provider.close()}async getAccount(){const provider=await this.getProvider(),accounts=await provider.request({method:"eth_accounts"});if(0===accounts.length)throw new Error("No accounts found");return ethers__WEBPACK_IMPORTED_MODULE_4__.getAddress(accounts[0])}async getChainId(){const provider=await this.getProvider();return(0,_dist_normalizeChainId_1fb9aedf_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.n)(provider.chainId)}async getProvider(){if(!this._provider){let CoinbaseWalletSDK=(await Promise.all([__webpack_require__.e(5506),__webpack_require__.e(4573),__webpack_require__.e(7131)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@thirdweb-dev/wallets/node_modules/@coinbase/wallet-sdk/dist/index.js"))).default;"function"!=typeof CoinbaseWalletSDK&&"function"==typeof CoinbaseWalletSDK.default&&(CoinbaseWalletSDK=CoinbaseWalletSDK.default),this._client=new CoinbaseWalletSDK(this.options);const walletExtensionChainId=this._client.walletExtension?.getChainId(),chain=this.chains.find((chain_=>this.options.chainId?chain_.chainId===this.options.chainId:chain_.chainId===walletExtensionChainId))||this.chains[0],chainId=this.options.chainId||chain?.chainId,jsonRpcUrl=this.options.jsonRpcUrl||chain?.rpc[0];this._provider=this._client.makeWeb3Provider(jsonRpcUrl,chainId)}return this._provider}async getSigner(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[provider,account]=await Promise.all([this.getProvider(),this.getAccount()]);return new ethers__WEBPACK_IMPORTED_MODULE_6__.j(provider,chainId).getSigner(account)}async isAuthorized(){try{return!!await this.getAccount()}catch{return!1}}async switchChain(chainId){const provider=await this.getProvider(),id=ethers__WEBPACK_IMPORTED_MODULE_8__.hexValue(chainId);try{return await provider.request({method:"wallet_switchEthereumChain",params:[{chainId:id}]}),this.chains.find((x=>x.chainId===chainId))??{chainId,name:`Chain ${id}`,slug:`${id}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpc:[""],testnet:!1,chain:"ethereum",shortName:"eth"}}catch(error){const chain=this.chains.find((x=>x.chainId===chainId));if(!chain)throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.C({chainId,connectorId:this.id});if(4902===error.code)try{return await provider.request({method:"wallet_addEthereumChain",params:[{chainId:id,chainName:chain.name,nativeCurrency:chain.nativeCurrency,rpcUrls:(0,_dist_url_a45219bd_browser_esm_js__WEBPACK_IMPORTED_MODULE_9__.g)(chain),blockExplorerUrls:this.getBlockExplorerUrls(chain)}]}),chain}catch(addError){if(this._isUserRejectedRequestError(addError))throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(addError);throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.A}if(this._isUserRejectedRequestError(error))throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.U(error);throw new _dist_errors_9edc08c8_browser_esm_js__WEBPACK_IMPORTED_MODULE_7__.S(error)}}_isUserRejectedRequestError(error){return/(user rejected)/i.test(error.message)}async setupListeners(){const provider=await this.getProvider();provider.on("accountsChanged",this.onAccountsChanged),provider.on("chainChanged",this.onChainChanged),provider.on("disconnect",this.onDisconnect)}async getQrUrl(){if(await this.getProvider(),!this._client)throw new Error("Coinbase Wallet SDK not initialized");return this._client.getQrUrl()}}}}]);