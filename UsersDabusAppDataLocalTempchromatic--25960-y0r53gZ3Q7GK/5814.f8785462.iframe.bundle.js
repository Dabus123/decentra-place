"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[5814],{"./node_modules/@thirdweb-dev/sdk/dist/erc-20-9a18a51c.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Erc20,a:()=>Erc20SignatureMintable});var ethers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@ethersproject/units/lib.esm/index.js"),ethers__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-32d08b05.browser.esm.js"),_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/index-33cd3415.browser.esm.js"),_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/assertEnabled-d1700f0b.browser.esm.js"),_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/contract-appuri-5c40af52.browser.esm.js"),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/transactions-72f9603c.browser.esm.js"),_drop_claim_conditions_e6f2abbf_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/drop-claim-conditions-e6f2abbf.browser.esm.js"),tiny_invariant__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/tiny-invariant/dist/esm/tiny-invariant.js"),_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/normalizePriceValue-9851c0eb.browser.esm.js"),_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/setErc20Allowance-7f76f677.browser.esm.js"),_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@thirdweb-dev/sdk/dist/signature-d3ea643d.browser.esm.js");class Erc20Burnable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cD.name;constructor(erc20,contractWrapper){this.erc20=erc20,this.contractWrapper=contractWrapper}tokens=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async amount=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burn",args:[await this.erc20.normalizeAmount(amount)]})));from=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(holder,amount)=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burnFrom",args:await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(holder),this.erc20.normalizeAmount(amount)])})))}class Erc20ClaimableWithConditions{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cE.name;constructor(erc20,contractWrapper,storage){this.erc20=erc20,this.contractWrapper=contractWrapper,this.storage=storage;const metadata=new _contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.C(this.contractWrapper,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.bg,this.storage);this.conditions=new _drop_claim_conditions_e6f2abbf_browser_esm_js__WEBPACK_IMPORTED_MODULE_4__.D(this.contractWrapper,metadata,this.storage)}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(destinationAddress,amount,options)=>{const quantity=await this.erc20.normalizeAmount(amount);return await this.conditions.getClaimTransaction(destinationAddress,quantity,options)}))}class Erc20Droppable{constructor(erc20,contractWrapper,storage){this.erc20=erc20,this.contractWrapper=contractWrapper,this.storage=storage,this.claim=new Erc20ClaimableWithConditions(this.erc20,this.contractWrapper,this.storage)}}class Erc20BatchMintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cF.name;constructor(erc20,contractWrapper){this.erc20=erc20,this.contractWrapper=contractWrapper}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async args=>{const contractEncoder=new _fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.C(this.contractWrapper),encoded=(await Promise.all(args.map((item=>Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(item.toAddress),this.erc20.normalizeAmount(item.amount)]))))).map((_ref=>{let[address,amount]=_ref;return contractEncoder.encode("mintTo",[address,amount])}));return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[encoded]})}))}class Erc20Mintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cG.name;constructor(erc20,contractWrapper){this.erc20=erc20,this.contractWrapper=contractWrapper,this.batch=this.detectErc20BatchMintable()}to=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(to,amount)=>await this.getMintTransaction(to,amount)));async getMintTransaction(to,amount){return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintTo",args:await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(to),this.erc20.normalizeAmount(amount)])})}detectErc20BatchMintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20BatchMintable"))return new Erc20BatchMintable(this.erc20,this.contractWrapper)}}class Erc20SignatureMintable{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cH.name;constructor(contractWrapper,roles){this.contractWrapper=contractWrapper,this.roles=roles}mint=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async signedPayload=>{const mintRequest=signedPayload.payload,signature=signedPayload.signature,[message,overrides]=await Promise.all([this.mapPayloadToContractStruct(mintRequest),this.contractWrapper.getCallOverrides()]);return await(0,_setErc20Allowance_7f76f677_browser_esm_js__WEBPACK_IMPORTED_MODULE_6__.s)(this.contractWrapper,ethers__WEBPACK_IMPORTED_MODULE_7__.gH.from(message.price),mintRequest.currencyAddress,overrides),_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[message,signature],overrides})}));mintBatch=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async signedPayloads=>{const messages=await Promise.all(signedPayloads.map((s=>this.mapPayloadToContractStruct(s.payload)))),contractPayloads=signedPayloads.map(((s,index)=>{const message=messages[index],signature=s.signature,price=s.payload.price;if(ethers__WEBPACK_IMPORTED_MODULE_7__.gH.from(price).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message,signature}})),contractEncoder=new _fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.C(this.contractWrapper),encoded=contractPayloads.map((p=>contractEncoder.encode("mintWithSignature",[p.message,p.signature])));return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[encoded]})}));async verify(signedPayload){const mintRequest=signedPayload.payload,signature=signedPayload.signature,message=await this.mapPayloadToContractStruct(mintRequest);return(await this.contractWrapper.read("verify",[message,signature]))[0]}async generate(mintRequest){return(await this.generateBatch([mintRequest]))[0]}async generateBatch(payloadsToSign){await(this.roles?.verify(["minter"],await this.contractWrapper.getSignerAddress()));const[chainId,name,parsedRequests]=await Promise.all([this.contractWrapper.getChainID(),this.contractWrapper.read("name",[]),Promise.all(payloadsToSign.map((m=>_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.S.parseAsync(m))))]),signer=this.contractWrapper.getSigner();(0,tiny_invariant__WEBPACK_IMPORTED_MODULE_9__.A)(signer,"No signer available");const finalPayloads=await Promise.all(parsedRequests.map((m=>_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.n.parseAsync(m)))),contractStructs=await Promise.all(finalPayloads.map((payload=>this.mapPayloadToContractStruct(payload)))),signatures=await Promise.all(contractStructs.map((struct=>this.contractWrapper.signTypedData(signer,{name,version:"1",chainId,verifyingContract:this.contractWrapper.address},{MintRequest:_signature_d3ea643d_browser_esm_js__WEBPACK_IMPORTED_MODULE_8__.M},struct))));return parsedRequests.map(((m,index)=>({payload:finalPayloads[index],signature:signatures[index].toString()})))}async mapPayloadToContractStruct(mintRequest){const[normalizedPrice,decimals]=await Promise.all([(0,_normalizePriceValue_9851c0eb_browser_esm_js__WEBPACK_IMPORTED_MODULE_10__.n)(this.contractWrapper.getProvider(),mintRequest.price,mintRequest.currencyAddress),this.contractWrapper.read("decimals",[])]),amountWithDecimals=ethers__WEBPACK_IMPORTED_MODULE_0__.parseUnits(mintRequest.quantity,decimals);return{to:mintRequest.to,primarySaleRecipient:mintRequest.primarySaleRecipient,quantity:amountWithDecimals,price:normalizedPrice,currency:mintRequest.currencyAddress,validityEndTimestamp:mintRequest.mintEndTime,validityStartTimestamp:mintRequest.mintStartTime,uid:mintRequest.uid}}}class Erc20{featureName=_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cI.name;get chainId(){return this._chainId}constructor(contractWrapper,storage,chainId){this.contractWrapper=contractWrapper,this.storage=storage,this.mintable=this.detectErc20Mintable(),this.burnable=this.detectErc20Burnable(),this.droppable=this.detectErc20Droppable(),this.signatureMintable=this.detectErc20SignatureMintable(),this._chainId=chainId}onNetworkUpdated(network){this.contractWrapper.updateSignerOrProvider(network)}getAddress(){return this.contractWrapper.address}async get(){return await(0,_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.f)(this.contractWrapper.getProvider(),this.getAddress())}async balance(){return await this.balanceOf(await this.contractWrapper.getSignerAddress())}async balanceOf(address){return this.getValue(await this.contractWrapper.read("balanceOf",[await(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(address)]))}async totalSupply(){return await this.getValue(await this.contractWrapper.read("totalSupply",[]))}async allowance(spender){const[owner,spenderAddress]=await Promise.all([this.contractWrapper.getSignerAddress(),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(spender)]);return await this.allowanceOf(owner,spenderAddress)}async allowanceOf(owner,spender){const args=await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(owner),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(spender)]);return await this.getValue(await this.contractWrapper.read("allowance",args))}transfer=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(to,amount)=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transfer",args:await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(to),this.normalizeAmount(amount)])})));transferFrom=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(from,to,amount)=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transferFrom",args:await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(from),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(to),this.normalizeAmount(amount)])})));setAllowance=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(spender,amount)=>_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"approve",args:await Promise.all([(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(spender),this.normalizeAmount(amount)])})));transferBatch=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async args=>{const contractEncoder=new _fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.C(this.contractWrapper),encoded=(await Promise.all(args.map((arg=>Promise.all([this.normalizeAmount(arg.amount),(0,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.aL)(arg.toAddress)]))))).map((_ref=>{let[amountWithDecimals,address]=_ref;return contractEncoder.encode("transfer",[address,amountWithDecimals])}));return _transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[encoded]})}));mint=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async amount=>this.mintTo.prepare(await this.contractWrapper.getSignerAddress(),amount)));mintTo=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(receiver,amount)=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.mintable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cG).to.prepare(receiver,amount)));async getMintTransaction(receiver,amount){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.mintable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cG).getMintTransaction(receiver,amount)}mintBatchTo=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async args=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.mintable?.batch,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cF).to.prepare(args)));burn=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async amount=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.burnable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cD).tokens.prepare(amount)));burnFrom=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(holder,amount)=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.burnable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cD).from.prepare(holder,amount)));claim=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(amount,options)=>this.claimTo.prepare(await this.contractWrapper.getSignerAddress(),amount,options)));claimTo=(0,_transactions_72f9603c_browser_esm_js__WEBPACK_IMPORTED_MODULE_2__.f)((async(destinationAddress,amount,options)=>(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.droppable?.claim,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cE).to.prepare(destinationAddress,amount,options)));get claimConditions(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.droppable?.claim,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cE).conditions}get signature(){return(0,_assertEnabled_d1700f0b_browser_esm_js__WEBPACK_IMPORTED_MODULE_11__.a)(this.signatureMintable,_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cH)}async normalizeAmount(amount){return async function normalizeAmount(contractWrapper,amount){const decimals=await contractWrapper.read("decimals",[]);return ethers__WEBPACK_IMPORTED_MODULE_0__.parseUnits(_index_33cd3415_browser_esm_js__WEBPACK_IMPORTED_MODULE_1__.cw.parse(amount),decimals)}(this.contractWrapper,amount)}async getValue(value){return await(0,_fetchCurrencyValue_32d08b05_browser_esm_js__WEBPACK_IMPORTED_MODULE_5__.a)(this.contractWrapper.getProvider(),this.getAddress(),ethers__WEBPACK_IMPORTED_MODULE_7__.gH.from(value))}detectErc20Mintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20"))return new Erc20Mintable(this,this.contractWrapper)}detectErc20Burnable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20Burnable"))return new Erc20Burnable(this,this.contractWrapper)}detectErc20Droppable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20ClaimConditionsV1")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20ClaimConditionsV2")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20ClaimPhasesV1")||(0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20ClaimPhasesV2"))return new Erc20Droppable(this,this.contractWrapper,this.storage)}detectErc20SignatureMintable(){if((0,_contract_appuri_5c40af52_browser_esm_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.contractWrapper,"ERC20SignatureMintable"))return new Erc20SignatureMintable(this.contractWrapper)}}}}]);