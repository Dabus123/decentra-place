"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[4306],{"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>WagmiConnector});var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js"),eventemitter3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/eventemitter3/index.mjs");class WagmiConnector extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__.A{constructor(_ref){let{chains=_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__.k9b,options}=_ref;super(),this.chains=chains,this.options=options}getBlockExplorerUrls(chain){const explorers=chain.explorers?.map((x=>x.url))??[];return explorers.length>0?explorers:void 0}isChainUnsupported(chainId){return!this.chains.some((x=>x.chainId===chainId))}updateChains(chains){this.chains=chains}}},"./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function normalizeChainId(chainId){return"string"==typeof chainId?Number.parseInt(chainId,"0x"===chainId.trim().substring(0,2)?16:10):"bigint"==typeof chainId?Number(chainId):chainId}__webpack_require__.d(__webpack_exports__,{n:()=>normalizeChainId})},"./node_modules/@thirdweb-dev/wallets/evm/connectors/magic/dist/thirdweb-dev-wallets-evm-connectors-magic.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MagicAuthConnector:()=>MagicAuthConnector});var t,s,n,e,i,defineProperty_350fc508_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js"),normalizeChainId_1fb9aedf_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js"),web3_provider=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/web3-provider.js"),lib_esm=__webpack_require__("./node_modules/@ethersproject/address/lib.esm/index.js"),r=((n=r||{}).MissingApiKey="MISSING_API_KEY",n.ModalNotReady="MODAL_NOT_READY",n.MalformedResponse="MALFORMED_RESPONSE",n.InvalidArgument="INVALID_ARGUMENT",n.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",n.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",n),a=((s=a||{}).SyncWeb3Method="SYNC_WEB3_METHOD",s.DuplicateIframe="DUPLICATE_IFRAME",s.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",s.DeprecationNotice="DEPRECATION_NOTICE",s),m=((t=m||{})[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",t[t.MagicLinkExpired=-10001]="MagicLinkExpired",t[t.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",t[t.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",t[t.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",t[t.UpdateEmailFailed=-10004]="UpdateEmailFailed",t[t.UserRequestEditEmail=-10005]="UserRequestEditEmail",t[t.InactiveRecipient=-10010]="InactiveRecipient",t[t.AccessDeniedToUser=-10011]="AccessDeniedToUser",t),p=((e=p||{}).LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="mc_get_wallet_info",e.ShowUI="mc_wallet",e.NFTPurchase="magic_nft_purchase",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.UpdatePhoneNumber="magic_auth_update_phone_number",e.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e),u=((i=u||{}).MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",i.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",i.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",i.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",i.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",i),es_o=(_=>(_.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",_))(es_o||{}),c=(_=>(_.Harmony="HARMONY",_))(c||{}),process=__webpack_require__("./node_modules/process/browser.js"),console=__webpack_require__("./node_modules/console-browserify/index.js"),vt=Object.create,Y=Object.defineProperty,It=Object.defineProperties,Pt=Object.getOwnPropertyDescriptor,xt=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertyNames,Oe=Object.getOwnPropertySymbols,$t=Object.getPrototypeOf,_e=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Ce=(n,e,t)=>e in n?Y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Z=(n,e)=>{for(var t in e||(e={}))_e.call(e,t)&&Ce(n,t,e[t]);if(Oe)for(var t of Oe(e))Nt.call(e,t)&&Ce(n,t,e[t]);return n},x=(n,e,t)=>new Promise(((r,o)=>{var s=c=>{try{i(t.next(c))}catch(p){o(p)}},a=c=>{try{i(t.throw(c))}catch(p){o(p)}},i=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,a);i((t=t.apply(n,e)).next())})),lt=((n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports))(((Tr,be)=>{var Nn=Object.prototype.hasOwnProperty,v="~";function B(){}function Mn(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function ct(n,e,t,r,o){if("function"!=typeof t)throw new TypeError("The listener must be a function");var s=new Mn(t,r||n,o),a=v?v+e:e;return n._events[a]?n._events[a].fn?n._events[a]=[n._events[a],s]:n._events[a].push(s):(n._events[a]=s,n._eventsCount++),n}function ie(n,e){0==--n._eventsCount?n._events=new B:delete n._events[e]}function R(){this._events=new B,this._eventsCount=0}Object.create&&(B.prototype=Object.create(null),(new B).__proto__||(v=!1)),R.prototype.eventNames=function(){var t,r,e=[];if(0===this._eventsCount)return e;for(r in t=this._events)Nn.call(t,r)&&e.push(v?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},R.prototype.listeners=function(e){var t=v?v+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},R.prototype.listenerCount=function(e){var t=v?v+e:e,r=this._events[t];return r?r.fn?1:r.length:0},R.prototype.emit=function(e,t,r,o,s,a){var i=v?v+e:e;if(!this._events[i])return!1;var l,u,c=this._events[i],p=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,s),!0;case 6:return c.fn.call(c.context,t,r,o,s,a),!0}for(u=1,l=new Array(p-1);u<p;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var A,P=c.length;for(u=0;u<P;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),p){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,o);break;default:if(!l)for(A=1,l=new Array(p-1);A<p;A++)l[A-1]=arguments[A];c[u].fn.apply(c[u].context,l)}}return!0},R.prototype.on=function(e,t,r){return ct(this,e,t,r,!1)},R.prototype.once=function(e,t,r){return ct(this,e,t,r,!0)},R.prototype.removeListener=function(e,t,r,o){var s=v?v+e:e;if(!this._events[s])return this;if(!t)return ie(this,s),this;var a=this._events[s];if(a.fn)a.fn===t&&(!o||a.once)&&(!r||a.context===r)&&ie(this,s);else{for(var i=0,c=[],p=a.length;i<p;i++)(a[i].fn!==t||o&&!a[i].once||r&&a[i].context!==r)&&c.push(a[i]);c.length?this._events[s]=1===c.length?c[0]:c:ie(this,s)}return this},R.prototype.removeAllListeners=function(e){var t;return e?(t=v?v+e:e,this._events[t]&&ie(this,t)):(this._events=new B,this._eventsCount=0),this},R.prototype.off=R.prototype.removeListener,R.prototype.addListener=R.prototype.on,R.prefixed=v,R.EventEmitter=R,typeof be<"u"&&(be.exports=R)}));var Pe={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},Ct="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},es_m=Ct,W=function St(n){let e={exports:{}};return n(e,e.exports),e.exports}((function(n,e){let{MAX_SAFE_COMPONENT_LENGTH:t}=Pe,r=(e=n.exports={}).re=[],o=e.src=[],s=e.t={},a=0,i=(c,p,l)=>{let u=a++;es_m(u,p),s[c]=u,o[u]=p,r[u]=new RegExp(p,l?"g":void 0)};i("NUMERICIDENTIFIER","0|[1-9]\\d*"),i("NUMERICIDENTIFIERLOOSE","[0-9]+"),i("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),i("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),i("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),i("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),i("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),i("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),i("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),i("BUILDIDENTIFIER","[0-9A-Za-z-]+"),i("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),i("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),i("FULL",`^${o[s.FULLPLAIN]}$`),i("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),i("LOOSE",`^${o[s.LOOSEPLAIN]}$`),i("GTLT","((?:<|>)?=?)"),i("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),i("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),i("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),i("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),i("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),i("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),i("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),i("COERCERTL",o[s.COERCE],!0),i("LONETILDE","(?:~>?)"),i("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",i("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),i("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),i("LONECARET","(?:\\^)"),i("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",i("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),i("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),i("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),i("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),i("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",i("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),i("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),i("STAR","(<|>)?=?\\s*\\*"),i("GTE0","^\\s*>=\\s*0.0.0\\s*$"),i("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")})),ke=/^[0-9]+$/,Xe=(n,e)=>{let t=ke.test(n),r=ke.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},Dt={compareIdentifiers:Xe,rcompareIdentifiers:(n,e)=>Xe(e,n)},{MAX_LENGTH:qe,MAX_SAFE_INTEGER:Q}=Pe,{re:Je,t:Ue}=W,{compareIdentifiers:K}=Dt,E=class{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof E){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>qe)throw new TypeError(`version is longer than ${qe} characters`);es_m("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Je[Ue.LOOSE]:Je[Ue.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Q||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Q||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Q||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<Q)return s}return o})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(es_m("SemVer.compare",this.version,this.options,e),!(e instanceof E)){if("string"==typeof e&&e===this.version)return 0;e=new E(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof E||(e=new E(e,this.options)),K(this.major,e.major)||K(this.minor,e.minor)||K(this.patch,e.patch)}comparePre(e){if(e instanceof E||(e=new E(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],o=e.prerelease[t];if(es_m("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return K(r,o)}while(++t)}compareBuild(e){e instanceof E||(e=new E(e,this.options));let t=0;do{let r=this.build[t],o=e.build[t];if(es_m("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return K(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},k=(n,e,t)=>new E(n,t).compare(new E(e,t)),Jt=(n,e,t)=>0===k(n,e,t),Gt=(n,e,t)=>0!==k(n,e,t),Kt=(n,e,t)=>k(n,e,t)>0,Wt=(n,e,t)=>k(n,e,t)>=0,Bt=(n,e,t)=>k(n,e,t)<0,Vt=(n,e,t)=>k(n,e,t)<=0,Ie=(n,e,t,r)=>{switch(e){case"===":return"object"==typeof n&&(n=n.version),"object"==typeof t&&(t=t.version),n===t;case"!==":return"object"==typeof n&&(n=n.version),"object"==typeof t&&(t=t.version),n!==t;case"":case"=":case"==":return Jt(n,t,r);case"!=":return Gt(n,t,r);case">":return Kt(n,t,r);case">=":return Wt(n,t,r);case"<":return Bt(n,t,r);case"<=":return Vt(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}},j=Symbol("SemVer ANY"),L=class{static get ANY(){return j}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof L){if(e.loose===!!t.loose)return e;e=e.value}es_m("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===j?this.value="":this.value=this.operator+this.semver.version,es_m("comp",this)}parse(e){let t=this.options.loose?Ge[Fe.COMPARATORLOOSE]:Ge[Fe.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new E(r[2],this.options.loose):this.semver=j}toString(){return this.value}test(e){if(es_m("Comparator.test",e,this.options.loose),this.semver===j||e===j)return!0;if("string"==typeof e)try{e=new E(e,this.options)}catch(t){return!1}return Ie(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof L))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new $(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new $(this.value,t).test(e.semver);let r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),i=Ie(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=Ie(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||o||s&&a||i||c}},{re:Ge,t:Fe}=W,$=class{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new $(e.raw,t);if(e instanceof L)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((r=>this.parseRange(r.trim()))).filter((r=>r.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let r=t?g[y.HYPHENRANGELOOSE]:g[y.HYPHENRANGE];e=e.replace(r,pn(this.options.includePrerelease)),es_m("hyphen replace",e),e=e.replace(g[y.COMPARATORTRIM],Yt),es_m("comparator trim",e,g[y.COMPARATORTRIM]),e=(e=(e=e.replace(g[y.TILDETRIM],Zt)).replace(g[y.CARETTRIM],Qt)).split(/\s+/).join(" ");let o=t?g[y.COMPARATORLOOSE]:g[y.COMPARATOR];return e.split(" ").map((s=>en(s,this.options))).join(" ").split(/\s+/).map((s=>ln(s,this.options))).filter(this.options.loose?s=>!!s.match(o):()=>!0).map((s=>new L(s,this.options)))}intersects(e,t){if(!(e instanceof $))throw new TypeError("a Range is required");return this.set.some((r=>Ke(r,t)&&e.set.some((o=>Ke(o,t)&&r.every((s=>o.every((a=>s.intersects(a,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new E(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(un(this.set[t],e,this.options))return!0;return!1}},{re:g,t:y,comparatorTrimReplace:Yt,tildeTrimReplace:Zt,caretTrimReplace:Qt}=W,Ke=(n,e)=>{let t=!0,r=n.slice(),o=r.pop();for(;t&&r.length;)t=r.every((s=>o.intersects(s,e))),o=r.pop();return t},en=(n,e)=>(es_m("comp",n,e),n=rn(n,e),es_m("caret",n),n=tn(n,e),es_m("tildes",n),n=on(n,e),es_m("xrange",n),n=cn(n,e),es_m("stars",n),n),T=n=>!n||"x"===n.toLowerCase()||"*"===n,tn=(n,e)=>n.trim().split(/\s+/).map((t=>nn(t,e))).join(" "),nn=(n,e)=>{let t=e.loose?g[y.TILDELOOSE]:g[y.TILDE];return n.replace(t,((r,o,s,a,i)=>{let c;return es_m("tilde",n,r,o,s,a,i),T(o)?c="":T(s)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:T(a)?c=`>=${o}.${s}.0 <${o}.${+s+1}.0-0`:i?(es_m("replaceTilde pr",i),c=`>=${o}.${s}.${a}-${i} <${o}.${+s+1}.0-0`):c=`>=${o}.${s}.${a} <${o}.${+s+1}.0-0`,es_m("tilde return",c),c}))},rn=(n,e)=>n.trim().split(/\s+/).map((t=>sn(t,e))).join(" "),sn=(n,e)=>{es_m("caret",n,e);let t=e.loose?g[y.CARETLOOSE]:g[y.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,((o,s,a,i,c)=>{let p;return es_m("caret",n,o,s,a,i,c),T(s)?p="":T(a)?p=`>=${s}.0.0${r} <${+s+1}.0.0-0`:T(i)?p="0"===s?`>=${s}.${a}.0${r} <${s}.${+a+1}.0-0`:`>=${s}.${a}.0${r} <${+s+1}.0.0-0`:c?(es_m("replaceCaret pr",c),p="0"===s?"0"===a?`>=${s}.${a}.${i}-${c} <${s}.${a}.${+i+1}-0`:`>=${s}.${a}.${i}-${c} <${s}.${+a+1}.0-0`:`>=${s}.${a}.${i}-${c} <${+s+1}.0.0-0`):(es_m("no pr"),p="0"===s?"0"===a?`>=${s}.${a}.${i}${r} <${s}.${a}.${+i+1}-0`:`>=${s}.${a}.${i}${r} <${s}.${+a+1}.0-0`:`>=${s}.${a}.${i} <${+s+1}.0.0-0`),es_m("caret return",p),p}))},on=(n,e)=>(es_m("replaceXRanges",n,e),n.split(/\s+/).map((t=>an(t,e))).join(" ")),an=(n,e)=>{n=n.trim();let t=e.loose?g[y.XRANGELOOSE]:g[y.XRANGE];return n.replace(t,((r,o,s,a,i,c)=>{es_m("xRange",n,r,o,s,a,i,c);let p=T(s),l=p||T(a),u=l||T(i),P=u;return"="===o&&P&&(o=""),c=e.includePrerelease?"-0":"",p?r=">"===o||"<"===o?"<0.0.0-0":"*":o&&P?(l&&(a=0),i=0,">"===o?(o=">=",l?(s=+s+1,a=0,i=0):(a=+a+1,i=0)):"<="===o&&(o="<",l?s=+s+1:a=+a+1),"<"===o&&(c="-0"),r=`${o+s}.${a}.${i}${c}`):l?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:u&&(r=`>=${s}.${a}.0${c} <${s}.${+a+1}.0-0`),es_m("xRange return",r),r}))},cn=(n,e)=>(es_m("replaceStars",n,e),n.trim().replace(g[y.STAR],"")),ln=(n,e)=>(es_m("replaceGTE0",n,e),n.trim().replace(g[e.includePrerelease?y.GTE0PRE:y.GTE0],"")),pn=n=>(e,t,r,o,s,a,i,c,p,l,u,P,A)=>`${t=T(r)?"":T(o)?`>=${r}.0.0${n?"-0":""}`:T(s)?`>=${r}.${o}.0${n?"-0":""}`:a?`>=${t}`:`>=${t}${n?"-0":""}`} ${c=T(p)?"":T(l)?`<${+p+1}.0.0-0`:T(u)?`<${p}.${+l+1}.0-0`:P?`<=${p}.${l}.${u}-${P}`:n?`<${p}.${l}.${+u+1}-0`:`<=${c}`}`.trim(),un=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(es_m(n[r].semver),n[r].semver!==L.ANY&&n[r].semver.prerelease.length>0){let o=n[r].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0},Be=(n,e,t)=>{try{e=new $(e,t)}catch(r){return!1}return e.test(n)},{MAX_LENGTH:dn}=Pe,{re:je,t:We}=W,hn=(n,e)=>{if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),n instanceof E)return n;if("string"!=typeof n||n.length>dn||!(e.loose?je[We.LOOSE]:je[We.FULL]).test(n))return null;try{return new E(n,e)}catch(t){return null}},{re:ee,t:te}=W,He=(n,e)=>{if(n instanceof E)return n;if("number"==typeof n&&(n=String(n)),"string"!=typeof n)return null;let t=null;if((e=e||{}).rtl){let r;for(;(r=ee[te.COERCERTL].exec(n))&&(!t||t.index+t[0].length!==n.length);)t&&r.index+r[0].length===t.index+t[0].length||(t=r),ee[te.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;ee[te.COERCERTL].lastIndex=-1}else t=n.match(ee[te.COERCE]);return null===t?null:hn(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};function En(n){return String.fromCharCode(parseInt(n.slice(1),16))}function fn(n){return`%${`00${n.charCodeAt(0).toString(16)}`.slice(-2)}`}function ne(n){return function yn(n){return btoa(encodeURIComponent(n).replace(/%[0-9A-F]{2}/g,En))}(JSON.stringify(n))}function Ve(n){return JSON.parse(function gn(n){return decodeURIComponent(Array.from(atob(n),fn).join(""))}(n))}function N(n){return void 0===n}function re(n){return function vn(n){return null===n}(n)||N(n)}function se(n){if(!n)return!0;for(let e in n)if(Object.hasOwnProperty.call(n,e))return!1;return!0}var h={};var Ze={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},b=class extends Error{constructor(t,r){super(`Magic SDK Error: [${t}] ${r}`),this.code=t,this.rawMessage=r,this.__proto__=Error,Object.setPrototypeOf(this,b.prototype)}},M=class extends Error{constructor(t){super(),this.__proto__=Error;let r=Number(null==t?void 0:t.code);this.rawMessage=(null==t?void 0:t.message)||"Internal error",this.code=function Ye(n){return!re(n)&&"number"==typeof n&&Object.values(m).includes(n)}(r)?r:m.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(null==t?void 0:t.data)||void 0,Object.setPrototypeOf(this,M.prototype)}},q=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},J=class extends Error{constructor(t,r,o,s){super(`Magic Extension Error (${t.name}): [${r}] ${o}`),this.code=r,this.rawMessage=o,this.data=s,this.__proto__=Error,Object.setPrototypeOf(this,J.prototype)}},X=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function Qe(){return new b(r.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function et(){return new b(r.MalformedResponse,"Response from the Magic iframe is malformed.")}function tt(n){return new b(r.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${n}\` can be accessed. Do not invoke \`Extension.${n}\` inside an extension constructor.`)}function nt(n){let e=`Some extensions are incompatible with \`${h.sdkName}@${h.version}\`:`;return n.filter((t=>void 0!==t.compat&&null!==t.compat)).forEach((t=>{let r=t.compat[h.sdkName];"string"==typeof r?e+=`\n  - Extension \`${t.name}\` supports version(s) \`${r}\``:r||(e+=`\n  - Extension \`${t.name}\` does not support ${h.platform} environments.`)})),new b(r.IncompatibleExtensions,e)}function rt(n){return new b(r.InvalidArgument,`Invalid ${(t=>{let r=t+1,o=r%10,s=r%100;return 1===o&&11!==s?`${r}st`:2===o&&12!==s?`${r}nd`:3===o&&13!==s?`${r}rd`:`${r}th`})(n.argument)} argument given to \`${n.procedure}\`.\n  Expected: \`${n.expected}\`\n  Received: \`${n.received}\``)}function ot(){return new q(a.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${h.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}var bn=function*xn(){let n=0;for(;;)n<Number.MAX_SAFE_INTEGER?yield++n:n=0}();function xe(){return bn.next().value}var it=Symbol("Payload pre-processed by Magic SDK");function at(n){return Object.defineProperty(n,it,{value:!0,enumerable:!1}),n}function _(n){var e,t,r;return function $n(n){return!!n[it]}(n)||(n.jsonrpc=null!=(e=n.jsonrpc)?e:"2.0",n.id=xe(),n.method=null!=(t=n.method)?t:"noop",n.params=null!=(r=n.params)?r:[],at(n)),n}function d(n,e=[]){return at({params:e,method:n,jsonrpc:"2.0",id:xe()})}var S=class{constructor(e){e instanceof S?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):function ze(n){return!re(n)&&!(N(n.jsonrpc)||N(n.id)||N(n.result)&&N(n.error))}(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return void 0!==this._error&&null!==this._error}get hasResult(){return void 0!==this._result}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},pt=((n,e,t)=>(t=null!=n?vt($t(n)):{},((n,e,t,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of bt(e))!_e.call(n,o)&&o!==t&&Y(n,o,{get:()=>e[o],enumerable:!(r=Pt(e,o))||r.enumerable});return n})(!e&&n&&n.__esModule?t:Y(t,"default",{value:n,enumerable:!0}),n)))(lt()),$e=class extends pt.default{};function ae(){let n=new $e;return{emitter:n,createChainingEmitterMethod:(r,o)=>(...s)=>(n[r].apply(n,s),o),createBoundEmitterMethod:r=>(...o)=>n[r].apply(n,o)}}var ut=Symbol("isPromiEvent");function dt(n){return!!n[ut]}function ce(n){let e=Ne(n),{createBoundEmitterMethod:t,createChainingEmitterMethod:r}=ae(),o=Symbol("Promise.then"),s=Symbol("Promise.catch"),a=Symbol("Promise.finally"),i=(l,u)=>(...P)=>{let A=u[l].apply(u,P);return c(A)},c=l=>Object.assign(l,{[ut]:!0,[o]:l[o]||l.then,[s]:l[s]||l.catch,[a]:l[a]||l.finally,then:i(o,l),catch:i(s,l),finally:i(a,l),on:r("on",l),once:r("once",l),addListener:r("addListener",l),off:r("off",l),removeListener:r("removeListener",l),removeAllListeners:r("removeAllListeners",l),emit:t("emit"),eventNames:t("eventNames"),listeners:t("listeners"),listenerCount:t("listenerCount")}),p=c(e.then((l=>(p.emit("done",l),p.emit("settled"),l)),(l=>{throw p.emit("error",l),p.emit("settled"),l})));return p}function Ne(n){return new Promise(((e,t)=>{let r=n(e,t);Promise.resolve(r).catch(t)}))}var pe,I=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(es_o.MAGIC_HANDLE_REQUEST,_(e)),r=ce(((s,a)=>{t.then((i=>{if(o(),i.hasError)a(new M(i.payload.error));else{if(!i.hasResult)throw et();s(i.payload.result)}})).catch((i=>{o(),a(i)}))})),o=this.overlay.on(u.MAGIC_HANDLE_EVENT,(s=>{var i;let{response:a}=s.data;if(a.id===e.id&&(null==(i=a.result)?void 0:i.event)){let{event:c,params:p=[]}=a.result;r.emit(c,...p)}}));return r}createIntermediaryEvent(e,t){return o=>{let s=d(p.IntermediaryEvent,[{payloadId:t,eventType:e,args:o}]);this.request(s)}}},le=class extends I{loginWithMagicLink(e){let{email:t,showUI:r=!0,redirectURI:o}=e,s=d(this.sdk.testMode?p.LoginWithMagicLinkTestMode:p.LoginWithMagicLink,[{email:t,showUI:r,redirectURI:o}]);return this.request(s)}loginWithSMS(e){let{phoneNumber:t}=e,r=d(this.sdk.testMode?p.LoginWithSmsTestMode:p.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r}=e,o=d(this.sdk.testMode?p.LoginWithEmailOTPTestMode:p.LoginWithEmailOTP,[{email:t,showUI:r}]);if(!r){let s=this.request(o);return s&&s.on("otp-input-sent",(a=>{this.createIntermediaryEvent("verify-email-otp",o.id)(a)})),s}return this.request(o)}loginWithCredential(e){let t=null!=e?e:"";if(!e&&"web"===h.platform){t=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let r=d(this.sdk.testMode?p.LoginWithCredentialTestMode:p.LoginWithCredential,[t]);return this.request(r)}},H={};function C(n){return(...e)=>x(this,null,(function*(){return pe||(pe=yield h.configureStorage()),yield pe.ready(),pe[n](...e)}))}((n,e)=>{for(var t in e)Y(n,t,{get:e[t],enumerable:!0})})(H,{clear:()=>Sn,getItem:()=>D,iterate:()=>Dn,key:()=>Cn,keys:()=>_n,length:()=>On,removeItem:()=>ue,setItem:()=>G});var D=C("getItem"),G=C("setItem"),ue=C("removeItem"),Sn=C("clear"),On=C("length"),Cn=C("key"),_n=C("keys"),Dn=C("iterate");function mt(){let n=window.crypto.getRandomValues(new Uint8Array(16));n[6]=15&n[6]|64,n[8]=191&n[8]|128;let e="";return e+=n[0].toString(16),e+=n[1].toString(16),e+=n[2].toString(16),e+=n[3].toString(16),e+="-",e+=n[4].toString(16),e+=n[5].toString(16),e+="-",e+=n[6].toString(16),e+=n[7].toString(16),e+="-",e+=n[8].toString(16),e+=n[9].toString(16),e+="-",e+=n[10].toString(16),e+=n[11].toString(16),e+=n[12].toString(16),e+=n[13].toString(16),e+=n[14].toString(16),e+=n[15].toString(16),e}var Me="STORE_KEY_PRIVATE_KEY",de="STORE_KEY_PUBLIC_JWK",we="ECDSA",kn={name:we,namedCurve:"P-256"},qn={name:we,namedCurve:"P-256"};function me(){ue(de),ue(Me)}function ft(){return x(this,null,(function*(){let n=yield function Jn(){return x(this,null,(function*(){if(function Gn(){let n="undefined"!=typeof window&&!!window.crypto,e=n&&!!window.crypto.subtle;return n&&e}())return(yield D(de))||(yield function Un(){return x(this,null,(function*(){let n=null,{subtle:e}=window.crypto,t=yield e.generateKey(kn,!0,["sign"]),r=yield e.exportKey("jwk",t.privateKey);n=yield e.exportKey("jwk",t.publicKey);let o=yield e.importKey("jwk",r,qn,!1,["sign"]);yield G(Me,o),yield G(de,n)}))}()),D(de);console.info("webcrypto is not supported")}))}();if(!n)return void console.info("unable to create public key or webcrypto is unsupported");let{subtle:e}=window.crypto,t=yield D(Me);if(!t||!e)return void console.info("unable to find private key or webcrypto unsupported");let r={iat:Math.floor((new Date).getTime()/1e3),jti:mt()},o={typ:"dpop+jwt",alg:"ES256",jwk:n},s_protected=ht(JSON.stringify(o)),s_claims=ht(JSON.stringify(r)),a=function Fn(n){return(new TextEncoder).encode(n)}(`${s_protected}.${s_claims}`),i={name:we,hash:{name:"SHA-256"}},c=function jn(n){let e="";return n.forEach((t=>{e+=String.fromCharCode(t)})),yt(e)}(new Uint8Array(yield e.sign(i,t,a)));return`${s_protected}.${s_claims}.${c}`}))}function ht(n){return yt(function Kn(n){return encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,((t,r)=>String.fromCharCode(parseInt(r,16))))}(n))}function yt(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}var he=class extends I{getIdToken(e){let t=d(this.sdk.testMode?p.GetIdTokenTestMode:p.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=d(this.sdk.testMode?p.GenerateIdTokenTestMode:p.GenerateIdToken,[e]);return this.request(t)}getMetadata(){let e=d(this.sdk.testMode?p.GetMetadataTestMode:p.GetMetadata);return this.request(e)}updateEmail(e){let{email:t,showUI:r=!0}=e,o=d(this.sdk.testMode?p.UpdateEmailTestMode:p.UpdateEmail,[{email:t,showUI:r}]);return this.request(o)}isLoggedIn(){let e=d(this.sdk.testMode?p.IsLoggedInTestMode:p.IsLoggedIn);return this.request(e)}logout(){me();let e=d(this.sdk.testMode?p.LogoutTestMode:p.Logout);return this.request(e)}showSettings(){let e=d(this.sdk.testMode?p.UserSettingsTestMode:p.UserSettings);return this.request(e)}updatePhoneNumber(){let e=d(this.sdk.testMode?p.UpdatePhoneNumberTestMode:p.UpdatePhoneNumber);return this.request(e)}recoverAccount(e){let t=d(this.sdk.testMode?p.RecoverAccountTestMode:p.RecoverAccount,[e]);return this.request(t)}},Ee=class extends I{connectWithUI(){let e=d(p.RequestAccounts);return this.request(e)}showUI(){let e=d(p.ShowUI);return this.request(e)}getInfo(){let e=d(p.GetInfo);return this.request(e)}requestUserInfoWithUI(e){let t=d(p.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}disconnect(){me();let e=d(p.Disconnect);return this.request(e)}},{createBoundEmitterMethod:fe,createChainingEmitterMethod:F}=ae(),ye=class extends I{constructor(){super(...arguments),this.isMagic=!0,this.on=F("on",this),this.once=F("once",this),this.addListener=F("addListener",this),this.off=F("off",this),this.removeListener=F("removeListener",this),this.removeAllListeners=F("removeAllListeners",this),this.emit=fe("emit"),this.eventNames=fe("eventNames"),this.listeners=fe("listeners"),this.listenerCount=fe("listenerCount")}sendAsync(t,r){if(!r)throw rt({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:null===r?"null":typeof r});if(Array.isArray(t))this.overlay.post(es_o.MAGIC_HANDLE_REQUEST,t.map((o=>{let s=_(o);return this.prefixPayloadMethodForTestMode(s),s}))).then((o=>{r(null,o.map((s=>((n,e)=>It(n,xt(e)))(Z({},s.payload),{error:s.hasError?new M(s.payload.error):null}))))}));else{let o=_(t);this.prefixPayloadMethodForTestMode(o),this.overlay.post(es_o.MAGIC_HANDLE_REQUEST,o).then((s=>{r(s.hasError?new M(s.payload.error):null,s.payload)}))}}send(t,r){if("string"==typeof t){let s=d(t,Array.isArray(r)?r:[]);return this.request(s)}if(Array.isArray(t)||r)return void this.sendAsync(t,r);let o=function st(){return new q(a.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}();return o.log(),new S(t).applyError({code:-32603,message:o.rawMessage}).payload}enable(){let t=d("eth_accounts");return this.request(t)}request(t){return this.prefixPayloadMethodForTestMode(t),super.request(t)}prefixPayloadMethodForTestMode(t){this.sdk.testMode&&(t.method=`testMode/eth/${t.method}`)}};function Ae(n,e){return e?new URL(n,e):new URL(n)}var Rt=["request","overlay","sdk"];function Wn(n){let e=Object.getPrototypeOf(n),t=[e];for(;e!==I.prototype;)e=Object.getPrototypeOf(e),t.push(e);return t}var ge=class extends I{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:ce,isPromiEvent:dt,encodeJSON:ne,decodeJSON:Ve,createJsonRpcRequestPayload:d,standardizeJsonRpcRequestPayload:_,storage:H};let t=[this,...Wn(this)];Rt.forEach((r=>{let o=t.map((c=>Object.getOwnPropertyDescriptor(c,r))),s=o.findIndex((c=>!!c)),a=s>0,i=o[s];i&&(this.__sdk_access_field_descriptors__.set(r,{descriptor:i,isPrototypeField:a}),Object.defineProperty(this,r,{configurable:!0,get:()=>{throw tt(r)}}))}))}init(t){this.__is_initialized__||(Rt.forEach((r=>{if(this.__sdk_access_field_descriptors__.has(r)){let{descriptor:o,isPrototypeField:s}=this.__sdk_access_field_descriptors__.get(r);s?delete this[r]:Object.defineProperty(this,r,o)}})),this.sdk=t,this.__is_initialized__=!0)}createDeprecationWarning(t){let{method:r,removalVersion:o,useInstead:s}=t;return new X(this,"DEPRECATION_NOTICE",`\`${r}\` will be removed from this Extension in version \`${o}\`.${s?` Use \`${s}\` instead.`:""}`)}createWarning(t,r){return new X(this,t,r)}createError(t,r,o){return new J(this,t,r,o)}},w=class extends ge{};w.Internal=class extends ge{},w.Anonymous="anonymous extension";var Re=class extends I{purchase(e){let t=d(p.NFTPurchase,[e]);return this.request(t)}};function Tt(n){return!n.compat||null==n.compat[h.sdkName]||("string"==typeof n.compat[h.sdkName]?Be(He(h.version),n.compat[h.sdkName]):!!n.compat[h.sdkName])}function Bn(n){var o;let e=null!=(o=null==n?void 0:n.extensions)?o:[],t={},r=[];if(Array.isArray(e)?e.forEach((s=>{Tt(s)?(s.init(this),(s.name||s.name!==w.Anonymous)&&(this[s.name]=s),s instanceof w.Internal&&(se(s.config)||(t[s.name]=s.config))):r.push(s)})):Object.keys(e).forEach((s=>{if(Tt(e[s])){e[s].init(this);let a=e[s];this[s]=a,a instanceof w.Internal&&(se(a.config)||(t[e[s].name]=a.config))}else r.push(e[s])})),r.length)throw nt(r);return t}var z=class{constructor(e,t){var a;if(this.apiKey=e,!e)throw Qe();"react-native"===h.platform&&(null==t?void 0:t.endpoint)&&ot().log();let{defaultEndpoint:r,version:o}=h;this.testMode=!(null==t||!t.testMode),this.endpoint=Ae(null!=(a=null==t?void 0:t.endpoint)?a:r).origin,this.auth=new le(this),this.user=new he(this),this.wallet=new Ee(this),this.nft=new Re(this),this.rpcProvider=new ye(this);let s=Bn.call(this,t);this.parameters=ne(Z({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:null==t?void 0:t.network,host:Ae(this.endpoint).host,sdk:Ze[h.sdkName],version:o,ext:se(s)?void 0:s,locale:(null==t?void 0:t.locale)||"en_US"},h.bundleId?{bundleId:h.bundleId}:{}))}get overlay(){if(!z.__overlays__.has(this.parameters)){let e=new h.ViewController(this.endpoint,this.parameters);e.init(),z.__overlays__.set(this.parameters,e)}return z.__overlays__.get(this.parameters)}preload(){return x(this,null,(function*(){yield this.overlay.ready}))}},Te=z;function Vn(n,e){var o;let t=null==(o=e.data.response)?void 0:o.id,r=function Hn(n,e){return e&&Array.isArray(n)?n.find((t=>t.id===e)):n}(n,t);if(t&&r){return{id:t,response:new S(r).applyResult(e.data.response.result).applyError(e.data.response.error)}}return{}}Te.__overlays__=new Map;var Se=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return x(this,null,(function*(){return Ne((r=>x(this,null,(function*(){yield this.ready;let o=[],s=Array.isArray(t)?t.map((p=>p.id)):[],a=yield function zn(n,e){return x(this,null,(function*(){let r,t=yield D("rt");if("web"===h.platform)try{r=yield ft()}catch(o){console.error("webcrypto error",o)}return r?t?{msgType:n,payload:e,jwt:r,rt:t}:{msgType:n,payload:e,jwt:r}:{msgType:n,payload:e}}))}(`${e}-${this.parameters}`,t);yield this._post(a);let c=this.on(u.MAGIC_HANDLE_RESPONSE,(p=>l=>{let{id:u,response:P}=Vn(t,l);(function Yn(n){return x(this,null,(function*(){!n.data.rt||(yield G("rt",n.data.rt))}))})(l),u&&P&&Array.isArray(t)&&s.includes(u)?(o.push(P),o.length===t.length&&(p(),r(o))):u&&P&&!Array.isArray(t)&&u===t.id&&(p(),r(P))})((()=>c())))}))))}))}on(e,t){let r=t.bind(window),o=s=>{s.data.msgType===`${e}-${this.parameters}`&&r(s)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise((e=>{this.on(u.MAGIC_OVERLAY_READY,(()=>e()))}))}listen(){this.on(u.MAGIC_HIDE_OVERLAY,(()=>{this.hideOverlay()})),this.on(u.MAGIC_SHOW_OVERLAY,(()=>{this.showOverlay()}))}},es_console=__webpack_require__("./node_modules/console-browserify/index.js"),Zr=Object.create,es_Je=Object.defineProperty,qr=Object.getOwnPropertyDescriptor,kr=Object.getOwnPropertyNames,es_et=Object.getPrototypeOf,es_rt=Object.prototype.hasOwnProperty,ve=__webpack_require__("./node_modules/magic-sdk/dist/es sync recursive"),es_$e=(b,A)=>()=>(A||b((A={exports:{}}).exports,A),A.exports),es_Ze=(b,A,R)=>(R=null!=b?Zr(es_et(b)):{},((b,A,R,L)=>{if(A&&"object"==typeof A||"function"==typeof A)for(let D of kr(A))!es_rt.call(b,D)&&D!==R&&es_Je(b,D,{get:()=>A[D],enumerable:!(L=qr(A,D))||L.enumerable});return b})(!A&&b&&b.__esModule?R:es_Je(R,"default",{value:b,enumerable:!0}),b)),es_se=(b,A,R)=>new Promise(((L,D)=>{var X=I=>{try{Y(R.next(I))}catch(M){D(M)}},P=I=>{try{Y(R.throw(I))}catch(M){D(M)}},Y=I=>I.done?L(I.value):Promise.resolve(I.value).then(X,P);Y((R=R.apply(b,A)).next())})),es_ke=es_$e(((qe,Ne)=>{!function(b){if("object"==typeof qe&&typeof Ne<"u")Ne.exports=b();else if("function"==typeof define&&__webpack_require__.amdO)define([],b);else{(typeof window<"u"?window:typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:this).localforage=b()}}((function(){return function L(D,X,P){function Y(H,$){if(!X[H]){if(!D[H]){var m="function"==typeof ve&&ve;if(!$&&m)return m(H,!0);if(I)return I(H,!0);var _=new Error("Cannot find module '"+H+"'");throw _.code="MODULE_NOT_FOUND",_}var B=X[H]={exports:{}};D[H][0].call(B.exports,(function(z){return Y(D[H][1][z]||z)}),B,B.exports,L,D,X,P)}return X[H].exports}for(var I="function"==typeof ve&&ve,M=0;M<P.length;M++)Y(P[M]);return Y}({1:[function(L,D,X){(function(P){var I,Y=P.MutationObserver||P.WebKitMutationObserver;if(Y){var M=0,H=new Y(z),$=P.document.createTextNode("");H.observe($,{characterData:!0}),I=function(){$.data=M=++M%2}}else if(!P.setImmediate&&typeof P.MessageChannel<"u"){var m=new P.MessageChannel;m.port1.onmessage=z,I=function(){m.port2.postMessage(0)}}else I="document"in P&&"onreadystatechange"in P.document.createElement("script")?function(){var F=P.document.createElement("script");F.onreadystatechange=function(){z(),F.onreadystatechange=null,F.parentNode.removeChild(F),F=null},P.document.documentElement.appendChild(F)}:function(){setTimeout(z,0)};var _,B=[];function z(){_=!0;for(var F,k,U=B.length;U;){for(k=B,B=[],F=-1;++F<U;)k[F]();U=B.length}_=!1}D.exports=function Z(F){1===B.push(F)&&!_&&I()}}).call(this,typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(L,D,X){var P=L(1);function Y(){}var I={},M=["REJECTED"],H=["FULFILLED"],$=["PENDING"];function m(h){if("function"!=typeof h)throw new TypeError("resolver must be a function");this.state=$,this.queue=[],this.outcome=void 0,h!==Y&&Z(this,h)}function _(h,N,E){this.promise=h,"function"==typeof N&&(this.onFulfilled=N,this.callFulfilled=this.otherCallFulfilled),"function"==typeof E&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function B(h,N,E){P((function(){var O;try{O=N(E)}catch(V){return I.reject(h,V)}O===h?I.reject(h,new TypeError("Cannot resolve promise with itself")):I.resolve(h,O)}))}function z(h){var N=h&&h.then;if(h&&("object"==typeof h||"function"==typeof h)&&"function"==typeof N)return function(){N.apply(h,arguments)}}function Z(h,N){var E=!1;function O(J){E||(E=!0,I.reject(h,J))}function V(J){E||(E=!0,I.resolve(h,J))}var Q=F((function j(){N(V,O)}));"error"===Q.status&&O(Q.value)}function F(h,N){var E={};try{E.value=h(N),E.status="success"}catch(O){E.status="error",E.value=O}return E}D.exports=m,m.prototype.catch=function(h){return this.then(null,h)},m.prototype.then=function(h,N){if("function"!=typeof h&&this.state===H||"function"!=typeof N&&this.state===M)return this;var E=new this.constructor(Y);this.state!==$?B(E,this.state===H?h:N,this.outcome):this.queue.push(new _(E,h,N));return E},_.prototype.callFulfilled=function(h){I.resolve(this.promise,h)},_.prototype.otherCallFulfilled=function(h){B(this.promise,this.onFulfilled,h)},_.prototype.callRejected=function(h){I.reject(this.promise,h)},_.prototype.otherCallRejected=function(h){B(this.promise,this.onRejected,h)},I.resolve=function(h,N){var E=F(z,N);if("error"===E.status)return I.reject(h,E.value);var O=E.value;if(O)Z(h,O);else{h.state=H,h.outcome=N;for(var V=-1,j=h.queue.length;++V<j;)h.queue[V].callFulfilled(N)}return h},I.reject=function(h,N){h.state=M,h.outcome=N;for(var E=-1,O=h.queue.length;++E<O;)h.queue[E].callRejected(N);return h},m.resolve=function k(h){return h instanceof this?h:I.resolve(new this(Y),h)},m.reject=function U(h){var N=new this(Y);return I.reject(N,h)},m.all=function ae(h){var N=this;if("[object Array]"!==Object.prototype.toString.call(h))return this.reject(new TypeError("must be an array"));var E=h.length,O=!1;if(!E)return this.resolve([]);for(var V=new Array(E),j=0,Q=-1,J=new this(Y);++Q<E;)ee(h[Q],Q);return J;function ee(oe,a){N.resolve(oe).then((function s(v){V[a]=v,++j===E&&!O&&(O=!0,I.resolve(J,V))}),(function(v){O||(O=!0,I.reject(J,v))}))}},m.race=function re(h){var N=this;if("[object Array]"!==Object.prototype.toString.call(h))return this.reject(new TypeError("must be an array"));var E=h.length,O=!1;if(!E)return this.resolve([]);for(var V=-1,j=new this(Y);++V<E;)Q(h[V]);return j;function Q(J){N.resolve(J).then((function(ee){O||(O=!0,I.resolve(j,ee))}),(function(ee){O||(O=!0,I.reject(j,ee))}))}}},{1:1}],3:[function(L,D,X){(function(P){"function"!=typeof P.Promise&&(P.Promise=L(2))}).call(this,typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(L,D,X){var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var M=function I(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function $(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var o=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}typeof Promise>"u"&&L(3);var m=Promise;function _(e,t){t&&e.then((function(r){t(null,r)}),(function(r){t(r)}))}function B(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function z(e){return"string"!=typeof e&&(es_console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function Z(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var F="local-forage-detect-blob-support",k=void 0,U={},ae=Object.prototype.toString,re="readonly",h="readwrite";function O(e){return"boolean"==typeof k?m.resolve(k):function E(e){return new m((function(t){var r=e.transaction(F,h),o=$([""]);r.objectStore(F).put(o,"key"),r.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)},r.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!i||parseInt(i[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(t){return k=t}))}function V(e){var t=U[e.name],r={};r.promise=new m((function(o,i){r.resolve=o,r.reject=i})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function j(e){var r=U[e.name].deferredOperations.pop();if(r)return r.resolve(),r.promise}function Q(e,t){var o=U[e.name].deferredOperations.pop();if(o)return o.reject(t),o.promise}function J(e,t){return new m((function(r,o){if(U[e.name]=U[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);V(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var n=M.open.apply(M,i);t&&(n.onupgradeneeded=function(f){var u=n.result;try{u.createObjectStore(e.storeName),f.oldVersion<=1&&u.createObjectStore(F)}catch(c){if("ConstraintError"!==c.name)throw c;es_console.warn('The database "'+e.name+'" has been upgraded from version '+f.oldVersion+" to version "+f.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),n.onerror=function(f){f.preventDefault(),o(n.error)},n.onsuccess=function(){var f=n.result;f.onversionchange=function(u){u.target.close()},r(f),j(e)}}))}function ee(e){return J(e,!1)}function oe(e){return J(e,!0)}function a(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==t&&es_console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function v(e){var t=function N(e){for(var t=e.length,r=new ArrayBuffer(t),o=new Uint8Array(r),i=0;i<t;i++)o[i]=e.charCodeAt(i);return r}(atob(e.data));return $([t],{type:e.type})}function p(e){return e&&e.__local_forage_encoded_blob}function g(e){var t=this,r=t._initReady().then((function(){var o=U[t._dbInfo.name];if(o&&o.dbReady)return o.dbReady}));return B(r,e,e),r}function T(e,t,r,o){void 0===o&&(o=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(n){if(o>0&&(!e.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return m.resolve().then((function(){if(!e.db||"NotFoundError"===n.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),oe(e)})).then((function(){return function w(e){V(e);for(var t=U[e.name],r=t.forages,o=0;o<r.length;o++){var i=r[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,ee(e).then((function(n){return e.db=n,a(e)?oe(e):n})).then((function(n){e.db=t.db=n;for(var f=0;f<r.length;f++)r[f]._dbInfo.db=n})).catch((function(n){throw Q(e,n),n}))}(e).then((function(){T(e,t,r,o-1)}))})).catch(r);r(n)}}var cr={_driver:"asyncStorage",_initStorage:function fe(e){var t=this,r={db:null};if(e)for(var o in e)r[o]=e[o];var i=U[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},U[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=g);var n=[];function f(){return m.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==t&&n.push(c._initReady().catch(f))}var l=i.forages.slice(0);return m.all(n).then((function(){return r.db=i.db,ee(r)})).then((function(d){return r.db=d,a(r,t._defaultConfig.version)?oe(r):d})).then((function(d){r.db=i.db=d,t._dbInfo=r;for(var y=0;y<l.length;y++){var S=l[y];S!==t&&(S._dbInfo.db=r.db,S._dbInfo.version=r.version)}}))},_support:function H(){try{if(!M||!M.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function ce(e,t){var r=this,o=new m((function(i,n){r.ready().then((function(){T(r._dbInfo,re,(function(f,u){if(f)return n(f);try{var l=u.objectStore(r._dbInfo.storeName).openCursor(),d=1;l.onsuccess=function(){var y=l.result;if(y){var S=y.value;p(S)&&(S=v(S));var x=e(S,y.key,d++);void 0!==x?i(x):y.continue()}else i()},l.onerror=function(){n(l.error)}}catch(y){n(y)}}))})).catch(n)}));return _(o,t),o},getItem:function ie(e,t){var r=this;e=z(e);var o=new m((function(i,n){r.ready().then((function(){T(r._dbInfo,re,(function(f,u){if(f)return n(f);try{var l=u.objectStore(r._dbInfo.storeName).get(e);l.onsuccess=function(){var d=l.result;void 0===d&&(d=null),p(d)&&(d=v(d)),i(d)},l.onerror=function(){n(l.error)}}catch(d){n(d)}}))})).catch(n)}));return _(o,t),o},setItem:function nr(e,t,r){var o=this;e=z(e);var i=new m((function(n,f){var u;o.ready().then((function(){return u=o._dbInfo,"[object Blob]"===ae.call(t)?O(u.db).then((function(c){return c?t:function s(e){return new m((function(t,r){var o=new FileReader;o.onerror=r,o.onloadend=function(i){var n=btoa(i.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},o.readAsBinaryString(e)}))}(t)})):t})).then((function(c){T(o._dbInfo,h,(function(l,d){if(l)return f(l);try{var y=d.objectStore(o._dbInfo.storeName);null===c&&(c=void 0);var S=y.put(c,e);d.oncomplete=function(){void 0===c&&(c=null),n(c)},d.onabort=d.onerror=function(){var x=S.error?S.error:S.transaction.error;f(x)}}catch(x){f(x)}}))})).catch(f)}));return _(i,r),i},removeItem:function or(e,t){var r=this;e=z(e);var o=new m((function(i,n){r.ready().then((function(){T(r._dbInfo,h,(function(f,u){if(f)return n(f);try{var l=u.objectStore(r._dbInfo.storeName).delete(e);u.oncomplete=function(){i()},u.onerror=function(){n(l.error)},u.onabort=function(){var d=l.error?l.error:l.transaction.error;n(d)}}catch(d){n(d)}}))})).catch(n)}));return _(o,t),o},clear:function ir(e){var t=this,r=new m((function(o,i){t.ready().then((function(){T(t._dbInfo,h,(function(n,f){if(n)return i(n);try{var c=f.objectStore(t._dbInfo.storeName).clear();f.oncomplete=function(){o()},f.onabort=f.onerror=function(){var l=c.error?c.error:c.transaction.error;i(l)}}catch(l){i(l)}}))})).catch(i)}));return _(r,e),r},length:function ar(e){var t=this,r=new m((function(o,i){t.ready().then((function(){T(t._dbInfo,re,(function(n,f){if(n)return i(n);try{var c=f.objectStore(t._dbInfo.storeName).count();c.onsuccess=function(){o(c.result)},c.onerror=function(){i(c.error)}}catch(l){i(l)}}))})).catch(i)}));return _(r,e),r},key:function fr(e,t){var r=this,o=new m((function(i,n){e<0?i(null):r.ready().then((function(){T(r._dbInfo,re,(function(f,u){if(f)return n(f);try{var c=u.objectStore(r._dbInfo.storeName),l=!1,d=c.openKeyCursor();d.onsuccess=function(){var y=d.result;y?0===e||l?i(y.key):(l=!0,y.advance(e)):i(null)},d.onerror=function(){n(d.error)}}catch(y){n(y)}}))})).catch(n)}));return _(o,t),o},keys:function ur(e){var t=this,r=new m((function(o,i){t.ready().then((function(){T(t._dbInfo,re,(function(n,f){if(n)return i(n);try{var c=f.objectStore(t._dbInfo.storeName).openKeyCursor(),l=[];c.onsuccess=function(){var d=c.result;d?(l.push(d.key),d.continue()):o(l)},c.onerror=function(){i(c.error)}}catch(d){i(d)}}))})).catch(i)}));return _(r,e),r},dropInstance:function sr(e,t){t=Z.apply(this,arguments);var i,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var f=e.name===r.name&&this._dbInfo.db?m.resolve(this._dbInfo.db):ee(e).then((function(u){var c=U[e.name],l=c.forages;c.db=u;for(var d=0;d<l.length;d++)l[d]._dbInfo.db=u;return u}));i=e.storeName?f.then((function(u){if(u.objectStoreNames.contains(e.storeName)){var c=u.version+1;V(e);var l=U[e.name],d=l.forages;u.close();for(var y=0;y<d.length;y++){var S=d[y];S._dbInfo.db=null,S._dbInfo.version=c}var x=new m((function(C,K){var W=M.open(e.name,c);W.onerror=function(q){W.result.close(),K(q)},W.onupgradeneeded=function(){W.result.deleteObjectStore(e.storeName)},W.onsuccess=function(){var q=W.result;q.close(),C(q)}}));return x.then((function(C){l.db=C;for(var K=0;K<d.length;K++){var W=d[K];W._dbInfo.db=C,j(W._dbInfo)}})).catch((function(C){throw(Q(e,C)||m.resolve()).catch((function(){})),C}))}})):f.then((function(u){V(e);var c=U[e.name],l=c.forages;u.close();for(var d=0;d<l.length;d++){l[d]._dbInfo.db=null}var S=new m((function(x,C){var K=M.deleteDatabase(e.name);K.onerror=function(){var W=K.result;W&&W.close(),C(K.error)},K.onblocked=function(){es_console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},K.onsuccess=function(){var W=K.result;W&&W.close(),x(W)}}));return S.then((function(x){c.db=x;for(var C=0;C<l.length;C++){j(l[C]._dbInfo)}})).catch((function(x){throw(Q(e,x)||m.resolve()).catch((function(){})),x}))}))}else i=m.reject("Invalid arguments");return _(i,t),i}};var te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Be=/^~~local_forage_type~([^~]+)~/,he="__lfsc__:",_e="arbf",we="blob",We=Object.prototype.toString;function Ke(e){var o,n,f,u,c,t=.75*e.length,r=e.length,i=0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var l=new ArrayBuffer(t),d=new Uint8Array(l);for(o=0;o<r;o+=4)n=te.indexOf(e[o]),f=te.indexOf(e[o+1]),u=te.indexOf(e[o+2]),c=te.indexOf(e[o+3]),d[i++]=n<<2|f>>4,d[i++]=(15&f)<<4|u>>2,d[i++]=(3&u)<<6|63&c;return l}function Ee(e){var o,t=new Uint8Array(e),r="";for(o=0;o<t.length;o+=3)r+=te[t[o]>>2],r+=te[(3&t[o])<<4|t[o+1]>>4],r+=te[(15&t[o+1])<<2|t[o+2]>>6],r+=te[63&t[o+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var Ie={serialize:function vr(e,t){var r="";if(e&&(r=We.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===We.call(e.buffer))){var o,i=he;e instanceof ArrayBuffer?(o=e,i+=_e):(o=e.buffer,"[object Int8Array]"===r?i+="si08":"[object Uint8Array]"===r?i+="ui08":"[object Uint8ClampedArray]"===r?i+="uic8":"[object Int16Array]"===r?i+="si16":"[object Uint16Array]"===r?i+="ur16":"[object Int32Array]"===r?i+="si32":"[object Uint32Array]"===r?i+="ui32":"[object Float32Array]"===r?i+="fl32":"[object Float64Array]"===r?i+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(i+Ee(o))}else if("[object Blob]"===r){var n=new FileReader;n.onload=function(){var f="~~local_forage_type~"+e.type+"~"+Ee(this.result);t(he+we+f)},n.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(f){es_console.error("Couldn't convert value into a JSON string: ",e),t(null,f)}},deserialize:function hr(e){if(e.substring(0,9)!==he)return JSON.parse(e);var o,t=e.substring(13),r=e.substring(9,13);if(r===we&&Be.test(t)){var i=t.match(Be);o=i[1],t=t.substring(i[0].length)}var n=Ke(t);switch(r){case _e:return n;case we:return $([n],{type:o});case"si08":return new Int8Array(n);case"ui08":return new Uint8Array(n);case"uic8":return new Uint8ClampedArray(n);case"si16":return new Int16Array(n);case"ur16":return new Uint16Array(n);case"si32":return new Int32Array(n);case"ui32":return new Uint32Array(n);case"fl32":return new Float32Array(n);case"fl64":return new Float64Array(n);default:throw new Error("Unkown type: "+r)}},stringToBuffer:Ke,bufferToString:Ee};function He(e,t,r,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,o)}function ne(e,t,r,o,i,n){e.executeSql(r,o,i,(function(f,u){u.code===u.SYNTAX_ERR?f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(c,l){l.rows.length?n(c,u):He(c,t,(function(){c.executeSql(r,o,i,n)}),n)}),n):n(f,u)}),n)}function Ve(e,t,r,o){var i=this;e=z(e);var n=new m((function(f,u){i.ready().then((function(){void 0===t&&(t=null);var c=t,l=i._dbInfo;l.serializer.serialize(t,(function(d,y){y?u(y):l.db.transaction((function(S){ne(S,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,d],(function(){f(c)}),(function(x,C){u(C)}))}),(function(S){if(S.code===S.QUOTA_ERR){if(o>0)return void f(Ve.apply(i,[e,c,r,o-1]));u(S)}}))}))})).catch(u)}));return _(n,r),n}var Rr={_driver:"webSQLStorage",_initStorage:function mr(e){var t=this,r={db:null};if(e)for(var o in e)r[o]="string"!=typeof e[o]?e[o].toString():e[o];var i=new m((function(n,f){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(u){return f(u)}r.db.transaction((function(u){He(u,r,(function(){t._dbInfo=r,n()}),(function(c,l){f(l)}))}),f)}));return r.serializer=Ie,i},_support:function lr(){return"function"==typeof openDatabase}(),iterate:function pr(e,t){var r=this,o=new m((function(i,n){r.ready().then((function(){var f=r._dbInfo;f.db.transaction((function(u){ne(u,f,"SELECT * FROM "+f.storeName,[],(function(c,l){for(var d=l.rows,y=d.length,S=0;S<y;S++){var x=d.item(S),C=x.value;if(C&&(C=f.serializer.deserialize(C)),void 0!==(C=e(C,x.key,S+1)))return void i(C)}i()}),(function(c,l){n(l)}))}))})).catch(n)}));return _(o,t),o},getItem:function yr(e,t){var r=this;e=z(e);var o=new m((function(i,n){r.ready().then((function(){var f=r._dbInfo;f.db.transaction((function(u){ne(u,f,"SELECT * FROM "+f.storeName+" WHERE key = ? LIMIT 1",[e],(function(c,l){var d=l.rows.length?l.rows.item(0).value:null;d&&(d=f.serializer.deserialize(d)),i(d)}),(function(c,l){n(l)}))}))})).catch(n)}));return _(o,t),o},setItem:function gr(e,t,r){return Ve.apply(this,[e,t,r,1])},removeItem:function br(e,t){var r=this;e=z(e);var o=new m((function(i,n){r.ready().then((function(){var f=r._dbInfo;f.db.transaction((function(u){ne(u,f,"DELETE FROM "+f.storeName+" WHERE key = ?",[e],(function(){i()}),(function(c,l){n(l)}))}))})).catch(n)}));return _(o,t),o},clear:function _r(e){var t=this,r=new m((function(o,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(f){ne(f,n,"DELETE FROM "+n.storeName,[],(function(){o()}),(function(u,c){i(c)}))}))})).catch(i)}));return _(r,e),r},length:function wr(e){var t=this,r=new m((function(o,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(f){ne(f,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(u,c){var l=c.rows.item(0).c;o(l)}),(function(u,c){i(c)}))}))})).catch(i)}));return _(r,e),r},key:function Er(e,t){var r=this,o=new m((function(i,n){r.ready().then((function(){var f=r._dbInfo;f.db.transaction((function(u){ne(u,f,"SELECT key FROM "+f.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(c,l){var d=l.rows.length?l.rows.item(0).key:null;i(d)}),(function(c,l){n(l)}))}))})).catch(n)}));return _(o,t),o},keys:function Ir(e){var t=this,r=new m((function(o,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(f){ne(f,n,"SELECT key FROM "+n.storeName,[],(function(u,c){for(var l=[],d=0;d<c.rows.length;d++)l.push(c.rows.item(d).key);o(l)}),(function(u,c){i(c)}))}))})).catch(i)}));return _(r,e),r},dropInstance:function Ar(e,t){t=Z.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var i,o=this;return i=e.name?new m((function(n){var f;f=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?n({db:f,storeNames:[e.storeName]}):n(function Sr(e){return new m((function(t,r){e.transaction((function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(i,n){for(var f=[],u=0;u<n.rows.length;u++)f.push(n.rows.item(u).name);t({db:e,storeNames:f})}),(function(i,n){r(n)}))}),(function(o){r(o)}))}))}(f))})).then((function(n){return new m((function(f,u){n.db.transaction((function(c){function l(x){return new m((function(C,K){c.executeSql("DROP TABLE IF EXISTS "+x,[],(function(){C()}),(function(W,q){K(q)}))}))}for(var d=[],y=0,S=n.storeNames.length;y<S;y++)d.push(l(n.storeNames[y]));m.all(d).then((function(){f()})).catch((function(x){u(x)}))}),(function(c){u(c)}))}))})):m.reject("Invalid arguments"),_(i,t),i}};function Ge(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function Tr(){return!function Nr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}()||localStorage.length>0}var zr={_driver:"localStorageWrapper",_initStorage:function Br(e){var r={};if(e)for(var o in e)r[o]=e[o];return r.keyPrefix=Ge(e,this._defaultConfig),Tr()?(this._dbInfo=r,r.serializer=Ie,m.resolve()):m.reject()},_support:function Dr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function Cr(e,t){var r=this,o=r.ready().then((function(){for(var i=r._dbInfo,n=i.keyPrefix,f=n.length,u=localStorage.length,c=1,l=0;l<u;l++){var d=localStorage.key(l);if(0===d.indexOf(n)){var y=localStorage.getItem(d);if(y&&(y=i.serializer.deserialize(y)),void 0!==(y=e(y,d.substring(f),c++)))return y}}}));return _(o,t),o},getItem:function Or(e,t){var r=this;e=z(e);var o=r.ready().then((function(){var i=r._dbInfo,n=localStorage.getItem(i.keyPrefix+e);return n&&(n=i.serializer.deserialize(n)),n}));return _(o,t),o},setItem:function Ur(e,t,r){var o=this;e=z(e);var i=o.ready().then((function(){void 0===t&&(t=null);var n=t;return new m((function(f,u){var c=o._dbInfo;c.serializer.serialize(t,(function(l,d){if(d)u(d);else try{localStorage.setItem(c.keyPrefix+e,l),f(n)}catch(y){("QuotaExceededError"===y.name||"NS_ERROR_DOM_QUOTA_REACHED"===y.name)&&u(y),u(y)}}))}))}));return _(i,r),i},removeItem:function Fr(e,t){var r=this;e=z(e);var o=r.ready().then((function(){var i=r._dbInfo;localStorage.removeItem(i.keyPrefix+e)}));return _(o,t),o},clear:function xr(e){var t=this,r=t.ready().then((function(){for(var o=t._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);0===n.indexOf(o)&&localStorage.removeItem(n)}}));return _(r,e),r},length:function Mr(e){var r=this.keys().then((function(o){return o.length}));return _(r,e),r},key:function Lr(e,t){var r=this,o=r.ready().then((function(){var n,i=r._dbInfo;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(i.keyPrefix.length)),n}));return _(o,t),o},keys:function Pr(e){var t=this,r=t.ready().then((function(){for(var o=t._dbInfo,i=localStorage.length,n=[],f=0;f<i;f++){var u=localStorage.key(f);0===u.indexOf(o.keyPrefix)&&n.push(u.substring(o.keyPrefix.length))}return n}));return _(r,e),r},dropInstance:function Yr(e,t){if(t=Z.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var i,o=this;return i=e.name?new m((function(n){e.storeName?n(Ge(e,o._defaultConfig)):n(e.name+"/")})).then((function(n){for(var f=localStorage.length-1;f>=0;f--){var u=localStorage.key(f);0===u.indexOf(n)&&localStorage.removeItem(u)}})):m.reject("Invalid arguments"),_(i,t),i}},Wr=function(t,r){return t===r||"number"==typeof t&&"number"==typeof r&&isNaN(t)&&isNaN(r)},Kr=function(t,r){for(var o=t.length,i=0;i<o;){if(Wr(t[i],r))return!0;i++}return!1},je=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},le={},Xe={},ue={INDEXEDDB:cr,WEBSQL:Rr,LOCALSTORAGE:zr},Hr=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],me=["dropInstance"],Se=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(me),Vr={description:"",driver:Hr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Gr(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function Ae(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(je(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var jr=function(){function e(t){for(var r in function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ue)if(ue.hasOwnProperty(r)){var o=ue[r],i=o._driver;this[r]=i,le[i]||this.defineDriver(o)}this._defaultConfig=Ae({},Vr),this._config=Ae({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(r){if("object"===(typeof r>"u"?"undefined":P(r))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in r){if("storeName"===o&&(r[o]=r[o].replace(/\W/g,"_")),"version"===o&&"number"!=typeof r[o])return new Error("Database version must be a number.");this._config[o]=r[o]}return!("driver"in r)||!r.driver||this.setDriver(this._config.driver)}return"string"==typeof r?this._config[r]:this._config},e.prototype.defineDriver=function(r,o,i){var n=new m((function(f,u){try{var c=r._driver,l=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!r._driver)return void u(l);for(var d=Se.concat("_initStorage"),y=0,S=d.length;y<S;y++){var x=d[y];if((!Kr(me,x)||r[x])&&"function"!=typeof r[x])return void u(l)}!function(){for(var de=function(Jr){return function(){var $r=new Error("Method "+Jr+" is not implemented by the current driver"),Qe=m.reject($r);return _(Qe,arguments[arguments.length-1]),Qe}},Re=0,Qr=me.length;Re<Qr;Re++){var De=me[Re];r[De]||(r[De]=de(De))}}();var W=function(de){le[c]&&es_console.info("Redefining LocalForage driver: "+c),le[c]=r,Xe[c]=de,f()};"_support"in r?r._support&&"function"==typeof r._support?r._support().then(W,u):W(!!r._support):W(!0)}catch(q){u(q)}}));return B(n,o,i),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(r,o,i){var n=le[r]?m.resolve(le[r]):m.reject(new Error("Driver not found."));return B(n,o,i),n},e.prototype.getSerializer=function(r){var o=m.resolve(Ie);return B(o,r),o},e.prototype.ready=function(r){var o=this,i=o._driverSet.then((function(){return null===o._ready&&(o._ready=o._initDriver()),o._ready}));return B(i,r,r),i},e.prototype.setDriver=function(r,o,i){var n=this;je(r)||(r=[r]);var f=this._getSupportedDrivers(r);function u(){n._config.driver=n.driver()}function c(y){return n._extend(y),u(),n._ready=n._initStorage(n._config),n._ready}var d=null!==this._driverSet?this._driverSet.catch((function(){return m.resolve()})):m.resolve();return this._driverSet=d.then((function(){var y=f[0];return n._dbInfo=null,n._ready=null,n.getDriver(y).then((function(S){n._driver=S._driver,u(),n._wrapLibraryMethodsWithReady(),n._initDriver=function l(y){return function(){var S=0;return function x(){for(;S<y.length;){var C=y[S];return S++,n._dbInfo=null,n._ready=null,n.getDriver(C).then(c).catch(x)}u();var K=new Error("No available storage method found.");return n._driverSet=m.reject(K),n._driverSet}()}}(f)}))})).catch((function(){u();var y=new Error("No available storage method found.");return n._driverSet=m.reject(y),n._driverSet})),B(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(r){return!!Xe[r]},e.prototype._extend=function(r){Ae(this,r)},e.prototype._getSupportedDrivers=function(r){for(var o=[],i=0,n=r.length;i<n;i++){var f=r[i];this.supports(f)&&o.push(f)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var r=0,o=Se.length;r<o;r++)Gr(this,Se[r])},e.prototype.createInstance=function(r){return new e(r)},e}(),Xr=new jr;D.exports=Xr},{3:3}]},{},[4])(4)}))})),rr=es_$e(((ye,er)=>{!function(b,A){"object"==typeof ye&&typeof er<"u"?A(ye):"function"==typeof define&&__webpack_require__.amdO?define("localforage-driver-memory",["exports"],A):A(b.LocalforageDriverMemory={})}(typeof self<"u"?self:ye,(function(b){var D=/^~~local_forage_type~([^~]+)~/,Y=Object.prototype.toString;function I(a){var s=.75*a.length,v=a.length;"="===a[a.length-1]&&(s--,"="===a[a.length-2]&&s--);for(var p=new ArrayBuffer(s),g=new Uint8Array(p),w=0,T=0;w<v;w+=4){var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[w]),fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[w+1]),ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[w+2]),ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[w+3]);g[T++]=G<<2|fe>>4,g[T++]=(15&fe)<<4|ie>>2,g[T++]=(3&ie)<<6|63&ce}return p}function M(a){for(var s=new Uint8Array(a),v="",p=0;p<s.length;p+=3)v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[p]>>2],v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&s[p])<<4|s[p+1]>>4],v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&s[p+1])<<2|s[p+2]>>6],v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&s[p+2]];return s.length%3==2?v=v.substring(0,v.length-1)+"=":s.length%3==1&&(v=v.substring(0,v.length-2)+"=="),v}function m(a){var s,v;if(null===a||"object"!=typeof a||"isActiveClone"in a)return a;var p=a instanceof Date?new Date(a):a.constructor();try{for(var g=function R(a){var s="function"==typeof Symbol&&a[Symbol.iterator],v=0;return s?s.call(a):{next:function(){return a&&v>=a.length&&(a=void 0),{value:a&&a[v++],done:!a}}}}(Object.keys(a)),w=g.next();!w.done;w=g.next()){var T=w.value;Object.prototype.hasOwnProperty.call(a,T)&&(a.isActiveClone=null,p[T]=m(a[T]),delete a.isActiveClone)}}catch(G){s={error:G}}finally{try{w&&!w.done&&(v=g.return)&&v.call(g)}finally{if(s)throw s.error}}return p}function _(a,s){return(a.name||s.name)+"/"+(a.storeName||s.storeName)+"/"}function B(a,s){s&&a.then((function(v){s(null,v)}),(function(v){s(v)}))}function z(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function Z(a,s){var g,v=this;if(s=z.apply(this,arguments),!(a="function"!=typeof a&&a||{}).name){var p=this.config();a.name=a.name||p.name,a.storeName=a.storeName||p.storeName}return g=a.name?new Promise((function(w){a.storeName?w(_(a,v._defaultConfig)):w(a.name+"/")})):Promise.reject("Invalid arguments"),{promise:g,callback:s}}function F(a){return"string"!=typeof a&&(es_console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}var k={bufferToString:M,deserialize:function $(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var p,s=a.substring(13),v=a.substring(9,13);if("blob"===v&&D.test(s)){var g=s.match(D);p=g[1],s=s.substring(g[0].length)}var w=I(s);switch(v){case"arbf":return w;case"blob":return function L(a,s){a=a||[],s=s||{};try{return new Blob(a,s)}catch(w){if("TypeError"!==w.name)throw w;for(var p=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),g=0;g<a.length;g+=1)p.append(a[g]);return p.getBlob(s.type)}}([w],{type:p});case"si08":return new Int8Array(w);case"ui08":return new Uint8Array(w);case"uic8":return new Uint8ClampedArray(w);case"si16":return new Int16Array(w);case"ur16":return new Uint16Array(w);case"si32":return new Int32Array(w);case"ui32":return new Uint32Array(w);case"fl32":return new Float32Array(w);case"fl64":return new Float64Array(w);default:throw new Error("Unkown type: "+v)}},serialize:function H(a,s){var v="";if(a&&(v=Y.call(a)),a&&("[object ArrayBuffer]"===v||a.buffer&&"[object ArrayBuffer]"===Y.call(a.buffer))){var p=void 0,g="__lfsc__:";a instanceof ArrayBuffer?(p=a,g+="arbf"):(p=a.buffer,"[object Int8Array]"===v?g+="si08":"[object Uint8Array]"===v?g+="ui08":"[object Uint8ClampedArray]"===v?g+="uic8":"[object Int16Array]"===v?g+="si16":"[object Uint16Array]"===v?g+="ur16":"[object Int32Array]"===v?g+="si32":"[object Uint32Array]"===v?g+="ui32":"[object Float32Array]"===v?g+="fl32":"[object Float64Array]"===v?g+="fl64":s(new Error("Failed to get type for BinaryArray"))),s(g+M(p))}else if("[object Blob]"===v){var w=new FileReader;w.onload=function(){var T="~~local_forage_type~"+a.type+"~"+M(this.result);s("__lfsc__:blob"+T)},w.readAsArrayBuffer(a)}else try{s(JSON.stringify(a))}catch(T){es_console.error("Couldn't convert value into a JSON string: ",a),s(null,T)}},stringToBuffer:I},U={},ae=function(){function a(s){this.kp=s,this.data={}}return a.resolve=function(s){return U[s]||(U[s]=new a(s)),U[s]},a.prototype.clear=function(){this.data={}},a.prototype.drop=function(){this.clear(),delete U[this.kp]},a.prototype.get=function(s){return this.data[s]},a.prototype.key=function(s){return this.keys()[s]},a.prototype.keys=function(){return Object.keys(this.data)},a.prototype.rm=function(s){delete this.data[s]},a.prototype.set=function(s,v){this.data[s]=v},a}();b._support=!0,b._driver="localforage-driver-memory",b._initStorage=function re(a){var s=a?m(a):{},v=_(s,this._defaultConfig),p=ae.resolve(v);return this._dbInfo=s,this._dbInfo.serializer=k,this._dbInfo.keyPrefix=v,this._dbInfo.mStore=p,Promise.resolve()},b.clear=function h(a){var s=this,v=this.ready().then((function(){s._dbInfo.mStore.clear()}));return B(v,a),v},b.dropInstance=function N(a,s){var v=Z.apply(this,arguments),p=v.promise,g=v.callback,w=p.then((function(T){ae.resolve(T).drop()}));return B(w,g),p},b.getItem=function E(a,s){var v=this;a=F(a);var p=this.ready().then((function(){var g=v._dbInfo.mStore.get(a);return null==g?null:v._dbInfo.serializer.deserialize(g)}));return B(p,s),p},b.iterate=function O(a,s){var v=this,p=this.ready().then((function(){for(var g=v._dbInfo.mStore,w=g.keys(),T=0;T<w.length;T++){var G=g.get(w[T]);if(G&&(G=v._dbInfo.serializer.deserialize(G)),void 0!==(G=a(G,w[T],T+1)))return G}}));return B(p,s),p},b.key=function V(a,s){var v=this,p=this.ready().then((function(){var g;try{void 0===(g=v._dbInfo.mStore.key(a))&&(g=null)}catch{g=null}return g}));return B(p,s),p},b.keys=function j(a){var s=this,v=this.ready().then((function(){return s._dbInfo.mStore.keys()}));return B(v,a),v},b.length=function Q(a){var s=this.keys().then((function(v){return v.length}));return B(s,a),s},b.removeItem=function J(a,s){var v=this;a=F(a);var p=this.ready().then((function(){v._dbInfo.mStore.rm(a)}));return B(p,s),p},b.setItem=function ee(a,s,v){var p=this;a=F(a);var g=this.ready().then((function(){void 0===s&&(s=null);var w=s;return new Promise((function(T,G){p._dbInfo.serializer.serialize(s,(function(fe,ie){if(ie)G(ie);else try{p._dbInfo.mStore.set(a,fe),T(w)}catch(ce){G(ce)}}))}))}));return B(g,v),g},Object.defineProperty(b,"__esModule",{value:!0})}))})),es_ge=es_Ze(es_ke()),es_Te=es_Ze(rr()),es_at={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};var es_bt=function In(n,e){return Object.assign(h,e),n}(Te,{platform:"web",sdkName:"magic-sdk",version:"13.6.2",defaultEndpoint:"https://auth.magic.link/",ViewController:class extends Se{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise((R=>{let L=()=>{if(function es_ut(b){let A=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(A.find((R=>R.src.includes(b))))}(encodeURIComponent(this.parameters)))(function mr(){return new q(a.DuplicateIframe,"Duplicate iframes found.")})().log();else{let D=document.createElement("iframe");D.classList.add("magic-iframe"),D.dataset.magicIframeLabel=Ae(this.endpoint).host,D.title="Secure Modal",D.src=Ae(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,function es_ft(b){for(let[A,R]of Object.entries(es_at))b.style[A]=R}(D),document.body.appendChild(D),R(D)}};["loaded","interactive","complete"].includes(document.readyState)?L():window.addEventListener("load",L,!1)})),window.addEventListener("message",(R=>{var L;if(R.origin===this.endpoint&&R.data&&R.data.msgType&&this.messageHandlers.size){R.data.response=null!=(L=R.data.response)?L:{};for(let D of this.messageHandlers.values())D(R)}}))}showOverlay(){return es_se(this,null,(function*(){let R=yield this.iframe;R.style.display="block",this.activeElement=document.activeElement,R.focus()}))}hideOverlay(){return es_se(this,null,(function*(){var L;(yield this.iframe).style.display="none",null!=(L=this.activeElement)&&L.focus&&this.activeElement.focus(),this.activeElement=null}))}_post(R){return es_se(this,null,(function*(){let L=yield this.iframe;if(!L||!L.contentWindow)throw function dr(){return new b(r.ModalNotReady,"Modal is not ready.")}();L.contentWindow.postMessage(R,this.endpoint)}))}},configureStorage:()=>es_se(void 0,null,(function*(){let b=es_ge.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield b.defineDriver(es_Te),yield b.setDriver([es_ge.default.INDEXEDDB,es_ge.default.LOCALSTORAGE,es_Te._driver]),b}))}),es_te=Object.create,es_D=Object.defineProperty,es_ne=Object.getOwnPropertyDescriptor,ie=Object.getOwnPropertyNames,es_ae=Object.getPrototypeOf,es_oe=Object.prototype.hasOwnProperty,es_H=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),es_T=(n,r,s)=>(s=null!=n?es_te(es_ae(n)):{},((n,r,s,m)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let h of ie(r))!es_oe.call(n,h)&&h!==s&&es_D(n,h,{get:()=>r[h],enumerable:!(m=es_ne(r,h))||m.enumerable});return n})(!r&&n&&n.__esModule?s:es_D(s,"default",{value:n,enumerable:!0}),n)),es_C=(n,r,s)=>new Promise(((m,h)=>{var w=p=>{try{d(s.next(p))}catch(u){h(u)}},R=p=>{try{d(s.throw(p))}catch(u){h(u)}},d=p=>p.done?m(p.value):Promise.resolve(p.value).then(w,R);d((s=s.apply(n,r)).next())})),es_k=es_H(((I,F)=>{!function(n,r){"object"==typeof I?F.exports=I=r():"function"==typeof define&&__webpack_require__.amdO?define([],r):n.CryptoJS=r()}(I,(function(){var n=n||function(r){var m=Object.create||function(){function e(){}return function(t){var c;return e.prototype=t,c=new e,e.prototype=null,c}}(),h={},w=h.lib={},R=w.Base={extend:function(e){var t=m(this);return e&&t.mixIn(e),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=w.WordArray=R.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,c=e.words,i=this.sigBytes,g=e.sigBytes;if(this.clamp(),i%4)for(var v=0;v<g;v++){var b=c[v>>>2]>>>24-v%4*8&255;t[i+v>>>2]|=b<<24-(i+v)%4*8}else for(v=0;v<g;v+=4)t[i+v>>>2]=c[v>>>2];return this.sigBytes+=g,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=R.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var g,t=[],c=function(y){var A=987654321,B=4294967295;return function(){var x=((A=36969*(65535&A)+(A>>16)&B)<<16)+(y=18e3*(65535&y)+(y>>16)&B)&B;return x/=4294967296,(x+=.5)*(r.random()>.5?1:-1)}},i=0;i<e;i+=4){var v=c(4294967296*(g||r.random()));g=987654071*v(),t.push(4294967296*v()|0)}return new d.init(t,e)}}),p=h.enc={},u=p.Hex={stringify:function(e){for(var t=e.words,c=e.sigBytes,i=[],g=0;g<c;g++){var v=t[g>>>2]>>>24-g%4*8&255;i.push((v>>>4).toString(16)),i.push((15&v).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,c=[],i=0;i<t;i+=2)c[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(c,t/2)}},_=p.Latin1={stringify:function(e){for(var t=e.words,c=e.sigBytes,i=[],g=0;g<c;g++){var v=t[g>>>2]>>>24-g%4*8&255;i.push(String.fromCharCode(v))}return i.join("")},parse:function(e){for(var t=e.length,c=[],i=0;i<t;i++)c[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(c,t)}},a=p.Utf8={stringify:function(e){try{return decodeURIComponent(escape(_.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(e){return _.parse(unescape(encodeURIComponent(e)))}},f=w.BufferedBlockAlgorithm=R.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=a.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,c=t.words,i=t.sigBytes,g=this.blockSize,b=i/(4*g),y=(b=e?r.ceil(b):r.max((0|b)-this._minBufferSize,0))*g,A=r.min(4*y,i);if(y){for(var B=0;B<y;B+=g)this._doProcessBlock(c,B);var x=c.splice(0,y);t.sigBytes-=A}return new d.init(x,A)},clone:function(){var e=R.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(w.Hasher=f.extend({cfg:R.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,c){return new e.init(c).finalize(t)}},_createHmacHelper:function(e){return function(t,c){return new l.HMAC.init(e,c).finalize(t)}}}),h.algo={});return h}(Math);return n}))})),es_z=es_H(((S,W)=>{!function(n,r){"object"==typeof S?W.exports=S=r(es_k()):"function"==typeof define&&__webpack_require__.amdO?define(["./core"],r):r(n.CryptoJS)}(S,(function(n){return function(r){var s=n,m=s.lib,h=m.WordArray,w=m.Hasher,R=s.algo,d=[],p=[];!function(){function a(e){for(var t=r.sqrt(e),c=2;c<=t;c++)if(!(e%c))return!1;return!0}function f(e){return 4294967296*(e-(0|e))|0}for(var o=2,l=0;l<64;)a(o)&&(l<8&&(d[l]=f(r.pow(o,.5))),p[l]=f(r.pow(o,1/3)),l++),o++}();var u=[],_=R.SHA256=w.extend({_doReset:function(){this._hash=new h.init(d.slice(0))},_doProcessBlock:function(a,f){for(var o=this._hash.words,l=o[0],e=o[1],t=o[2],c=o[3],i=o[4],g=o[5],v=o[6],b=o[7],y=0;y<64;y++){if(y<16)u[y]=0|a[f+y];else{var A=u[y-15],B=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,x=u[y-2],G=(x<<15|x>>>17)^(x<<13|x>>>19)^x>>>10;u[y]=B+u[y-7]+G+u[y-16]}var X=l&e^l&t^e&t,Z=(l<<30|l>>>2)^(l<<19|l>>>13)^(l<<10|l>>>22),P=b+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&g^~i&v)+p[y]+u[y];b=v,v=g,g=i,i=c+P|0,c=t,t=e,e=l,l=P+(Z+X)|0}o[0]=o[0]+l|0,o[1]=o[1]+e|0,o[2]=o[2]+t|0,o[3]=o[3]+c|0,o[4]=o[4]+i|0,o[5]=o[5]+g|0,o[6]=o[6]+v|0,o[7]=o[7]+b|0},_doFinalize:function(){var a=this._data,f=a.words,o=8*this._nDataBytes,l=8*a.sigBytes;return f[l>>>5]|=128<<24-l%32,f[14+(l+64>>>9<<4)]=r.floor(o/4294967296),f[15+(l+64>>>9<<4)]=o,a.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var a=w.clone.call(this);return a._hash=this._hash.clone(),a}});s.SHA256=w._createHelper(_),s.HmacSHA256=w._createHmacHelper(_)}(Math),n.SHA256}))})),es_q=es_H(((U,L)=>{!function(n,r){"object"==typeof U?L.exports=U=r(es_k()):"function"==typeof define&&__webpack_require__.amdO?define(["./core"],r):r(n.CryptoJS)}(U,(function(n){return function(){var r=n,m=r.lib.WordArray;r.enc.Base64={stringify:function(d){var p=d.words,u=d.sigBytes,_=this._map;d.clamp();for(var a=[],f=0;f<u;f+=3)for(var t=(p[f>>>2]>>>24-f%4*8&255)<<16|(p[f+1>>>2]>>>24-(f+1)%4*8&255)<<8|p[f+2>>>2]>>>24-(f+2)%4*8&255,c=0;c<4&&f+.75*c<u;c++)a.push(_.charAt(t>>>6*(3-c)&63));var i=_.charAt(64);if(i)for(;a.length%4;)a.push(i);return a.join("")},parse:function(d){var p=d.length,u=this._map,_=this._reverseMap;if(!_){_=this._reverseMap=[];for(var a=0;a<u.length;a++)_[u.charCodeAt(a)]=a}var f=u.charAt(64);if(f){var o=d.indexOf(f);-1!==o&&(p=o)}return function R(d,p,u){for(var _=[],a=0,f=0;f<p;f++)if(f%4){var o=u[d.charCodeAt(f-1)]<<f%4*2,l=u[d.charCodeAt(f)]>>>6-f%4*2;_[a>>>2]|=(o|l)<<24-a%4*8,a++}return m.create(_,a)}(d,p,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64}))})),es_E=(r=>(r.ParseRedirectResult="magic_oauth_parse_redirect_result",r))(es_E||{}),es_ce=(a=>(a.InvalidRequest="invalid_request",a.InvalidClient="invalid_client",a.InvalidScope="invalid_scope",a.InvalidGrant="invalid_grant",a.UnauthorizedClient="unauthorized_client",a.UnsupportedResponseType="unsupported_response_type",a.UnsupportedGrantType="unsupported_grant_type",a.UnsupportedTokenType="unsupported_token_type",a.AccessDenied="access_denied",a.ServerError="server_error",a.TemporarilyUnavailable="temporarily_unavailable",a))(es_ce||{}),es_j=es_T(es_z()),es_J=es_T(es_q()),es_$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",V="undefined"!=typeof window&&!!window.crypto,es_fe=V&&!!window.crypto.subtle;function es_M(n){let r=s=>s.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");if(n instanceof ArrayBuffer){let s=new Uint8Array(n),m=Array.from(s).map((w=>String.fromCharCode(w))).join("");return r(btoa(m))}return r(es_J.default.stringify(n))}function es_N(n){let r=new Uint8Array(n);if(V)window.crypto.getRandomValues(r);else for(let s=0;s<n;s+=1)r[s]=Math.floor(Math.random()*Math.floor(255));return function es_ue(n){return Array.from(n).map((r=>es_$[r%es_$.length])).join("")}(r)}function es_K(){return es_C(this,null,(function*(){let n=es_N(128),r=es_N(128),s=yield function es_de(n){return es_C(this,null,(function*(){if(es_fe){let r=(new TextEncoder).encode(n);return crypto.subtle.digest("SHA-256",r).then(es_M)}return es_M((0,es_j.default)(n))}))}(r);return{verifier:r,challenge:s,state:n}}))}var es_Y=class extends w.Internal{constructor(){super(...arguments),this.name="oauth",this.config={},this.compat={"magic-sdk":">=2.4.6","@magic-sdk/react-native":!1,"@magic-sdk/react-native-bare":!1,"@magic-sdk/react-native-expo":!1}}loginWithRedirect(s){return this.utils.createPromiEvent((m=>es_C(this,null,(function*(){let{provider:h,query:w}=yield dist_es_pe.call(this,s);window.location.href=new URL(`/v1/oauth2/${h}/start?${w}`,this.sdk.endpoint).href,m()}))))}getRedirectResult(){let s=window.location.search,m=window.location.origin+window.location.pathname;return window.history.replaceState(null,"",m),es_he.call(this,s)}},O="oauth_redirect_metadata";function dist_es_pe(n){return es_C(this,null,(function*(){yield this.utils.storage.removeItem(O);let{provider:r,redirectURI:s,scope:m,loginHint:h}=n,{verifier:w,challenge:R,state:d}=yield es_K(),p=JSON.stringify({verifier:w,state:d});return yield this.utils.storage.setItem(O,p),{query:[`magic_api_key=${encodeURIComponent(this.sdk.apiKey)}`,`magic_challenge=${encodeURIComponent(R)}`,`state=${encodeURIComponent(d)}`,`platform=${encodeURIComponent("web")}`,m&&`scope=${encodeURIComponent(m.join(" "))}`,s&&`redirect_uri=${encodeURIComponent(s)}`,h&&`login_hint=${encodeURIComponent(h)}`].reduce(((_,a)=>a?`${_}&${a}`:_)),provider:r,redirectURI:s}}))}function es_he(n){return this.utils.createPromiEvent(((r,s)=>es_C(this,null,(function*(){var _;let m=yield this.utils.storage.getItem(O),{verifier:h,state:w}=JSON.parse(m);this.utils.storage.removeItem(O);let R=this.utils.createJsonRpcRequestPayload("magic_oauth_parse_redirect_result",[n,h,w]),d=yield this.request(R),p=d,u=d;u.error&&s(this.createError(u.error,null!=(_=u.error_description)?_:"An error occurred.",{errorURI:u.error_uri,provider:u.provider})),r(p)}))))}var WagmiConnector_2f14002d_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js"),thirdweb_dev_wallets_evm_connectors_magic_browser_esm_console=(__webpack_require__("./node_modules/eventemitter3/index.mjs"),__webpack_require__("./node_modules/console-browserify/index.js"));class MagicBaseConnector extends WagmiConnector_2f14002d_browser_esm.W{constructor(config){super(config),(0,defineProperty_350fc508_browser_esm._)(this,"id","magic-link"),(0,defineProperty_350fc508_browser_esm._)(this,"name","Magic Link"),(0,defineProperty_350fc508_browser_esm._)(this,"ready",!0),this.magicOptions=config.options}async getAccount(){const signer=new web3_provider.j(await this.getProvider()).getSigner(),account=await signer.getAddress();return account.startsWith("0x")?account:`0x${account}`}async getProvider(){if(this.provider)return this.provider;const magic=this.getMagicSDK();return this.provider=magic.rpcProvider,this.provider}async getSigner(){const provider=new web3_provider.j(await this.getProvider());return await provider.getSigner()}async isAuthorized(){const magic=this.getMagicSDK();try{return await magic.user.isLoggedIn()}catch(e){return!1}}onAccountsChanged(accounts){0===accounts.length?this.emit("disconnect"):accounts[0]&&this.emit("change",{account:lib_esm.getAddress(accounts[0])})}onChainChanged(chainId){const id=(0,normalizeChainId_1fb9aedf_browser_esm.n)(chainId),unsupported=this.isChainUnsupported(id);this.emit("change",{chain:{id,unsupported}})}onDisconnect(){this.emit("disconnect")}async disconnect(){const magic=this.getMagicSDK();await magic.user.logout()}}class MagicAuthConnector extends MagicBaseConnector{constructor(config){super(config),this.magicSdkConfiguration=config.options.magicSdkConfiguration,this._type=config.options.type,this.oauthProviders=config.options.oauthOptions?.providers||[],this.oauthRedirectURI=config.options.oauthOptions?.redirectURI}async connect(options){if(!this.magicOptions.apiKey)throw new Error("Magic API Key is not provided.");try{options.chainId&&this.initializeMagicSDK({chainId:options.chainId});const provider=await this.getProvider();this.setupListeners(),this.emit("message",{type:"connecting"});const isAuthenticated=await this.isAuthorized();let chainId;try{chainId=await this.getChainId()}catch(e){chainId=0}if(this._connectedChainId=chainId,isAuthenticated)return{provider,chain:{id:chainId,unsupported:!1},account:await this.getAccount()};const magic=this.getMagicSDK();if("connect"===this._type)("email"in options||"phoneNumber"in options)&&thirdweb_dev_wallets_evm_connectors_magic_browser_esm_console.warn("Passing email or phoneNumber is not required for Magic Connect"),await magic.wallet.connectWithUI();else if("oauthProvider"in options)await magic.oauth.loginWithRedirect({provider:options.oauthProvider,redirectURI:this.oauthRedirectURI||window.location.href}),await new Promise((res=>{setTimeout(res,1e4)}));else if("email"in options)await magic.auth.loginWithMagicLink({email:options.email,showUI:!0});else{if(!("phoneNumber"in options))throw new Error("Invalid options: Either provide and email, phoneNumber or oauthProvider when using Magic Auth");await magic.auth.loginWithSMS({phoneNumber:options.phoneNumber})}const signer=await this.getSigner();let account=await signer.getAddress();return account.startsWith("0x")||(account=`0x${account}`),{account,chain:{id:chainId,unsupported:!1},provider}}catch(error){throw thirdweb_dev_wallets_evm_connectors_magic_browser_esm_console.error(error),new Error("Something went wrong")}}async getChainId(){const networkOptions=this.magicSdkConfiguration?.network;if("object"==typeof networkOptions){const chainID=networkOptions.chainId;if(chainID)return(0,normalizeChainId_1fb9aedf_browser_esm.n)(chainID)}throw new Error("Chain ID is not defined")}initializeMagicSDK(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const options={...this.magicSdkConfiguration,extensions:[new es_Y]};if(chainId){const chain=this.chains.find((c=>c.chainId===chainId));chain&&(options.network={rpcUrl:chain.rpc[0]||"",chainId:chain.chainId})}return this.magicSDK=new es_bt(this.magicOptions.apiKey,options),this.provider=this.magicSDK.rpcProvider,this.magicSDK}getMagicSDK(){return this.magicSDK?this.magicSDK:this.initializeMagicSDK()}async setupListeners(){const provider=await this.getProvider();provider.on("accountsChanged",this.onAccountsChanged),provider.on("chainChanged",this.onChainChanged),provider.on("disconnect",this.onDisconnect)}async switchChain(chainId){const chain=this.chains.find((c=>c.chainId===chainId));if(!chain)throw new Error("Chain not found");return this._connectedChainId!==chainId&&this.initializeMagicSDK({chainId}),chain}}}}]);