"use strict";(self.webpackChunkan_onchain_app_in_100_components=self.webpackChunkan_onchain_app_in_100_components||[]).push([[5162],{"./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>WagmiConnector});var _thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@thirdweb-dev/chains/dist/thirdweb-dev-chains.esm.js"),eventemitter3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/eventemitter3/index.mjs");class WagmiConnector extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__.A{constructor(_ref){let{chains=_thirdweb_dev_chains__WEBPACK_IMPORTED_MODULE_1__.k9b,options}=_ref;super(),this.chains=chains,this.options=options}getBlockExplorerUrls(chain){const explorers=chain.explorers?.map((x=>x.url))??[];return explorers.length>0?explorers:void 0}isChainUnsupported(chainId){return!this.chains.some((x=>x.chainId===chainId))}updateChains(chains){this.chains=chains}}},"./node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AddChainError,C:()=>ChainNotConfiguredError,R:()=>ResourceUnavailableError,S:()=>SwitchChainError,U:()=>UserRejectedRequestError,a:()=>ConnectorNotFoundError});var _defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js");class RpcError extends Error{constructor(message,options){const{cause,code,data}=options;if(!Number.isInteger(code))throw new Error('"code" must be an integer.');if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string.');super(`${message}. Cause: ${JSON.stringify(cause)}`),this.cause=cause,this.code=code,this.data=data}}class ProviderRpcError extends RpcError{constructor(message,options){const{cause,code,data}=options;if(!(Number.isInteger(code)&&code>=1e3&&code<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(message,{cause,code,data})}}class AddChainError extends Error{constructor(){super(...arguments),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","AddChainError"),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"message","Error adding chain")}}class ChainNotConfiguredError extends Error{constructor(_ref){let{chainId,connectorId}=_ref;super(`Chain "${chainId}" not configured for connector "${connectorId}".`),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ChainNotConfigured")}}class ConnectorNotFoundError extends Error{constructor(){super(...arguments),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ConnectorNotFoundError"),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"message","Connector not found")}}class ResourceUnavailableError extends RpcError{constructor(cause){super("Resource unavailable",{cause,code:-32002}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","ResourceUnavailable")}}class SwitchChainError extends ProviderRpcError{constructor(cause){super("Error switching chain",{cause,code:4902}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","SwitchChainError")}}class UserRejectedRequestError extends ProviderRpcError{constructor(cause){super("User rejected request",{cause,code:4001}),(0,_defineProperty_350fc508_browser_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(this,"name","UserRejectedRequestError")}}},"./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function normalizeChainId(chainId){return"string"==typeof chainId?Number.parseInt(chainId,"0x"===chainId.trim().substring(0,2)?16:10):"bigint"==typeof chainId?Number(chainId):chainId}__webpack_require__.d(__webpack_exports__,{n:()=>normalizeChainId})},"./node_modules/@thirdweb-dev/wallets/evm/connectors/blocto/dist/thirdweb-dev-wallets-evm-connectors-blocto.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BloctoConnector:()=>BloctoConnector});var KEY_SESSION,CHAIN,defineProperty_350fc508_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/defineProperty-350fc508.browser.esm.js"),WagmiConnector_2f14002d_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/WagmiConnector-2f14002d.browser.esm.js"),errors_9edc08c8_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/errors-9edc08c8.browser.esm.js");function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}function invariant(condition,format){if(!condition)throw new Error(format)}"function"==typeof SuppressedError&&SuppressedError,function(KEY_SESSION){KEY_SESSION.prod="BLOCTO_SDK",KEY_SESSION.dev="BLOCTO_SDK_DEV",KEY_SESSION.staging="BLOCTO_SDK_STAGING"}(KEY_SESSION||(KEY_SESSION={})),function(CHAIN){CHAIN.ETHEREUM="ethereum",CHAIN.APTOS="aptos"}(CHAIN||(CHAIN={}));const ETH_RPC_LIST={56:"https://bsc-dataseed1.binance.org",97:"https://data-seed-prebsc-1-s1.binance.org:8545",137:"https://rpc-mainnet.maticvigil.com/",80002:"https://rpc-amoy.polygon.technology/",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",42161:"https://arb1.arbitrum.io/rpc",421614:"https://arbitrum-sepolia.blockpi.network/v1/rpc/public",10:"https://mainnet.optimism.io",11155420:"https://sepolia.optimism.io",8453:"https://mainnet.base.org",84532:"https://sepolia.base.org",7777777:"https://rpc.zora.energy",999999999:"https://sepolia.rpc.zora.energy",534352:"https://rpc.scroll.io",534351:"https://sepolia-rpc.scroll.io",59144:"https://rpc.linea.build",1261120:"https://rpc.startale.com/zkatana",81457:"https://rpc.blast.io",168587773:"https://sepolia.blast.io"},ETH_ENV_WALLET_SERVER_MAPPING={prod:"https://wallet-v2.blocto.app",staging:"https://wallet-v2-staging.blocto.app",dev:"https://wallet-v2-dev.blocto.app"},ETH_SESSION_KEY_MAPPING={prod:KEY_SESSION.prod,staging:KEY_SESSION.staging,dev:KEY_SESSION.dev},APT_SESSION_KEY_MAPPING={1:KEY_SESSION.prod,2:KEY_SESSION.dev,3:KEY_SESSION.dev,4:KEY_SESSION.dev,5:KEY_SESSION.staging},APT_CHAIN_ID_SERVER_MAPPING={1:"https://wallet-v2.blocto.app",2:"https://wallet-v2-dev.blocto.app",3:"https://wallet-v2-dev.blocto.app",4:"https://wallet-v2-dev.blocto.app",5:"https://wallet-v2-staging.blocto.app"};var WalletAdapterNetwork;!function(WalletAdapterNetwork){WalletAdapterNetwork.Mainnet="mainnet",WalletAdapterNetwork.Testnet="testnet",WalletAdapterNetwork.Devnet="devnet",WalletAdapterNetwork.Testing="testing",WalletAdapterNetwork.Premainnet="premainnet"}(WalletAdapterNetwork||(WalletAdapterNetwork={}));const APT_CHAIN_ID_NAME_MAPPING={1:WalletAdapterNetwork.Mainnet,2:WalletAdapterNetwork.Testnet,3:WalletAdapterNetwork.Devnet,4:WalletAdapterNetwork.Testing,5:WalletAdapterNetwork.Premainnet},APT_CHAIN_ID_RPC_MAPPING={1:"https://fullnode.mainnet.aptoslabs.com/v1",2:"https://fullnode.testnet.aptoslabs.com/v1",3:"https://fullnode.devnet.aptoslabs.com/v1",4:"",5:"https://premainnet.aptosdev.com/v1"},EIP1193_EVENTS=["connect","disconnect","message","chainChanged","accountsChanged"],DEFAULT_APP_ID="00000000-0000-0000-0000-000000000000";class BloctoProvider{constructor(){this.isBlocto=!0,this.isConnecting=!1,this.eventListeners={},this.off=this.removeListener,EIP1193_EVENTS.forEach((event=>{this.eventListeners[event]=[]})),this.appId=DEFAULT_APP_ID}request(payload){return __awaiter(this,void 0,void 0,(function*(){}))}on(event,listener){EIP1193_EVENTS.includes(event)&&this.eventListeners[event].push(listener)}once(){}removeListener(event,listener){const index=this.eventListeners[event].findIndex((item=>item===listener));-1!==index&&this.eventListeners[event].splice(index,1)}}function createFrame(url){const frame=document.createElement("iframe");return frame.setAttribute("src",url),frame.setAttribute("style","width:100vw;height:100%;position:fixed;top:0;left:0;z-index:2147483646;border:none;box-sizing:border-box;color-scheme:light;inset:0px;display:block;pointer-events:auto;"),frame}function attachFrame(frame){document.body.appendChild(frame)}function detatchFrame(frame){const parentNode=frame&&frame.parentNode;parentNode&&parentNode.removeChild instanceof Function&&parentNode.removeChild(frame)}var addSelfRemovableHandler=(eventType,handler,target=window)=>{target.addEventListener(eventType,(function listener(e){handler(e,(()=>target.removeEventListener(eventType,listener)))}))};const memoryStorage="undefined"!=typeof window?window.memoryStorage:new class MemoryStorage{constructor(){this.storage={}}getItem(key){return this[key]||null}setItem(key,value){this.storage[key]=value}removeItem(key){delete this.storage[key]}},storage=(()=>{if("undefined"==typeof window)return!1;try{window.sessionStorage.setItem("local_storage_supported","1");const result=window.sessionStorage.getItem("local_storage_supported");return window.sessionStorage.removeItem("local_storage_supported"),"1"===result}catch(error){return!1}})()?window.sessionStorage:memoryStorage,getItem=(key,defaultValue=null)=>{const value=storage.getItem(key);try{return value&&JSON.parse(value)||defaultValue}catch(SyntaxError){return value||defaultValue}},setItem=(key,value)=>storage.setItem(key,"string"==typeof value?value:JSON.stringify(value)),removeItem=key=>{setItem(key,""),storage.removeItem(key)},getAccountStorage=key=>{const rawAccountStorage=getItem(key,null);return rawAccountStorage?(new Date).getTime()>rawAccountStorage.expiry||"0.10.2"!==rawAccountStorage.v?(removeItem(key),null):null==rawAccountStorage?void 0:rawAccountStorage.data:null},setAccountStorage=(key,data,expiry)=>{var _a,_b,_c;const rawAccountStorage=getItem(key),newAccountStorage={data:{code:(null==data?void 0:data.code)||(null===(_a=null==rawAccountStorage?void 0:rawAccountStorage.data)||void 0===_a?void 0:_a.code),accounts:Object.assign(Object.assign({},null===(_b=null==rawAccountStorage?void 0:rawAccountStorage.data)||void 0===_b?void 0:_b.accounts),null==data?void 0:data.accounts),evm:Object.assign(Object.assign({},null===(_c=null==rawAccountStorage?void 0:rawAccountStorage.data)||void 0===_c?void 0:_c.evm),null==data?void 0:data.evm)},expiry:expiry||(null==rawAccountStorage?void 0:rawAccountStorage.expiry)||(new Date).getTime()+864e5,v:"0.10.2"};setItem(key,newAccountStorage)},getChainAddress=(key,chain)=>{var _a,_b,_c;return(null===(_a=getAccountStorage(key))||void 0===_a?void 0:_a.code)?(null===(_c=null===(_b=getAccountStorage(key))||void 0===_b?void 0:_b.accounts)||void 0===_c?void 0:_c[chain])||null:(removeItem(key),null)},getEvmAddress=(key,chain)=>{var _a,_b,_c;return(null===(_a=getAccountStorage(key))||void 0===_a?void 0:_a.code)?(null===(_c=null===(_b=getAccountStorage(key))||void 0===_b?void 0:_b.evm)||void 0===_c?void 0:_c[chain])||null:(removeItem(key),null)},setEvmAddress=(key,chain,accounts)=>{setAccountStorage(key,{evm:{[chain]:accounts}})},removeAllEvmAddress=key=>{const newAccountStorage=getItem(key);newAccountStorage&&(newAccountStorage.data.evm={},setItem(key,newAccountStorage))};function responseSessionGuard(response,key,disconnectHandler){return __awaiter(this,void 0,void 0,(function*(){if(403!==response.status&&401!==response.status||(disconnectHandler&&disconnectHandler(),removeItem(key)),!response.ok){const data=yield response.json(),e=new Error((null==data?void 0:data.message)||"unknown error");throw e.error_code=null==data?void 0:data.error_code,e}return response.json()}))}const isEmail=value=>/\S+@\S+\.\S+/.test(value);var ERROR_MESSAGE;!function(ERROR_MESSAGE){ERROR_MESSAGE.INVALID_TRANSACTION="Invalid transaction",ERROR_MESSAGE.INVALID_TRANSACTIONS="Invalid transactions",ERROR_MESSAGE.INVALID_TRANSACTION_VALUE='Transaction params "value" should be hex-encoded string'}(ERROR_MESSAGE||(ERROR_MESSAGE={}));var global$1=void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}function fromByteArray(uint8){var tmp;inited||init();for(var len=uint8.length,extraBytes=len%3,output="",parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));return 1===extraBytes?(tmp=uint8[len-1],output+=lookup[tmp>>2],output+=lookup[tmp<<4&63],output+="=="):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],output+=lookup[tmp>>10],output+=lookup[tmp>>4&63],output+=lookup[tmp<<2&63],output+="="),parts.push(output),parts.join("")}function read(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)}function write(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}var blocto_sdk_module_toString={}.toString,isArray=Array.isArray||function(arr){return"[object Array]"==blocto_sdk_module_toString.call(arr)};function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function fromArrayBuffer(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function fromString(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding);that=createBuffer(that,length);var actual=that.write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function fromObject(that,obj){if(internalIsBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length||obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||function isnan(val){return val!=val}(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function internalIsBuffer(b){return!(null==b||!b._isBuffer)}function byteLength(string,encoding){if(internalIsBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),internalIsBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)hi=(c=str.charCodeAt(i))>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?fromByteArray(buf):fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}Buffer.TYPED_ARRAY_SUPPORT=void 0===global$1.TYPED_ARRAY_SUPPORT||global$1.TYPED_ARRAY_SUPPORT,kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]),Buffer.alloc=function(size,fill,encoding){return function alloc(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function isBuffer(obj){return null!=obj&&(!!obj._isBuffer||isFastBuffer(obj)||function isSlowBuffer(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isFastBuffer(obj.slice(0,0))}(obj))},Buffer.compare=function compare(a,b){if(!internalIsBuffer(a)||!internalIsBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!internalIsBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(b){if(!internalIsBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function inspect(){var str="";return this.length>0&&(str=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!internalIsBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!internalIsBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function slice(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul|0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul|0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function fill(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=internalIsBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return function toByteArray(b64){var i,j,l,tmp,placeHolders,arr;inited||init();var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");placeHolders="="===b64[len-2]?2:"="===b64[len-1]?1:0,arr=new Arr(3*len/4-placeHolders),l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[L++]=tmp>>16&255,arr[L++]=tmp>>8&255,arr[L++]=255&tmp;return 2===placeHolders?(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[L++]=255&tmp):1===placeHolders&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[L++]=tmp>>8&255,arr[L++]=255&tmp),arr}(function base64clean(str){if((str=function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isFastBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}const isHexString=hex=>"string"==typeof hex&&/^0x[0-9A-Fa-f]*$/.test(hex),isValidTransaction=transaction=>transaction&&"object"==typeof transaction&&"from"in transaction?transaction.value&&!isHexString(transaction.value)?{isValid:!1,invalidMsg:ERROR_MESSAGE.INVALID_TRANSACTION_VALUE}:{isValid:!0}:{isValid:!1,invalidMsg:ERROR_MESSAGE.INVALID_TRANSACTION};function getEvmSupport(){return __awaiter(this,void 0,void 0,(function*(){const{networks}=yield fetch("https://api.blocto.app/networks/evm").then((response=>response.json()));return networks.reduce(((a,v)=>Object.assign(Object.assign({},a),{[v.chain_id]:v})),{})}))}var dist={};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _construct(Parent,args,Class){return _construct=function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}var classes={},fastSafeStringify=stringify;stringify.default=stringify,stringify.stable=deterministicStringify,stringify.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify(obj,replacer,spacer,options){var res;void 0===options&&(options=defaultOptions()),decirc(obj,"",0,[],void 0,0,options);try{res=0===replacerStack.length?JSON.stringify(obj,replacer,spacer):JSON.stringify(obj,replaceGetterValues(replacer),spacer)}catch(_){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==arr.length;){var part=arr.pop();4===part.length?Object.defineProperty(part[0],part[1],part[3]):part[0][part[1]]=part[2]}}return res}function setReplace(replace,val,k,parent){var propertyDescriptor=Object.getOwnPropertyDescriptor(parent,k);void 0!==propertyDescriptor.get?propertyDescriptor.configurable?(Object.defineProperty(parent,k,{value:replace}),arr.push([parent,k,val,propertyDescriptor])):replacerStack.push([val,k,replace]):(parent[k]=replace,arr.push([parent,k,val]))}function decirc(val,k,edgeIndex,stack,parent,depth,options){var i;if(depth+=1,"object"===_typeof(val)&&null!==val){for(i=0;i<stack.length;i++)if(stack[i]===val)return void setReplace(CIRCULAR_REPLACE_NODE,val,k,parent);if(void 0!==options.depthLimit&&depth>options.depthLimit)return void setReplace(LIMIT_REPLACE_NODE,val,k,parent);if(void 0!==options.edgesLimit&&edgeIndex+1>options.edgesLimit)return void setReplace(LIMIT_REPLACE_NODE,val,k,parent);if(stack.push(val),Array.isArray(val))for(i=0;i<val.length;i++)decirc(val[i],i,i,stack,val,depth,options);else{var keys=Object.keys(val);for(i=0;i<keys.length;i++){var key=keys[i];decirc(val[key],key,i,stack,val,depth,options)}}stack.pop()}}function compareFunction(a,b){return a<b?-1:a>b?1:0}function deterministicStringify(obj,replacer,spacer,options){void 0===options&&(options=defaultOptions());var res,tmp=deterministicDecirc(obj,"",0,[],void 0,0,options)||obj;try{res=0===replacerStack.length?JSON.stringify(tmp,replacer,spacer):JSON.stringify(tmp,replaceGetterValues(replacer),spacer)}catch(_){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==arr.length;){var part=arr.pop();4===part.length?Object.defineProperty(part[0],part[1],part[3]):part[0][part[1]]=part[2]}}return res}function deterministicDecirc(val,k,edgeIndex,stack,parent,depth,options){var i;if(depth+=1,"object"===_typeof(val)&&null!==val){for(i=0;i<stack.length;i++)if(stack[i]===val)return void setReplace(CIRCULAR_REPLACE_NODE,val,k,parent);try{if("function"==typeof val.toJSON)return}catch(_){return}if(void 0!==options.depthLimit&&depth>options.depthLimit)return void setReplace(LIMIT_REPLACE_NODE,val,k,parent);if(void 0!==options.edgesLimit&&edgeIndex+1>options.edgesLimit)return void setReplace(LIMIT_REPLACE_NODE,val,k,parent);if(stack.push(val),Array.isArray(val))for(i=0;i<val.length;i++)deterministicDecirc(val[i],i,i,stack,val,depth,options);else{var tmp={},keys=Object.keys(val).sort(compareFunction);for(i=0;i<keys.length;i++){var key=keys[i];deterministicDecirc(val[key],key,i,stack,val,depth,options),tmp[key]=val[key]}if(void 0===parent)return tmp;arr.push([parent,k,val]),parent[k]=tmp}stack.pop()}}function replaceGetterValues(replacer){return replacer=void 0!==replacer?replacer:function(k,v){return v},function(key,val){if(replacerStack.length>0)for(var i=0;i<replacerStack.length;i++){var part=replacerStack[i];if(part[1]===key&&part[0]===val){val=part[2],replacerStack.splice(i,1);break}}return replacer.call(this,key,val)}}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}Object.defineProperty(classes,"__esModule",{value:!0}),classes.EthereumProviderError=classes.EthereumRpcError=void 0;var fast_safe_stringify_1=fastSafeStringify,EthereumRpcError=function(_Error){_inherits(EthereumRpcError,_Error);var _super=_createSuper(EthereumRpcError);function EthereumRpcError(code,message,data){var _this;if(_classCallCheck(this,EthereumRpcError),!Number.isInteger(code))throw new Error('"code" must be an integer.');if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string.');return(_this=_super.call(this,message)).code=code,void 0!==data&&(_this.data=data),_this}return _createClass(EthereumRpcError,[{key:"serialize",value:function serialize(){var serialized={code:this.code,message:this.message};return void 0!==this.data&&(serialized.data=this.data),this.stack&&(serialized.stack=this.stack),serialized}},{key:"toString",value:function toString(){return fast_safe_stringify_1.default(this.serialize(),stringifyReplacer,2)}}]),EthereumRpcError}(_wrapNativeSuper(Error));classes.EthereumRpcError=EthereumRpcError;var EthereumProviderError=function(_EthereumRpcError){_inherits(EthereumProviderError,_EthereumRpcError);var _super2=_createSuper(EthereumProviderError);function EthereumProviderError(code,message,data){if(_classCallCheck(this,EthereumProviderError),!function isValidEthProviderCode(code){return Number.isInteger(code)&&code>=1e3&&code<=4999}(code))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');return _super2.call(this,code,message,data)}return _createClass(EthereumProviderError)}(EthereumRpcError);function stringifyReplacer(_,value){if("[Circular]"!==value)return value}classes.EthereumProviderError=EthereumProviderError;var utils={},errorConstants={};function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(errorConstants,"__esModule",{value:!0}),errorConstants.errorValues=errorConstants.errorCodes=void 0,errorConstants.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},errorConstants.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeError=exports.isValidCode=exports.getMessageFromCode=exports.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var error_constants_1=errorConstants,classes_1=classes,FALLBACK_ERROR_CODE=error_constants_1.errorCodes.rpc.internal,FALLBACK_MESSAGE="Unspecified error message. This is a bug, please report it.",FALLBACK_ERROR={code:FALLBACK_ERROR_CODE,message:getMessageFromCode(FALLBACK_ERROR_CODE)};function getMessageFromCode(code){var fallbackMessage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:FALLBACK_MESSAGE;if(Number.isInteger(code)){var codeString=code.toString();if(hasKey(error_constants_1.errorValues,codeString))return error_constants_1.errorValues[codeString].message;if(isJsonRpcServerError(code))return exports.JSON_RPC_SERVER_ERROR_MESSAGE}return fallbackMessage}function isValidCode(code){if(!Number.isInteger(code))return!1;var codeString=code.toString();return!!error_constants_1.errorValues[codeString]||!!isJsonRpcServerError(code)}function isJsonRpcServerError(code){return code>=-32099&&code<=-32e3}function assignOriginalError(error){return error&&"object"===_typeof(error)&&!Array.isArray(error)?Object.assign({},error):error}function hasKey(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}exports.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",exports.getMessageFromCode=getMessageFromCode,exports.isValidCode=isValidCode,exports.serializeError=function serializeError(error){var _a,_b,_ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$fallbackError=_ref.fallbackError,fallbackError=void 0===_ref$fallbackError?FALLBACK_ERROR:_ref$fallbackError,_ref$shouldIncludeSta=_ref.shouldIncludeStack,shouldIncludeStack=void 0!==_ref$shouldIncludeSta&&_ref$shouldIncludeSta;if(!fallbackError||!Number.isInteger(fallbackError.code)||"string"!=typeof fallbackError.message)throw new Error("Must provide fallback error with integer number code and string message.");if(error instanceof classes_1.EthereumRpcError)return error.serialize();var serialized={};if(error&&"object"===_typeof(error)&&!Array.isArray(error)&&hasKey(error,"code")&&isValidCode(error.code)){var _error=error;serialized.code=_error.code,_error.message&&"string"==typeof _error.message?(serialized.message=_error.message,hasKey(_error,"data")&&(serialized.data=_error.data)):(serialized.message=getMessageFromCode(serialized.code),serialized.data={originalError:assignOriginalError(error)})}else{serialized.code=fallbackError.code;var message=null===(_a=error)||void 0===_a?void 0:_a.message;serialized.message=message&&"string"==typeof message?message:fallbackError.message,serialized.data={originalError:assignOriginalError(error)}}var stack=null===(_b=error)||void 0===_b?void 0:_b.stack;return shouldIncludeStack&&error&&stack&&"string"==typeof stack&&(serialized.stack=stack),serialized}}(utils);var errors={};Object.defineProperty(errors,"__esModule",{value:!0}),errors.ethErrors=void 0;var _EthereumProvider_instances,_EthereumProvider_getBloctoProperties,_EthereumProvider_addToSwitchable,_EthereumProvider_checkNetworkMatched,_EthereumProvider_createAuthzFrame,classes_1=classes,utils_1=utils,error_constants_1=errorConstants;function getEthJsonRpcError(code,arg){var _parseOpts2=_slicedToArray(parseOpts(arg),2),message=_parseOpts2[0],data=_parseOpts2[1];return new classes_1.EthereumRpcError(code,message||utils_1.getMessageFromCode(code),data)}function getEthProviderError(code,arg){var _parseOpts4=_slicedToArray(parseOpts(arg),2),message=_parseOpts4[0],data=_parseOpts4[1];return new classes_1.EthereumProviderError(code,message||utils_1.getMessageFromCode(code),data)}function parseOpts(arg){if(arg){if("string"==typeof arg)return[arg];if("object"===_typeof(arg)&&!Array.isArray(arg)){var message=arg.message,data=arg.data;if(message&&"string"!=typeof message)throw new Error("Must specify string message.");return[message||void 0,data]}}return[]}function parseChainId(chainId){return chainId?"number"==typeof chainId?chainId:chainId.startsWith("0x")?parseInt(chainId,16):parseInt(chainId,10):1}errors.ethErrors={rpc:{parse:function parse(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.parse,arg)},invalidRequest:function invalidRequest(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidRequest,arg)},invalidParams:function invalidParams(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidParams,arg)},methodNotFound:function methodNotFound(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotFound,arg)},internal:function internal(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.internal,arg)},server:function server(opts){if(!opts||"object"!==_typeof(opts)||Array.isArray(opts))throw new Error("Ethereum RPC Server errors must provide single object argument.");var code=opts.code;if(!Number.isInteger(code)||code>-32005||code<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError(code,opts)},invalidInput:function invalidInput(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidInput,arg)},resourceNotFound:function resourceNotFound(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceNotFound,arg)},resourceUnavailable:function resourceUnavailable(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceUnavailable,arg)},transactionRejected:function transactionRejected(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.transactionRejected,arg)},methodNotSupported:function methodNotSupported(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotSupported,arg)},limitExceeded:function limitExceeded(arg){return getEthJsonRpcError(error_constants_1.errorCodes.rpc.limitExceeded,arg)}},provider:{userRejectedRequest:function userRejectedRequest(arg){return getEthProviderError(error_constants_1.errorCodes.provider.userRejectedRequest,arg)},unauthorized:function unauthorized(arg){return getEthProviderError(error_constants_1.errorCodes.provider.unauthorized,arg)},unsupportedMethod:function unsupportedMethod(arg){return getEthProviderError(error_constants_1.errorCodes.provider.unsupportedMethod,arg)},disconnected:function disconnected(arg){return getEthProviderError(error_constants_1.errorCodes.provider.disconnected,arg)},chainDisconnected:function chainDisconnected(arg){return getEthProviderError(error_constants_1.errorCodes.provider.chainDisconnected,arg)},custom:function custom(opts){if(!opts||"object"!==_typeof(opts)||Array.isArray(opts))throw new Error("Ethereum Provider custom errors must provide single object argument.");var code=opts.code,message=opts.message,data=opts.data;if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string');return new classes_1.EthereumProviderError(code,message,data)}}},function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMessageFromCode=exports.serializeError=exports.EthereumProviderError=exports.EthereumRpcError=exports.ethErrors=exports.errorCodes=void 0;var classes_1=classes;Object.defineProperty(exports,"EthereumRpcError",{enumerable:!0,get:function get(){return classes_1.EthereumRpcError}}),Object.defineProperty(exports,"EthereumProviderError",{enumerable:!0,get:function get(){return classes_1.EthereumProviderError}});var utils_1=utils;Object.defineProperty(exports,"serializeError",{enumerable:!0,get:function get(){return utils_1.serializeError}}),Object.defineProperty(exports,"getMessageFromCode",{enumerable:!0,get:function get(){return utils_1.getMessageFromCode}});var errors_1=errors;Object.defineProperty(exports,"ethErrors",{enumerable:!0,get:function get(){return errors_1.ethErrors}});var error_constants_1=errorConstants;Object.defineProperty(exports,"errorCodes",{enumerable:!0,get:function get(){return error_constants_1.errorCodes}})}(dist);class EthereumProvider extends BloctoProvider{get existedSDK(){if("undefined"!=typeof window)return window.ethereum}constructor(config){var _a;if(super(),_EthereumProvider_instances.add(this),this.networkVersion="1",this.off=this.removeListener,this.injectedWalletServer=config.walletServer,this._blocto={sessionKeyEnv:KEY_SESSION.prod,walletServer:this.injectedWalletServer||"",blockchainName:"",networkType:"",switchableNetwork:{}},this.appId=config.appId||DEFAULT_APP_ID,"chainId"in config){const{chainId,rpc}=config;invariant(chainId,"'chainId' is required"),this.networkVersion=`${parseChainId(chainId)}`,this.chainId=`0x${parseChainId(chainId).toString(16)}`,this.rpc=rpc||ETH_RPC_LIST[this.networkVersion],invariant(this.rpc,"'rpc' is required")}else{const{defaultChainId,switchableChains}=config;invariant(defaultChainId,"'defaultChainId' is required"),this.networkVersion=`${parseChainId(defaultChainId)}`,this.chainId=`0x${parseChainId(defaultChainId).toString(16)}`;const chainConfig=switchableChains.find((chain=>parseChainId(chain.chainId)===parseChainId(defaultChainId)));if(!chainConfig)throw dist.ethErrors.provider.custom({code:1001,message:`Chain ${defaultChainId} is not in switchableChains list`});this.rpc=(null===(_a=chainConfig.rpcUrls)||void 0===_a?void 0:_a[0])||ETH_RPC_LIST[this.networkVersion],invariant(this.rpc,"'rpc' is required"),this._blocto.unloadedNetwork=switchableChains}}send(methodOrPayload,paramsOrCallback){return __awaiter(this,void 0,void 0,(function*(){switch(!0){case paramsOrCallback instanceof Function:return this.sendAsync(methodOrPayload,paramsOrCallback);case"string"==typeof methodOrPayload&&Array.isArray(paramsOrCallback):return this.sendAsync({jsonrpc:"2.0",method:methodOrPayload,params:paramsOrCallback});default:return this.sendAsync(methodOrPayload)}}))}sendAsync(payload,callback){return __awaiter(this,void 0,void 0,(function*(){const separateRequests=payload=>payload.reduce(((acc,request)=>{var _a;return"eth_sendTransaction"===request.method?acc.sendRequests.push(null===(_a=request.params)||void 0===_a?void 0:_a[0]):acc.otherRequests.push(this.request(request)),acc}),{sendRequests:[],otherRequests:[]});function processResponses(payload,responses){const processedResponses=[];let responseIndex=1;return payload.forEach((item=>{const baseResponse=function createBaseResponse(item){return{id:String(item.id),jsonrpc:"2.0",method:item.method}}(item);"eth_sendTransaction"===item.method?(baseResponse.result=responses[0].value,baseResponse.error="fulfilled"!==responses[0].status?responses[0].reason:void 0):responseIndex<responses.length&&(baseResponse.result=responses[responseIndex].value,baseResponse.error="fulfilled"!==responses[responseIndex].status?responses[responseIndex].reason:void 0,responseIndex++),processedResponses.push(baseResponse)})),processedResponses}const handleRequest=new Promise((resolve=>{if(Array.isArray(payload)){const{sendRequests,otherRequests}=separateRequests(payload),batchReqPayload={method:"wallet_sendMultiCallTransaction",params:[sendRequests,!1]},isSendRequestsEmpty=0===sendRequests.length,idBase=Math.floor(1e4*Math.random()),allPromise=isSendRequestsEmpty?[...otherRequests]:[this.request(batchReqPayload),...otherRequests];Promise.allSettled(allPromise).then((responses=>{if(isSendRequestsEmpty)return resolve(responses.map(((response,index)=>{var _a;return{id:String((null===(_a=payload[index])||void 0===_a?void 0:_a.id)||idBase+index+1),jsonrpc:"2.0",method:payload[index].method,result:"fulfilled"===response.status?response.value:void 0,error:"fulfilled"!==response.status?response.reason:void 0}})));const originalLengthResponse=processResponses(payload,responses);return resolve(originalLengthResponse)})).catch((error=>{throw dist.ethErrors.rpc.internal(null==error?void 0:error.message)}))}else this.request(Object.assign(Object.assign({},payload),{id:Number(payload.id)})).then(resolve)}));if("function"!=typeof callback)return handleRequest;handleRequest.then((data=>callback(null,data))).catch((error=>callback(error)))}))}sendUserOperation(userOp){return __awaiter(this,void 0,void 0,(function*(){return this.request({method:"eth_sendUserOperation",params:[userOp]})}))}request(payload){var _a,_b,_c,_d,_e,_f,_g,_h;return __awaiter(this,void 0,void 0,(function*(){if(Array.isArray(payload))return this.sendAsync(payload);if(!(null==payload?void 0:payload.method))throw dist.ethErrors.rpc.invalidRequest();const{blockchainName,switchableNetwork,sessionKeyEnv}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this);if(null===(_a=this.existedSDK)||void 0===_a?void 0:_a.isBlocto){if("wallet_switchEthereumChain"===payload.method){if(!(null===(_c=null===(_b=null==payload?void 0:payload.params)||void 0===_b?void 0:_b[0])||void 0===_c?void 0:_c.chainId))throw dist.ethErrors.rpc.invalidParams();return this.existedSDK.request(payload).then((()=>{var _a,_b,_c;return this.networkVersion=`${parseChainId(null===(_a=null==payload?void 0:payload.params)||void 0===_a?void 0:_a[0].chainId)}`,this.chainId=`0x${parseChainId(null===(_b=null==payload?void 0:payload.params)||void 0===_b?void 0:_b[0].chainId).toString(16)}`,this.rpc=null===(_c=null==switchableNetwork?void 0:switchableNetwork[this.networkVersion])||void 0===_c?void 0:_c.rpc_url,null}))}return this.existedSDK.request(payload)}switch(payload.method){case"eth_chainId":return this.chainId;case"net_version":return this.networkVersion;case"wallet_addEthereumChain":return this.loadSwitchableNetwork((null==payload?void 0:payload.params)||[]);case"eth_blockNumber":case"web3_clientVersion":case"eth_call":{const response=yield this.handleReadRequests(payload);if(!response||response&&!response.result&&response.error){const errorMessage=(null===(_d=null==response?void 0:response.error)||void 0===_d?void 0:_d.message)?response.error.message:"Request failed";throw dist.ethErrors.rpc.internal(errorMessage)}return"function"==typeof(null==payload?void 0:payload.callback)&&payload.callback(null,response.result),response.result}case"wallet_switchEthereumChain":return this.handleSwitchChain(null===(_f=null===(_e=null==payload?void 0:payload.params)||void 0===_e?void 0:_e[0])||void 0===_f?void 0:_f.chainId);case"wallet_disconnect":return this.handleDisconnect();case"eth_accounts":return getEvmAddress(sessionKeyEnv,blockchainName)||[]}if(!getEvmAddress(sessionKeyEnv,blockchainName)){const email=null===(_g=null==payload?void 0:payload.params)||void 0===_g?void 0:_g[0];"eth_requestAccounts"===payload.method&&isEmail(email)?yield this.enable(email):yield this.enable()}try{let response=null,result=null;switch(payload.method){case"eth_requestAccounts":result=yield this.fetchAccounts();break;case"eth_coinbase":result=null===(_h=getEvmAddress(sessionKeyEnv,blockchainName))||void 0===_h?void 0:_h[0];break;case"eth_signTypedData_v3":case"eth_signTypedData":case"eth_signTypedData_v4":case"personal_sign":result=yield this.handleSign(payload);break;case"eth_sign":throw dist.ethErrors.rpc.methodNotFound("Method Not Supported: eth_sign has been disabled");case"eth_sendTransaction":result=yield this.handleSendTransaction(payload);break;case"wallet_sendMultiCallTransaction":result=yield this.handleSendBatchTransaction(payload);break;case"eth_signTransaction":case"eth_sendRawTransaction":throw dist.ethErrors.rpc.methodNotSupported("Method Not Supported: "+payload.method);case"eth_sendUserOperation":result=yield this.handleSendUserOperation(payload);break;case"eth_estimateUserOperationGas":case"eth_getUserOperationByHash":case"eth_getUserOperationReceipt":case"eth_supportedEntryPoints":result=yield this.handleBundler(payload);break;default:response=yield this.handleReadRequests(payload)}if(response&&!response.result&&response.error){const errorMessage=response.error.message?response.error.message:"Request failed";throw dist.ethErrors.rpc.internal(errorMessage)}return response?response.result:result}catch(error){throw dist.ethErrors.rpc.internal(null==error?void 0:error.message)}}))}bloctoApi(url,options){var _a;return __awaiter(this,void 0,void 0,(function*(){const{walletServer,blockchainName,sessionKeyEnv}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),sessionId=(null===(_a=getAccountStorage(sessionKeyEnv))||void 0===_a?void 0:_a.code)||"";if(!sessionId)throw dist.ethErrors.provider.unauthorized();return fetch(`${walletServer}/api/${blockchainName}${url}`,Object.assign({headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":sessionId}},options)).then((response=>responseSessionGuard(response,sessionKeyEnv,(()=>{var _a;null===(_a=this.eventListeners)||void 0===_a||_a.disconnect.forEach((listener=>listener(dist.ethErrors.provider.disconnected())))})))).catch((e=>{throw"unsupported_method"===(null==e?void 0:e.error_code)?dist.ethErrors.rpc.methodNotSupported("Method Not Supported: "+e.message):dist.ethErrors.rpc.server({code:-32005,message:`Blocto server error: ${e.message}`})}))}))}responseListener(frame,objectKey){return __awaiter(this,void 0,void 0,(function*(){const{walletServer}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this);return new Promise(((resolve,reject)=>addSelfRemovableHandler("message",((event,removeEventListener)=>{const e=event;e.origin===walletServer&&"ETH:FRAME:RESPONSE"===e.data.type&&("APPROVED"===e.data.status&&(removeEventListener(),detatchFrame(frame),resolve(e.data[objectKey])),"DECLINED"===e.data.status&&(removeEventListener(),detatchFrame(frame),"incorrect_session_id"===e.data.errorCode&&this.handleDisconnect(),reject(dist.ethErrors.provider.userRejectedRequest(e.data.errorMessage)))),"ETH:FRAME:CLOSE"===e.data.type&&(removeEventListener(),detatchFrame(frame),reject(dist.ethErrors.provider.userRejectedRequest("User declined the request")))}))))}))}setIframe(url,blockchain){return __awaiter(this,void 0,void 0,(function*(){if("undefined"==typeof window)throw dist.ethErrors.provider.custom({code:1001,message:"Blocto SDK only works in browser environment"});const{walletServer,blockchainName}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),frame=createFrame(`${walletServer}/${this.appId}/${blockchain||blockchainName}${url}`);return attachFrame(frame),frame}))}enable(email){var _a;return __awaiter(this,void 0,void 0,(function*(){if("undefined"==typeof window)throw dist.ethErrors.provider.custom({code:1001,message:"Blocto SDK only works in browser environment"});const{walletServer,blockchainName,sessionKeyEnv}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this);if(null===(_a=this.existedSDK)||void 0===_a?void 0:_a.isBlocto)return this.existedSDK.chainId!==this.chainId&&(yield this.existedSDK.request({method:"wallet_addEthereumChain",params:[{chainId:this.chainId}]}),yield this.existedSDK.request({method:"wallet_switchEthereumChain",params:[{chainId:this.chainId}]}),setEvmAddress(sessionKeyEnv,blockchainName,[this.existedSDK.address])),new Promise(((resolve,reject)=>setTimeout((()=>this.existedSDK.enable().then(resolve).catch(reject)),10)));const address=getEvmAddress(sessionKeyEnv,blockchainName);if(address)return new Promise((resolve=>{resolve(address)}));const params=new URLSearchParams;params.set("l6n",window.location.origin),params.set("v","0.10.2"),params.set("q",`${window.location.pathname}${window.location.search}`);const emailParam=email&&isEmail(email)?`/${email}`:"",loginFrame=yield this.setIframe(`/authn${emailParam}?${params.toString()}`);return new Promise(((resolve,reject)=>{addSelfRemovableHandler("message",((event,removeListener)=>{var _a,_b;const e=event;e.origin===walletServer&&("ETH:FRAME:RESPONSE"===e.data.type&&(removeListener(),detatchFrame(loginFrame),null===(_a=this.eventListeners)||void 0===_a||_a.connect.forEach((listener=>listener({chainId:this.chainId}))),setAccountStorage(sessionKeyEnv,{code:e.data.code,evm:{[blockchainName]:[e.data.addr]}},e.data.exp),(null===(_b=e.data)||void 0===_b?void 0:_b.isAccountChanged)&&postMessage({originChain:CHAIN.ETHEREUM,type:"BLOCTO_SDK:ACCOUNT_CHANGED"}),addSelfRemovableHandler("message",((event,removeListener)=>{var _a,_b,_c;const messageEvent=event,isAccountChanged="BLOCTO_SDK:ACCOUNT_CHANGED"===(null===(_a=messageEvent.data)||void 0===_a?void 0:_a.type),isAnotherChain=(null===(_b=messageEvent.data)||void 0===_b?void 0:_b.originChain)!==CHAIN.ETHEREUM;isAccountChanged&&(null===(_c=this.eventListeners)||void 0===_c||_c.accountsChanged.forEach((listener=>listener([e.data.addr])))),isAccountChanged&&isAnotherChain&&(this.handleDisconnect(),removeListener())})),resolve([e.data.addr])),"ETH:FRAME:CLOSE"===e.data.type&&(removeListener(),detatchFrame(loginFrame),reject(dist.ethErrors.provider.userRejectedRequest())))}))}))}))}fetchAccounts(){return __awaiter(this,void 0,void 0,(function*(){__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this);const{blockchainName,sessionKeyEnv}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),{accounts}=yield this.bloctoApi("/accounts");return setEvmAddress(sessionKeyEnv,blockchainName,accounts),accounts}))}handleReadRequests(payload){return __awaiter(this,void 0,void 0,(function*(){return __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this),fetch(this.rpc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({id:1,jsonrpc:"2.0"},payload))}).then((response=>response.json())).catch((e=>{throw dist.ethErrors.rpc.internal(e)}))}))}handleSign({method,params}){return __awaiter(this,void 0,void 0,(function*(){let message="";if(Array.isArray(params))if("personal_sign"===method)message=isHexString(params[0])?params[0].slice(2):(str=params[0],Buffer.from(str,"utf8").toString("hex"));else if(["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(method)){message=params[1];const{domain}=JSON.parse(message);if(isHexString(domain.chainId))throw dist.ethErrors.rpc.invalidParams(`Provided chainId "${domain.chainId}" must be a number`);if(parseChainId(domain.chainId)!==parseChainId(this.chainId))throw dist.ethErrors.rpc.invalidParams(`Provided chainId "${domain.chainId}" must match the active chainId "${parseChainId(this.chainId)}"`)}var str;__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this);const{signatureId}=yield this.bloctoApi("/user-signature",{method:"POST",body:JSON.stringify({method,message})}),signFrame=yield this.setIframe(`/user-signature/${signatureId}`);return this.responseListener(signFrame,"signature")}))}handleSwitchChain(targetChainId){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if(!targetChainId)throw dist.ethErrors.rpc.invalidParams();const{walletServer,blockchainName,sessionKeyEnv,switchableNetwork}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),oldAccount=null===(_a=getEvmAddress(sessionKeyEnv,blockchainName))||void 0===_a?void 0:_a[0],oldChainId=parseChainId(this.chainId),newChainId=parseChainId(targetChainId);if(oldChainId===newChainId)return null;if(!switchableNetwork[newChainId])throw dist.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${newChainId}". Try adding the chain using wallet_addEthereumChain first.`});if(this.networkVersion=`${newChainId}`,this.chainId=`0x${newChainId.toString(16)}`,this.rpc=switchableNetwork[newChainId].rpc_url,this._blocto=Object.assign(Object.assign({},this._blocto),{blockchainName:"",networkType:""}),!oldAccount)return null===(_b=this.eventListeners)||void 0===_b||_b.chainChanged.forEach((listener=>listener(this.chainId))),yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),null;if(switchableNetwork[newChainId].wallet_web_url!==switchableNetwork[oldChainId].wallet_web_url)return this.enable().then((([newAccount])=>{var _a;return newAccount!==oldAccount&&(null===(_a=this.eventListeners)||void 0===_a||_a.accountsChanged.forEach((listener=>listener([newAccount])))),this.eventListeners.chainChanged.forEach((listener=>listener(this.chainId))),null})).catch((error=>{throw this.networkVersion=`${oldChainId}`,this.chainId=`0x${oldChainId.toString(16)}`,this.rpc=switchableNetwork[oldChainId].rpc_url,this._blocto=Object.assign(Object.assign({},this._blocto),{blockchainName:"",networkType:""}),__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),error}));const switchChainFrame=yield this.setIframe(`/switch-chain?to=${switchableNetwork[newChainId].name}`,switchableNetwork[oldChainId].name);return new Promise(((resolve,reject)=>{addSelfRemovableHandler("message",((event,removeListener)=>{var _a,_b,_c,_d,_e,_f,_g,_h;const e=event;e.origin===walletServer&&("ETH:FRAME:RESPONSE"===e.data.type&&(removeListener(),detatchFrame(switchChainFrame),(null===(_a=e.data)||void 0===_a?void 0:_a.addr)&&oldAccount&&(setAccountStorage(sessionKeyEnv,{code:null===(_b=e.data)||void 0===_b?void 0:_b.code,evm:{[switchableNetwork[newChainId].name]:[e.data.addr]}},null===(_c=e.data)||void 0===_c?void 0:_c.exp),e.data.addr!==oldAccount&&(null===(_d=this.eventListeners)||void 0===_d||_d.accountsChanged.forEach((listener=>listener([e.data.addr]))))),null===(_e=this.eventListeners)||void 0===_e||_e.chainChanged.forEach((listener=>listener(this.chainId))),__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),resolve(null)),"ETH:FRAME:CLOSE"===e.data.type&&(removeListener(),detatchFrame(switchChainFrame),(null===(_f=e.data)||void 0===_f?void 0:_f.hasApprovedSwitchChain)?(null===(_g=this.eventListeners)||void 0===_g||_g.chainChanged.forEach((listener=>listener(this.chainId))),removeAllEvmAddress(sessionKeyEnv),null===(_h=this.eventListeners)||void 0===_h||_h.disconnect.forEach((listener=>listener(dist.ethErrors.provider.disconnected()))),__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),resolve(null)):(this.networkVersion=`${oldChainId}`,this.chainId=`0x${oldChainId.toString(16)}`,this.rpc=switchableNetwork[oldChainId].rpc_url,this._blocto=Object.assign(Object.assign({},this._blocto),{blockchainName:"",networkType:""}),__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this),reject(dist.ethErrors.provider.userRejectedRequest()))))}))}))}))}handleSendTransaction(payload){var _a;return __awaiter(this,void 0,void 0,(function*(){__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this);const{isValid,invalidMsg}=isValidTransaction(null===(_a=payload.params)||void 0===_a?void 0:_a[0]);if(!isValid)throw dist.ethErrors.rpc.invalidParams(invalidMsg);return __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_createAuthzFrame).call(this,payload.params)}))}handleSendBatchTransaction(payload){return __awaiter(this,void 0,void 0,(function*(){let originalParams,revertFlag;__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this),Array.isArray(payload.params)&&payload.params.length>=2?[originalParams,revertFlag]=payload.params:(originalParams=payload.params,revertFlag=!1);const revert=revertFlag||!1,{isValid,invalidMsg}=(transactions=>{if(!Array.isArray(transactions))return{isValid:!1,invalidMsg:ERROR_MESSAGE.INVALID_TRANSACTIONS};for(let i=0;i<transactions.length;i++){const{isValid,invalidMsg}=isValidTransaction(transactions[i]);if(!isValid)return{isValid,invalidMsg}}return{isValid:!0}})(originalParams);if(!isValid)throw dist.ethErrors.rpc.invalidParams(invalidMsg);return __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_createAuthzFrame).call(this,originalParams,revert)}))}handleSendUserOperation(payload){return __awaiter(this,void 0,void 0,(function*(){__classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this);const{authorizationId}=yield this.bloctoApi("/user-operation",{method:"POST",body:JSON.stringify(payload.params)}),userOPFrame=yield this.setIframe(`/user-operation/${authorizationId}`);return this.responseListener(userOPFrame,"userOpHash")}))}handleBundler(payload){return __awaiter(this,void 0,void 0,(function*(){return __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_checkNetworkMatched).call(this),this.bloctoApi("/rpc/bundler",{method:"POST",body:JSON.stringify(Object.assign({id:1,jsonrpc:"2.0"},payload))})}))}handleDisconnect(){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if(null===(_a=this.existedSDK)||void 0===_a?void 0:_a.isBlocto)return this.existedSDK.request({method:"wallet_disconnect"});const{sessionKeyEnv}=yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this);removeAllEvmAddress(sessionKeyEnv),null===(_b=this.eventListeners)||void 0===_b||_b.disconnect.forEach((listener=>listener(dist.ethErrors.provider.disconnected())))}))}loadSwitchableNetwork(networkList){return __awaiter(this,void 0,void 0,(function*(){if(null==networkList?void 0:networkList.length){const listToAdd=networkList.map((({chainId,rpcUrls})=>{if(!chainId)throw dist.ethErrors.rpc.invalidParams("Empty chainId");const parsedChainId=`${parseChainId(chainId)}`;if(this._blocto.switchableNetwork[parsedChainId])return null;const parsedRpc=(null==rpcUrls?void 0:rpcUrls[0])||ETH_RPC_LIST[parsedChainId];if(!parsedRpc)throw dist.ethErrors.rpc.invalidParams("rpcUrls required");return __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_addToSwitchable).call(this,{chainId:parsedChainId,rpcUrls:[parsedRpc]})}));return Promise.all(listToAdd).then((()=>null))}throw dist.ethErrors.rpc.invalidParams("Empty networkList")}))}supportChainList(){return __awaiter(this,void 0,void 0,(function*(){const supportNetworkList=yield getEvmSupport().catch((e=>{throw dist.ethErrors.provider.custom({code:1001,message:`Get blocto server failed: ${e.message}`})}));return Object.keys(supportNetworkList).map((chainId=>{const{display_name}=supportNetworkList[chainId];return{chainId,chainName:display_name}}))}))}on(event,listener){var _a;(null===(_a=this.existedSDK)||void 0===_a?void 0:_a.isBlocto)&&this.existedSDK.on(event,listener),super.on(event,listener)}removeListener(event,listener){var _a;(null===(_a=this.existedSDK)||void 0===_a?void 0:_a.isBlocto)&&this.existedSDK.off(event,listener),super.removeListener(event,listener)}}_EthereumProvider_instances=new WeakSet,_EthereumProvider_getBloctoProperties=function _EthereumProvider_getBloctoProperties(){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if((null===(_a=this._blocto)||void 0===_a?void 0:_a.unloadedNetwork)&&(yield this.loadSwitchableNetwork(this._blocto.unloadedNetwork),delete this._blocto.unloadedNetwork),this._blocto.sessionKeyEnv&&this._blocto.walletServer&&this._blocto.blockchainName&&this._blocto.networkType&&this._blocto.switchableNetwork)return this._blocto;const supportNetworkList=yield getEvmSupport().catch((e=>{throw dist.ethErrors.provider.custom({code:1001,message:`Get blocto server failed: ${e.message}`})})),{chain_id,name,network_type,blocto_service_environment,display_name}=null!==(_b=supportNetworkList[this.networkVersion])&&void 0!==_b?_b:{};if(!chain_id)throw dist.ethErrors.provider.unsupportedMethod(`Get support chain failed: ${this.networkVersion} might not be supported yet.`);const walletServer=this.injectedWalletServer||ETH_ENV_WALLET_SERVER_MAPPING[blocto_service_environment];return this._blocto=Object.assign(Object.assign({},this._blocto),{sessionKeyEnv:ETH_SESSION_KEY_MAPPING[blocto_service_environment],walletServer,blockchainName:name,networkType:network_type,switchableNetwork:Object.assign(Object.assign({},this._blocto.switchableNetwork),{[chain_id]:{name,display_name,network_type,wallet_web_url:walletServer,rpc_url:this.rpc}})}),this._blocto}))},_EthereumProvider_addToSwitchable=function _EthereumProvider_addToSwitchable({chainId,rpcUrls}){var _a;return __awaiter(this,void 0,void 0,(function*(){yield __classPrivateFieldGet(this,_EthereumProvider_instances,"m",_EthereumProvider_getBloctoProperties).call(this);const supportNetworkList=yield getEvmSupport().catch((e=>{throw dist.ethErrors.provider.custom({code:1001,message:`Get blocto server failed: ${e.message}`})})),{chain_id,name,display_name,network_type,blocto_service_environment}=null!==(_a=supportNetworkList[chainId])&&void 0!==_a?_a:{};if(!chain_id)throw dist.ethErrors.provider.unsupportedMethod(`Get support chain failed: ${chainId} might not be supported yet.`);const wallet_web_url=ETH_ENV_WALLET_SERVER_MAPPING[blocto_service_environment];this._blocto.switchableNetwork[chain_id]={name,display_name,network_type,wallet_web_url,rpc_url:rpcUrls[0]}}))},_EthereumProvider_checkNetworkMatched=function _EthereumProvider_checkNetworkMatched(){var _a;if((null===(_a=this.existedSDK)||void 0===_a?void 0:_a.isBlocto)&&parseChainId(this.existedSDK.chainId)!==parseChainId(this.chainId))throw dist.ethErrors.provider.chainDisconnected()},_EthereumProvider_createAuthzFrame=function _EthereumProvider_createAuthzFrame(params,revert=!0){return __awaiter(this,void 0,void 0,(function*(){const{authorizationId}=yield this.bloctoApi("/authz",{method:"POST",body:JSON.stringify([params,revert])}),iframeParams=new URLSearchParams;iframeParams.set("l6n",window.location.origin),iframeParams.set("q",`${window.location.pathname}${window.location.search}`);const authzFrame=yield this.setIframe(`/authz/${authorizationId}?${iframeParams.toString()}`);return this.responseListener(authzFrame,"txHash")}))};class AptosProvider extends BloctoProvider{get existedSDK(){if("undefined"!=typeof window)return window.bloctoAptos}constructor({chainId,server,appId}){super(),this.publicKey=[],this.authKey="",this.off=this.removeListener,invariant(chainId,"'chainId' is required"),invariant(appId,"It is necessary to interact with Blocto wallet via your app id. Please visit https://developers.blocto.app for more details."),this.chainId=chainId,this.networkName=APT_CHAIN_ID_NAME_MAPPING[chainId],this.api=APT_CHAIN_ID_RPC_MAPPING[chainId],this.sessionKey=APT_SESSION_KEY_MAPPING[chainId];const defaultServer=APT_CHAIN_ID_SERVER_MAPPING[chainId];this.appId=appId||DEFAULT_APP_ID,this.server=server||defaultServer||""}get publicAccount(){var _a;return{address:(null===(_a=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_a?void 0:_a[0])||null,publicKey:this.publicKey.length?this.publicKey:null,authKey:null,minKeysRequired:2}}network(){return __awaiter(this,void 0,void 0,(function*(){return{name:this.networkName,api:this.api,chainId:this.chainId.toString()}}))}isConnected(){var _a;return __awaiter(this,void 0,void 0,(function*(){return!!(null===(_a=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_a?void 0:_a.length)}))}signTransaction(transaction){var _a;return __awaiter(this,void 0,void 0,(function*(){if(this.existedSDK)return this.existedSDK.signTransaction(transaction);if((yield this.isConnected())||(yield this.connect()),!(null===(_a=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_a?void 0:_a.length))throw new Error("Fail to get account");throw new Error("signTransaction method not supported.")}))}disconnect(){var _a;return __awaiter(this,void 0,void 0,(function*(){var key,chain;this.existedSDK?yield this.existedSDK.disconnect():(key=this.sessionKey,chain=CHAIN.APTOS,setAccountStorage(key,{accounts:{[chain]:void 0}}),null===(_a=this.eventListeners)||void 0===_a||_a.disconnect.forEach((listener=>listener({code:4900,message:"Wallet disconnected"}))))}))}signAndSubmitTransaction(transaction,txOptions={}){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if(this.existedSDK)return this.existedSDK.signAndSubmitTransaction(transaction,txOptions);if((yield this.isConnected())||(yield this.connect()),!(null===(_a=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_a?void 0:_a.length))throw new Error("Fail to get account");const sessionId=(null===(_b=getAccountStorage(this.sessionKey))||void 0===_b?void 0:_b.code)||"",{authorizationId}=yield fetch(`${this.server}/api/aptos/authz`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":sessionId},body:JSON.stringify(Object.assign(Object.assign({},transaction),txOptions))}).then((response=>responseSessionGuard(response,this.sessionKey)));if("undefined"==typeof window)throw new Error("Currently only supported in browser");const authzFrame=createFrame(`${this.server}/${this.appId}/aptos/authz/${authorizationId}`);return attachFrame(authzFrame),new Promise(((resolve,reject)=>addSelfRemovableHandler("message",((event,removeEventListener)=>{const e=event;e.origin===this.server&&"APTOS:FRAME:RESPONSE"===e.data.type&&("APPROVED"===e.data.status&&(removeEventListener(),detatchFrame(authzFrame),resolve({hash:e.data.txHash})),"DECLINED"===e.data.status&&(removeEventListener(),detatchFrame(authzFrame),"incorrect_session_id"===e.data.errorCode&&this.disconnect(),reject(new Error(e.data.errorMessage))))}))))}))}signMessage(payload){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){const formattedPayload=(payload=>{var _a,_b;const formattedPayload=Object.assign({},payload),{message,nonce,address,application,chainId}=payload;return"string"!=typeof message&&(formattedPayload.message=null!==(_a=String(message))&&void 0!==_a?_a:""),"string"!=typeof nonce&&(formattedPayload.nonce=null!==(_b=String(nonce))&&void 0!==_b?_b:""),address&&"boolean"!=typeof address&&(formattedPayload.address=!!address),application&&"boolean"!=typeof application&&(formattedPayload.application=!!application),chainId&&"boolean"!=typeof chainId&&(formattedPayload.chainId=!!chainId),formattedPayload})(payload);if(this.existedSDK)return this.existedSDK.signMessage(formattedPayload);if((yield this.isConnected())||(yield this.connect()),!(null===(_a=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_a?void 0:_a.length))throw new Error("Fail to get account");if("undefined"==typeof window)throw new Error("Currently only supported in browser");const sessionId=(null===(_b=getAccountStorage(this.sessionKey))||void 0===_b?void 0:_b.code)||"",{signatureId}=yield fetch(`${this.server}/api/aptos/user-signature`,{method:"POST",headers:{"Content-Type":"application/json","Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":sessionId},body:JSON.stringify(formattedPayload)}).then((response=>responseSessionGuard(response,this.sessionKey))),signFrame=createFrame(`${this.server}/${this.appId}/aptos/user-signature/${signatureId}`);return attachFrame(signFrame),new Promise(((resolve,reject)=>addSelfRemovableHandler("message",((event,removeEventListener)=>{const e=event;e.origin===this.server&&"APTOS:FRAME:RESPONSE"===e.data.type&&("APPROVED"===e.data.status&&(removeEventListener(),detatchFrame(signFrame),resolve(e.data)),"DECLINED"===e.data.status&&(removeEventListener(),detatchFrame(signFrame),"incorrect_session_id"===e.data.errorCode&&this.disconnect(),reject(new Error(e.data.errorMessage))))}))))}))}connect(){return __awaiter(this,void 0,void 0,(function*(){return this.existedSDK?new Promise(((resolve,reject)=>setTimeout((()=>this.existedSDK.connect().then(resolve).catch(reject)),10))):new Promise(((resolve,reject)=>{var _a,_b;if("undefined"==typeof window)return reject("Currently only supported in browser");if(null===(_a=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_a?void 0:_a.length)return resolve({address:(null===(_b=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_b?void 0:_b[0])||null,publicKey:this.publicKey,authKey:null,minKeysRequired:2});const location=encodeURIComponent(window.location.origin),loginFrame=createFrame(`${this.server}/${this.appId}/aptos/authn?l6n=${location}&v=0.10.2}`);attachFrame(loginFrame),addSelfRemovableHandler("message",((event,removeListener)=>__awaiter(this,void 0,void 0,(function*(){var _c,_d,_e,_f;const e=event;if(e.origin===this.server){if("APTOS:FRAME:RESPONSE"===e.data.type){if(removeListener(),detatchFrame(loginFrame),setAccountStorage(this.sessionKey,{code:e.data.code,accounts:{[CHAIN.APTOS]:[e.data.addr]}},e.data.exp),(null===(_c=e.data)||void 0===_c?void 0:_c.isAccountChanged)&&postMessage({originChain:CHAIN.APTOS,type:"BLOCTO_SDK:ACCOUNT_CHANGED"}),addSelfRemovableHandler("message",((event,removeListener)=>{var _a,_b;const messageEvent=event;"BLOCTO_SDK:ACCOUNT_CHANGED"===(null===(_a=messageEvent.data)||void 0===_a?void 0:_a.type)&&(null===(_b=messageEvent.data)||void 0===_b?void 0:_b.originChain)!==CHAIN.APTOS&&(this.disconnect(),removeListener())})),!(null===(_d=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_d?void 0:_d.length))return reject();try{const{public_keys:publicKeys}=yield fetch(`${this.server}/blocto/aptos/accounts/${null===(_e=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_e?void 0:_e[0]}`).then((response=>response.json()));this.publicKey=publicKeys||[],resolve({address:(null===(_f=getChainAddress(this.sessionKey,CHAIN.APTOS))||void 0===_f?void 0:_f[0])||"",publicKey:this.publicKey,authKey:null,minKeysRequired:2})}catch(err){return reject(e)}}"APTOS:FRAME:CLOSE"===e.data.type&&(removeListener(),detatchFrame(loginFrame),reject(new Error("User declined the login request")))}}))))}))}))}fetchAddress(){var _a;return __awaiter(this,void 0,void 0,(function*(){const sessionId=(null===(_a=getAccountStorage(this.sessionKey))||void 0===_a?void 0:_a.code)||"",{accounts}=yield fetch(`${this.server}/api/aptos/accounts`,{headers:{"Blocto-Application-Identifier":this.appId,"Blocto-Session-Identifier":sessionId}}).then((response=>responseSessionGuard(response,this.sessionKey)));var key,chain,account;return key=this.sessionKey,chain=CHAIN.APTOS,account=accounts,setAccountStorage(key,{accounts:{[chain]:account}}),(null==accounts?void 0:accounts[0])||""}))}on(event,listener){this.existedSDK&&this.existedSDK.on(event,listener),super.on(event,listener)}removeListener(event,listener){this.existedSDK&&this.existedSDK.off(event,listener),super.removeListener(event,listener)}}class BloctoSDK{constructor({appId,ethereum,aptos}){ethereum&&(this.ethereum=new EthereumProvider(Object.assign(Object.assign({},ethereum),{appId}))),aptos&&(this.aptos=new AptosProvider(Object.assign(Object.assign({},aptos),{appId})))}}var lib_esm=__webpack_require__("./node_modules/@ethersproject/address/lib.esm/index.js"),web3_provider=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/web3-provider.js"),bytes_lib_esm=__webpack_require__("./node_modules/@ethersproject/bytes/lib.esm/index.js"),walletIds_dff6dced_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/walletIds-dff6dced.browser.esm.js"),url_a45219bd_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/url-a45219bd.browser.esm.js"),normalizeChainId_1fb9aedf_browser_esm=__webpack_require__("./node_modules/@thirdweb-dev/wallets/dist/normalizeChainId-1fb9aedf.browser.esm.js");__webpack_require__("./node_modules/eventemitter3/index.mjs");class BloctoConnector extends WagmiConnector_2f14002d_browser_esm.W{constructor(_ref){let{chains,options={}}=_ref;super({chains,options}),(0,defineProperty_350fc508_browser_esm._)(this,"id",walletIds_dff6dced_browser_esm.w.blocto),(0,defineProperty_350fc508_browser_esm._)(this,"name","Blocto"),(0,defineProperty_350fc508_browser_esm._)(this,"ready",!0),this._onAccountsChangedBind=this.onAccountsChanged.bind(this),this._onChainChangedBind=this.onChainChanged.bind(this),this._onDisconnectBind=this.onDisconnect.bind(this)}async connect(config){try{const provider=await this.getProvider(config);this.setupListeners(),this.emit("message",{type:"connecting"});const accounts=await provider.request({method:"eth_requestAccounts"}),account=lib_esm.getAddress(accounts[0]),id=await this.getChainId();return{account,chain:{id,unsupported:this.isChainUnsupported(id)},provider}}catch(error){if(this._handleConnectReset(),this._isUserRejectedRequestError(error))throw new errors_9edc08c8_browser_esm.U(error);throw error}}async disconnect(){const provider=await this.getProvider();await provider.request({method:"wallet_disconnect"}),this.removeListeners(),this._handleConnectReset()}async getAccount(){const provider=await this.getProvider(),accounts=await provider.request({method:"eth_accounts"}),[address]=accounts||[];if(!address)throw new Error("No accounts found");return address}async getChainId(){const provider=await this.getProvider(),chainId=await provider.request({method:"eth_chainId"});return(0,normalizeChainId_1fb9aedf_browser_esm.n)(chainId)}getProvider(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._provider){const _chainId=chainId??this.chains[0]?.chainId??1,_rpc=this.chains.find((x=>x.chainId===_chainId))?.rpc[0];this._provider=new BloctoSDK({ethereum:{chainId:_chainId,rpc:_rpc},appId:this.options.appId})?.ethereum}if(!this._provider)throw new errors_9edc08c8_browser_esm.a;return Promise.resolve(this._provider)}async getSigner(){let{chainId}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[provider,account]=await Promise.all([this.getProvider(),this.getAccount()]);return new web3_provider.j(provider,chainId).getSigner(account)}async isAuthorized(){return!!this._provider?._blocto?.sessionKeyEnv??!1}async switchChain(chainId){const provider=await this.getProvider(),id=bytes_lib_esm.hexValue(chainId),chain=this.chains.find((x=>x.chainId===chainId));if(!chain)throw new errors_9edc08c8_browser_esm.S(new Error("chain not found on connector."));if(!(await provider.supportChainList())[`${chainId}`])throw new errors_9edc08c8_browser_esm.S(new Error(`Blocto unsupported chain: ${id}`));try{return await provider.request({method:"wallet_addEthereumChain",params:[{chainId:id,rpcUrls:(0,url_a45219bd_browser_esm.g)(chain)}]}),await provider.request({method:"wallet_switchEthereumChain",params:[{chainId:id}]}),chain}catch(error){if(this._isUserRejectedRequestError(error))throw new errors_9edc08c8_browser_esm.U(error);throw new errors_9edc08c8_browser_esm.S(error)}}onAccountsChanged(){}async onChainChanged(chain){const id=(0,normalizeChainId_1fb9aedf_browser_esm.n)(chain),unsupported=this.isChainUnsupported(id),account=await this.getAccount();this.emit("change",{chain:{id,unsupported},account})}onDisconnect(){this.emit("disconnect")}async setupListeners(){const provider=await this.getProvider();provider.on("accountsChanged",this._onAccountsChangedBind),provider.on("chainChanged",this._onChainChangedBind),provider.on("disconnect",this._onDisconnectBind)}async removeListeners(){const provider=await this.getProvider();provider.off("accountsChanged",this._onAccountsChangedBind),provider.off("chainChanged",this._onChainChangedBind),provider.off("disconnect",this._onDisconnectBind)}_isUserRejectedRequestError(error){return/(user rejected)/i.test(error.message)}_handleConnectReset(){this._provider=void 0}}}}]);